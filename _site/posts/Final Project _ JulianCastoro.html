<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julian Castoro">
<meta name="dcterms.date" content="2022-12-23">
<meta name="description" content="WIP Final Project">

<title>DACSS 601: Data Science Fundamentals - FALL 2022 - Global Military Spending - An Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<meta name="twitter:title" content="DACSS 601: Data Science Fundamentals - FALL 2022 - Global Military Spending - An Analysis">
<meta name="twitter:description" content="WIP Final Project">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../images/UMass White Wordmark Horiz.png" alt="">
    <span class="navbar-title">DACSS 601: Data Science Fundamentals - FALL 2022</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page">Fall 2022 Posts</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">Contributors</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss">DACSS</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS/601_Fall_2022"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Global Military Spending - An Analysis</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Final materials</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://dacss.github.io/601_Fall_2022/" class="sidebar-item-text sidebar-link">Fall 2022 posts</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">final Posts</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#data-choice-overview" id="toc-data-choice-overview" class="nav-link" data-scroll-target="#data-choice-overview">Data choice overview</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a>
  <ul class="collapse">
  <li><a href="#description" id="toc-description" class="nav-link" data-scroll-target="#description">Description</a></li>
  <li><a href="#source" id="toc-source" class="nav-link" data-scroll-target="#source">Source</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#input-and-cleaning" id="toc-input-and-cleaning" class="nav-link" data-scroll-target="#input-and-cleaning">Input and Cleaning</a>
  <ul class="collapse">
  <li><a href="#reading-in-raw-information" id="toc-reading-in-raw-information" class="nav-link" data-scroll-target="#reading-in-raw-information">Reading in raw information</a></li>
  <li><a href="#tidying-data" id="toc-tidying-data" class="nav-link" data-scroll-target="#tidying-data">Tidying Data</a></li>
  <li><a href="#clean-and-format-function" id="toc-clean-and-format-function" class="nav-link" data-scroll-target="#clean-and-format-function">Clean and format function</a></li>
  <li><a href="#pivoting-and-restructuring" id="toc-pivoting-and-restructuring" class="nav-link" data-scroll-target="#pivoting-and-restructuring">Pivoting and Restructuring</a>
  <ul class="collapse">
  <li><a href="#pivot-and-notation-changes" id="toc-pivot-and-notation-changes" class="nav-link" data-scroll-target="#pivot-and-notation-changes">Pivot and Notation Changes</a></li>
  <li><a href="#converting-column-types" id="toc-converting-column-types" class="nav-link" data-scroll-target="#converting-column-types">Converting Column Types</a></li>
  <li><a href="#joining-of-the-different-tabs" id="toc-joining-of-the-different-tabs" class="nav-link" data-scroll-target="#joining-of-the-different-tabs">Joining of the Different Tabs</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#descriptive-stats" id="toc-descriptive-stats" class="nav-link" data-scroll-target="#descriptive-stats">Descriptive stats</a>
  <ul class="collapse">
  <li><a href="#pivoting" id="toc-pivoting" class="nav-link" data-scroll-target="#pivoting">Pivoting</a></li>
  <li><a href="#statistics-by-region" id="toc-statistics-by-region" class="nav-link" data-scroll-target="#statistics-by-region">Statistics by region</a>
  <ul class="collapse">
  <li><a href="#militaryspend_currentusd" id="toc-militaryspend_currentusd" class="nav-link" data-scroll-target="#militaryspend_currentusd">MilitarySpend_currentUSD</a></li>
  <li><a href="#militaryspend_shareofgdp" id="toc-militaryspend_shareofgdp" class="nav-link" data-scroll-target="#militaryspend_shareofgdp">MilitarySpend_ShareOfGDP</a></li>
  <li><a href="#militaryspend_shareofgovspend" id="toc-militaryspend_shareofgovspend" class="nav-link" data-scroll-target="#militaryspend_shareofgovspend">MilitarySpend_ShareofGovSpend</a></li>
  <li><a href="#top-6-spenders-over-time" id="toc-top-6-spenders-over-time" class="nav-link" data-scroll-target="#top-6-spenders-over-time">Top 6 spenders over time</a></li>
  <li><a href="#top-6-spenders-over-time-with-gdp-raw-value-overlay" id="toc-top-6-spenders-over-time-with-gdp-raw-value-overlay" class="nav-link" data-scroll-target="#top-6-spenders-over-time-with-gdp-raw-value-overlay">Top 6 spenders over time with GDP raw value overlay</a></li>
  <li><a href="#top-and-bottom-5-spenders" id="toc-top-and-bottom-5-spenders" class="nav-link" data-scroll-target="#top-and-bottom-5-spenders">Top and bottom 5 spenders</a></li>
  </ul></li>
  <li><a href="#top-spenders-by-country" id="toc-top-spenders-by-country" class="nav-link" data-scroll-target="#top-spenders-by-country">Top spenders by Country</a></li>
  </ul></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">9/11 analysis</a></li>
  <li><a href="#ukraine-war-analysis" id="toc-ukraine-war-analysis" class="nav-link" data-scroll-target="#ukraine-war-analysis">Ukraine war analysis</a></li>
  <li><a href="#global-usd-military-spending-through-all-available-years" id="toc-global-usd-military-spending-through-all-available-years" class="nav-link" data-scroll-target="#global-usd-military-spending-through-all-available-years">Global USD Military spending through all available years</a>
  <ul class="collapse">
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  <li><a href="#citations" id="toc-citations" class="nav-link" data-scroll-target="#citations">Citations</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a>
  <ul class="collapse">
  <li><a href="#cleaning-with-intermitant-steps" id="toc-cleaning-with-intermitant-steps" class="nav-link" data-scroll-target="#cleaning-with-intermitant-steps">Cleaning with intermitant steps</a></li>
  </ul></li>
  <li><a href="#input-and-cleaning-1" id="toc-input-and-cleaning-1" class="nav-link" data-scroll-target="#input-and-cleaning-1">Input and Cleaning</a>
  <ul class="collapse">
  <li><a href="#reading-in-raw-information-1" id="toc-reading-in-raw-information-1" class="nav-link" data-scroll-target="#reading-in-raw-information-1">Reading in raw information</a></li>
  <li><a href="#tidying-data-1" id="toc-tidying-data-1" class="nav-link" data-scroll-target="#tidying-data-1">Tidying Data</a></li>
  <li><a href="#clean-and-format-function-1" id="toc-clean-and-format-function-1" class="nav-link" data-scroll-target="#clean-and-format-function-1">Clean and format function</a></li>
  <li><a href="#pivoting-and-restructuring-1" id="toc-pivoting-and-restructuring-1" class="nav-link" data-scroll-target="#pivoting-and-restructuring-1">Pivoting and Restructuring</a>
  <ul class="collapse">
  <li><a href="#pivot-and-notation-changes-1" id="toc-pivot-and-notation-changes-1" class="nav-link" data-scroll-target="#pivot-and-notation-changes-1">Pivot and Notation Changes</a></li>
  <li><a href="#converting-column-types-1" id="toc-converting-column-types-1" class="nav-link" data-scroll-target="#converting-column-types-1">Converting Column Types</a></li>
  <li><a href="#joining-of-the-different-tabs-1" id="toc-joining-of-the-different-tabs-1" class="nav-link" data-scroll-target="#joining-of-the-different-tabs-1">Joining of the Different Tabs</a></li>
  </ul></li>
  <li><a href="#extra-vizualizations" id="toc-extra-vizualizations" class="nav-link" data-scroll-target="#extra-vizualizations">extra Vizualizations</a></li>
  <li><a href="#animations" id="toc-animations" class="nav-link" data-scroll-target="#animations">Animations</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">Global Military Spending - An Analysis</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>

<div>
  <div class="description">
    WIP Final Project
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Julian Castoro </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 23, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>,<span class="at">decimals=</span><span class="dv">2</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="GovSpend_VS_RawUSD.gif" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Global Government spending(current USD), Size correlates with Share of GDP</figcaption><p></p>
</figure>
</div>
<section id="data-choice-overview" class="level2">
<h2 class="anchored" data-anchor-id="data-choice-overview">Data choice overview</h2>
<p>I initially chose this data set because recent events abroad have certainly escalated a global fear of war and I wanted to see how the tides of military spending ebbed and flowed over the course of recent history. The more I cleaned the data and played around with visualizations, the more questions I had. I am excited to see what sort of trends come from analyzing this data set.</p>
<p>I plan to show how different countries and regions value military spending and how that value changes over the course of time. Ideally I will be able to explain patterns in what I see with global or locally important historic events. How did the US spending change after 9/11 or more recently did we see anyone bolstering their defenses before news broke of the Russian invasion of Ukraine? How did spending change globally after the first and then second world war? While I am not a statistical expert and will not be able to refute a causation vs correlation argument, visualizations of these events and the corresponding spending patterns will still be interesting and hopefully provoking of conversation.</p>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<section id="description" class="level3">
<h3 class="anchored" data-anchor-id="description">Description</h3>
<p>Below is a list of the available sheets in the SIPRI military spending data export. A few of the tabs are the same base information altered to reflect a specific currency or ratio. I am choosing to use the “Current USD” as my source of raw spending numbers as I believe it to be the easiest to understand and relate to. I will also be using “share of GDP” as well as “Share of Govt. spending” to provide context around a nations spending compared to their population they intend on defending as well as compared to overall spending. The Constant (2020) USD values are all in Millions.</p>
<p>There will be NA’s throughout the dataset which represent the fact that the data was unavailable at that time. This could mean that the country did not exist in that year or they were unwilling to share their military spending information with SIPRI and so the NAs have been left in to reflect that fact. Data exists for at least one country from 1949 to 2021. There are 173 total countries in the database with the full list as well as some additional information in the appendix.</p>
<p>“Gross domestic product (GDP) is the total monetary or market value of all the finished goods and services produced within a country’s borders in a specific time period.” - Investopedia</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>sheets <span class="ot">&lt;-</span> <span class="fu">excel_sheets</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>sheets</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Front page"                     "Regional totals"               
 [3] "Local currency financial years" "Local currency calendar years" 
 [5] "Constant (2020) USD"            "Current USD"                   
 [7] "Share of GDP"                   "Per capita"                    
 [9] "Share of Govt. spending"        "Footnotes"                     </code></pre>
</div>
</div>
</section>
<section id="source" class="level3">
<h3 class="anchored" data-anchor-id="source">Source</h3>
<p>The Military spending information I am analyzing comes from <strong>SIPRI</strong>, the <strong>S</strong>tockholm <strong>I</strong>nternational <strong>P</strong>eace <strong>R</strong>esearch <strong>I</strong>nstitute. SIPRI was established in 1966 for the purpose of “research into conflict, armaments, arms control and disarmament”. The organization is funded by the Swedish government however it regularly works internationally with research centers around the globe. SIPRI collected this particular data set from the official reports of each of the included governments in the form of official publications such as public budgets.</p>
<p>Here is a peek at what the raw information looks like.</p>
<div class="cell" data-r.options="0">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>rawrawData_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">9</span>])</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#knitr::kable(head(rawrawData_ShareOfGovSpend,10),"simple")</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rawrawData_ShareOfGovSpend,<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Military expenditure by country as percentage of government spending, 1949-2021         © SIPRI 2021"],"name":[1],"type":["chr"],"align":["left"]},{"label":["...2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["...3"],"name":[3],"type":["chr"],"align":["left"]},{"label":["...4"],"name":[4],"type":["chr"],"align":["left"]},{"label":["...5"],"name":[5],"type":["chr"],"align":["left"]},{"label":["...6"],"name":[6],"type":["chr"],"align":["left"]},{"label":["...7"],"name":[7],"type":["chr"],"align":["left"]},{"label":["...8"],"name":[8],"type":["chr"],"align":["left"]},{"label":["...9"],"name":[9],"type":["chr"],"align":["left"]},{"label":["...10"],"name":[10],"type":["chr"],"align":["left"]},{"label":["...11"],"name":[11],"type":["chr"],"align":["left"]},{"label":["...12"],"name":[12],"type":["chr"],"align":["left"]},{"label":["...13"],"name":[13],"type":["chr"],"align":["left"]},{"label":["...14"],"name":[14],"type":["chr"],"align":["left"]},{"label":["...15"],"name":[15],"type":["chr"],"align":["left"]},{"label":["...16"],"name":[16],"type":["chr"],"align":["left"]},{"label":["...17"],"name":[17],"type":["chr"],"align":["left"]},{"label":["...18"],"name":[18],"type":["chr"],"align":["left"]},{"label":["...19"],"name":[19],"type":["chr"],"align":["left"]},{"label":["...20"],"name":[20],"type":["chr"],"align":["left"]},{"label":["...21"],"name":[21],"type":["chr"],"align":["left"]},{"label":["...22"],"name":[22],"type":["chr"],"align":["left"]},{"label":["...23"],"name":[23],"type":["chr"],"align":["left"]},{"label":["...24"],"name":[24],"type":["chr"],"align":["left"]},{"label":["...25"],"name":[25],"type":["chr"],"align":["left"]},{"label":["...26"],"name":[26],"type":["chr"],"align":["left"]},{"label":["...27"],"name":[27],"type":["chr"],"align":["left"]},{"label":["...28"],"name":[28],"type":["chr"],"align":["left"]},{"label":["...29"],"name":[29],"type":["chr"],"align":["left"]},{"label":["...30"],"name":[30],"type":["chr"],"align":["left"]},{"label":["...31"],"name":[31],"type":["chr"],"align":["left"]},{"label":["...32"],"name":[32],"type":["chr"],"align":["left"]},{"label":["...33"],"name":[33],"type":["chr"],"align":["left"]},{"label":["...34"],"name":[34],"type":["chr"],"align":["left"]},{"label":["...35"],"name":[35],"type":["chr"],"align":["left"]},{"label":["...36"],"name":[36],"type":["chr"],"align":["left"]},{"label":["...37"],"name":[37],"type":["chr"],"align":["left"]}],"data":[{"1":"Countries are grouped by region and subregion","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"Figures are for miltary expenditure expressed as a percentage of general government expenditure, and are for calendar years except where otherwise stated.","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"Data for general government expenditure are from the IMF World Economic Outlook, and include spending by all levels of govt.: central/federal, state/provincial/regional, municipal and local government, etc.","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"Figures in blue are SIPRI estimates. Figures in red indicate highly uncertain data.","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"\". .\" = data unavailable. \"xxx\" = country did not exist or was not independent during all or part of the year in question.","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"Country","2":"Notes","3":"Reporting year","4":"1988","5":"1989","6":"1990","7":"1991","8":"1992","9":"1993","10":"1994","11":"1995","12":"1996","13":"1997","14":"1998","15":"1999","16":"2000","17":"2001","18":"2002","19":"2003","20":"2004","21":"2005","22":"2006","23":"2007","24":"2008","25":"2009","26":"2010","27":"2011","28":"2012","29":"2013","30":"2014","31":"2015","32":"2016","33":"2017","34":"2018","35":"2019","36":"2020","37":"2021"},{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"},{"1":"North Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="input-and-cleaning" class="level1">
<h1>Input and Cleaning</h1>
<section id="reading-in-raw-information" class="level2">
<h2 class="anchored" data-anchor-id="reading-in-raw-information">Reading in raw information</h2>
<p>The data provided by the Stockholm International Peace Research Institute(SIPRI) was separated into multiple tabs in one excel .xlsx file.</p>
<p>In order to begin working I imported the tabs I planned to utilize, skipping over some of the notes and title rows at the start of each tab.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">6</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">7</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">9</span>],<span class="at">skip=</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">

</div>
<p>Next I delete the first row of NA as well as the Notes column for each tibble.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD[<span class="sc">-</span><span class="dv">1</span>,]  <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> rawData_ShareOfGDP[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> rawData_ShareOfGovSpend[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">:-</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">

</div>
</section>
<section id="tidying-data" class="level2">
<h2 class="anchored" data-anchor-id="tidying-data">Tidying Data</h2>
<p>Before pivoting my data I wanted to add a column for region. I chose to do this with an algorithm as an exercise in iteration however it would have been more practical to just hard code this column.</p>
<p>The list of countries where there are NA’s for every year:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Regions <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">1949</span><span class="st">`</span>))<span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>Regions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa"},{"1":"North Africa"},{"1":"sub-Saharan Africa"},{"1":"Americas"},{"1":"Central America and the Caribbean"},{"1":"North America"},{"1":"South America"},{"1":"Asia & Oceania"},{"1":"Oceania"},{"1":"South Asia"},{"1":"East Asia"},{"1":"South East Asia"},{"1":"Central Asia"},{"1":"Europe"},{"1":"Central Europe"},{"1":"Eastern Europe"},{"1":"Western Europe"},{"1":"Middle East"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>You will notice that some of these are continents and sub-continents, I wanted to break these into a <code>Region</code> field. The pattern I saw and chose to exploit was the fact that the overarching category would always be followed with a more specific category such as the <strong>Africa</strong> followed by <strong>North Africa</strong> values (see earlier print outs to see raw information).</p>
<p>I then added an empty vector into the tibble and populated it according to the Country column using the pattern described above.</p>
<p>Once I had left flags in the region column dictating where each region was starting I could use <code>fill(Region)</code> in order to populate the rest of the column.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">length</span>(rawData_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>)))<span class="do">## doing as numeric here as a hacky way to fill this with NA's, any better way?</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Region =</span>emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(mutated_CurrentUSD<span class="sc">$</span>Country) ){</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>   <span class="co">#if 2 nas in a row then do something</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i<span class="sc">+</span><span class="dv">1</span>]) ){</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>] <span class="co">#this works because when referencing an index outside of the vector R will return NA - Great to know.</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#if the row is a region</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) ){</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>     mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i]</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> mutated_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(Region)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mutated_CurrentUSD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1949"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1950"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1951"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1952"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1953"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1954"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1955"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1956"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1957"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1958"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1959"],"name":[13],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[14],"type":["chr"],"align":["left"]},{"label":["1961"],"name":[15],"type":["chr"],"align":["left"]},{"label":["1962"],"name":[16],"type":["chr"],"align":["left"]},{"label":["1963"],"name":[17],"type":["chr"],"align":["left"]},{"label":["1964"],"name":[18],"type":["chr"],"align":["left"]},{"label":["1965"],"name":[19],"type":["chr"],"align":["left"]},{"label":["1966"],"name":[20],"type":["chr"],"align":["left"]},{"label":["1967"],"name":[21],"type":["chr"],"align":["left"]},{"label":["1968"],"name":[22],"type":["chr"],"align":["left"]},{"label":["1969"],"name":[23],"type":["chr"],"align":["left"]},{"label":["1970"],"name":[24],"type":["chr"],"align":["left"]},{"label":["1971"],"name":[25],"type":["chr"],"align":["left"]},{"label":["1972"],"name":[26],"type":["chr"],"align":["left"]},{"label":["1973"],"name":[27],"type":["chr"],"align":["left"]},{"label":["1974"],"name":[28],"type":["chr"],"align":["left"]},{"label":["1975"],"name":[29],"type":["chr"],"align":["left"]},{"label":["1976"],"name":[30],"type":["chr"],"align":["left"]},{"label":["1977"],"name":[31],"type":["chr"],"align":["left"]},{"label":["1978"],"name":[32],"type":["chr"],"align":["left"]},{"label":["1979"],"name":[33],"type":["chr"],"align":["left"]},{"label":["1980"],"name":[34],"type":["chr"],"align":["left"]},{"label":["1981"],"name":[35],"type":["chr"],"align":["left"]},{"label":["1982"],"name":[36],"type":["chr"],"align":["left"]},{"label":["1983"],"name":[37],"type":["chr"],"align":["left"]},{"label":["1984"],"name":[38],"type":["chr"],"align":["left"]},{"label":["1985"],"name":[39],"type":["chr"],"align":["left"]},{"label":["1986"],"name":[40],"type":["chr"],"align":["left"]},{"label":["1987"],"name":[41],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[42],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[43],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[44],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[45],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[46],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[47],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[48],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[49],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[50],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[51],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[52],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[53],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[54],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[55],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[56],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[57],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[58],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[59],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[60],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[61],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[62],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[63],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[64],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[65],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[66],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[67],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[68],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[69],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[70],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[71],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[72],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[73],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[74],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[75],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA"},{"1":"North Africa","2":"Africa","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA"},{"1":"Algeria","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"xxx","16":"...","17":"66.436300146240882","18":"99.856999914929133","19":"105.52839139082775","20":"104.51564291298871","21":"99.249350828225715","22":"99.249350828225715","23":"99.249350828225715","24":"98.844251437090094","25":"99.946261073475782","26":"109.94284132833093","27":"136.75709779179812","28":"260.1686300304969","29":"332.25215918327041","30":"480.64037350317733","31":"471.66944795454771","32":"627.85244206863513","33":"711.68124735614174","34":"890.17446481387378","35":"806.56933460926223","36":"932.45270774946152","37":"952.43067156698964","38":"929.29082127154925","39":"953.2996539241816","40":"1127.1032171353716","41":"1196.9713840329584","42":"1028.6114252963346","43":"854.30094525113816","44":"904.2691551558413","45":"565.09806256732838","46":"1053.3016426926056","47":"1276.9110831255837","48":"1334.9116476746008","49":"1234.6551915858731","50":"1452.4310077462744","51":"1752.395277547208","52":"1910.9620524693985","53":"1826.4965699771233","54":"1881.1636491194504","55":"2091.6272744932976","56":"2100.6025207732246","57":"2206.3957620001293","58":"2802.2247941316059","59":"2924.8201669571195","60":"3093.9782453686748","61":"3945.8151254683057","62":"5172.3369070402641","63":"5280.5881559422633","64":"5671.3091173070197","65":"8652.2370400025229","66":"9326.2871440363178","67":"10161.588239148075","68":"9724.3799719232557","69":"10412.714002896393","70":"10217.081699569308","71":"10073.364021301344","72":"9583.7242883703002","73":"10303.60057521065","74":"9708.2774402272553","75":"9112.4611053489425"},{"1":"Libya","2":"North Africa","3":"xxx","4":"xxx","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"...","12":"...","13":"5.5719977712008912","14":"5.5719977712008912","15":"7.1679971328011476","16":"16.687993324802672","17":"18.67599252960299","18":"21.475991409603434","19":"29.119988352004658","20":"58.519976592009364","21":"79.519968192012726","22":"95.47996180801529","23":"143.0799427680229","24":"242.47990300803883","25":"243.03587164562788","26":"202.76822710041438","27":"298.30748001839839","28":"431.68237904955566","29":"287.78825269970378","30":"326.2951315820585","31":"479.64708783283959","32":"729.94180056814525","33":"853.56914855886316","34":"1074.1392530341056","35":"557.33452231364765","36":"709.33245060850584","37":"...","38":"...","39":"...","40":"...","41":"...","42":"...","43":"...","44":"...","45":"...","46":"...","47":"...","48":"...","49":"...","50":"...","51":"1251.9908172874545","52":"1443.6217582671406","53":"1153.4870884907862","54":"1085.5346648704581","55":"819.74799360067686","56":"452.51361475745267","57":"541.40176651662102","58":"685.07322007402468","59":"690.93076934835449","60":"614.35629620043096","61":"639.13704618893746","62":"1100.0686521298505","63":"...","64":"...","65":"...","66":"2987.4134077326698","67":"3964.690154136521","68":"3755.6524963509291","69":"...","70":"...","71":"...","72":"...","73":"...","74":"...","75":"..."},{"1":"Morocco","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"23.714285714285712","11":"35.401979723307051","12":"41.692277637215241","13":"41.880517347567228","14":"41.596762368861519","15":"48.275957466569444","16":"53.848540358739967","17":"74.893933196192478","18":"69.99322200024109","19":"63.175700376840979","20":"67.938085047100188","21":"70.348918780592399","22":"90.900288312001408","23":"84.972008639479583","24":"88.924195087827471","25":"111.28801020206102","26":"140.44699160366511","27":"185.78399384453559","28":"241.88916121443464","29":"413.32612788680541","30":"577.2394333051991","31":"731.45547203748322","32":"772.5593819524945","33":"896.35380200198506","34":"1117.9556221660548","35":"975.58146279218147","36":"959.48544085857259","37":"628.15342299319957","38":"512.4544012058285","39":"692.47204968944095","40":"728.54563268031859","41":"815.38610613656999","42":"917.26914479574634","43":"990.55509020201055","44":"1069.7204919962048","45":"1148.4457104134244","46":"1228.5265528756001","47":"1251.7865381327088","48":"1365.2500187444784","49":"1437.8987007390892","50":"1447.1286892430828","51":"1400.9495009504456","52":"1444.9597164638781","53":"1007.8107629008141","54":"1043.4234302062941","55":"1470.3176147925328","56":"1474.8743262617281","57":"1819.2300702499797","58":"1937.523821552049","59":"2031.1313805624586","60":"2134.5948760627498","61":"2408.3502495627008","62":"2944.9584727359997","63":"3055.0694418587332","64":"3160.804832033607","65":"3342.6989556074454","66":"3402.700835840546","67":"4065.5523169353401","68":"4048.6125243501792","69":"3268.3633756657109","70":"3327.0318896485569","71":"3461.461531383587","72":"3696.8569447441005","73":"3721.3238374528701","74":"4830.9563935116921","75":"5378.3665352074695"},{"1":"Tunisia","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"3.7142857142857144","11":"6.4111498257839719","12":"9.5238095238095237","13":"14.285714285714285","14":"15.952380952380953","15":"18.571428571428569","16":"14.285714285714285","17":"15.238095238095239","18":"17.478991596638657","19":"12.761904761904761","20":"13.714285714285715","21":"15.428571428571427","22":"17.523809523809522","23":"16.952380952380953","24":"22.476190476190474","25":"24.860541921566902","26":"31.65067713584429","27":"38.188218104536098","28":"46.505447781025772","29":"75.323106295072677","30":"83.960118943501826","31":"121.69250495395734","32":"148.4966516167633","33":"160.90064999926196","34":"194.09611955925857","35":"228.83573239584933","36":"328.60042628329393","37":"383.48947429677634","38":"249.4744687725676","39":"215.9387222946545","40":"206.79345464712247","41":"194.4097834822883","42":"232.92034077714723","43":"234.06202959799688","44":"247.85588153923399","45":"260.43103066012992","46":"289.67711516870128","47":"276.16713491541628","48":"297.06885472789287","49":"342.90245836637592","50":"397.46950918833619","51":"358.1665777504499","52":"365.84937473654634","53":"357.01339537863652","54":"332.38976274549862","55":"335.6479068054021","56":"345.42423666940982","57":"407.38556105738633","58":"444.65141673424489","59":"468.46457997733978","60":"497.21266397199133","61":"490.65055878129488","62":"578.9114873309851","63":"564.77593370214845","64":"571.18904568953462","65":"715.23959709613712","66":"681.22595061111861","67":"759.35888124284475","68":"908.35728759247911","69":"979.49404192952272","70":"987.73470521580032","71":"858.9495812565691","72":"844.22736712851361","73":"1000.922131147541","74":"1157.3723670117815","75":"1250.4543802253725"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Now that I had my proof of concept for cleaning one of the sheets, in a format I wanted, it was time to clean the other sheets as well. I could have taken the above code and modified it to work for each of the other tabs individually however I took the opportunity to practice with functions and created the below function to clean any of the tabs once they were loaded in and lightly pre-processed.</p>
</section>
<section id="clean-and-format-function" class="level2">
<h2 class="anchored" data-anchor-id="clean-and-format-function">Clean and format function</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a function to clean the other sheets</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">##Input: a partially cleaned tibble, must have been read in and had excess rows trimmed</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="do">##output: tibble with regions correctly labeled and umbrella region categories i.e Africa above south Africa removed</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="do">##Note: All sub categories contained the main category name in them, will use regex to create groupings in the future.</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>CleanData <span class="ot">&lt;-</span> <span class="cf">function</span>(inSheet){</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">nrow</span>(<span class="fu">select</span>(inSheet,<span class="dv">2</span>))))</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> inSheet <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Region =</span> emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(output<span class="sc">$</span>Country)){</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(output[[(i<span class="sc">+</span><span class="dv">1</span>),<span class="dv">3</span>]]))</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>      output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>]</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]))</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>       output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i]</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fill</span>(Region)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># removing header rows</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(output[[<span class="dv">3</span>]]))</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Below I call the function on each of the tibbles loaded in earlier. For the sake of space I will only show one tab being cleaned.</p>
<p>Before:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[13],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[14],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[15],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[16],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[17],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[18],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[19],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[20],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[21],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[22],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[23],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[24],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[25],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[26],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[27],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[28],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[29],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[30],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[31],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[32],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[33],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[34],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[35],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA"},{"1":"North Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA"},{"1":"Algeria","2":"...","3":"...","4":"5.6826154062017679E-2","5":"4.3562992947460667E-2","6":"7.450020082662831E-2","7":"7.6341156103707189E-2","8":"0.10132172896437502","9":"9.9895600804637705E-2","10":"0.10974056353150458","11":"0.11964798697580206","12":"0.12817517548036572","13":"0.11756226312939903","14":"0.12017091608509135","15":"0.12225706041052876","16":"0.10794210928864487","17":"0.10096289718178453","18":"0.1067413621853408","19":"0.10455123752136684","20":"9.1628910393499588E-2","21":"8.7955261729754125E-2","22":"7.9704112405217672E-2","23":"9.0341692386891853E-2","24":"9.4441832663971326E-2","25":"0.10781046571758186","26":"0.10245186679329056","27":"0.13387972472710172","28":"0.13664344834713668","29":"0.13687051931270997","30":"0.1532439766308818","31":"0.15355675078920666","32":"0.14463099790871009","33":"0.15888711845293033","34":"0.17392426654392509","35":"0.15239467793181341"},{"1":"Libya","2":"...","3":"...","4":"...","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"0.11687259469313348","12":"0.14213518635502212","13":"0.11525204653166739","14":"0.10267774699907664","15":"6.296813507680589E-2","16":"5.2401348765150825E-2","17":"4.8359240069084632E-2","18":"4.8999725952315706E-2","19":"5.0238968545070581E-2","20":"3.5877828657804652E-2","21":"2.8092038848470082E-2","22":"3.0918362659071073E-2","23":"...","24":"...","25":"...","26":"8.1976162512505973E-2","27":"7.4022141304986189E-2","28":"0.10906787784726342","29":"...","30":"...","31":"...","32":"...","33":"...","34":"...","35":"..."},{"1":"Morocco","2":"...","3":"...","4":"0.14500213794691316","5":"0.1580369843527738","6":"0.15112961788945883","7":"0.15810920945395274","8":"0.16298256537982569","9":"0.16003961892846438","10":"0.17613953748184558","11":"0.1778011642932314","12":"0.17034282137202195","13":"0.1213568980975424","14":"0.10904244856209921","15":"0.14526589979371352","16":"0.1249913488822756","17":"0.13397430966848703","18":"0.12266548632132046","19":"0.10512856442233588","20":"0.11060904195779477","21":"0.10652542464392539","22":"0.10411118865488914","23":"0.10812033575943389","24":"0.10913528591352858","25":"9.7564319499514746E-2","26":"9.8328482774095671E-2","27":"0.11556215358914615","28":"0.11078307233092348","29":"0.10417621519276599","30":"0.10444783017841253","31":"0.10592541288624464","32":"0.10489648333575195","33":"0.10473610517472623","34":"0.11699027145050786","35":"0.13196374222575097"},{"1":"Tunisia","2":"...","3":"...","4":"...","5":"6.3268523384130318E-2","6":"6.329051383399209E-2","7":"6.1916461916461912E-2","8":"6.4017895185342996E-2","9":"6.2582014666152055E-2","10":"6.674141797481456E-2","11":"6.7090108401084009E-2","12":"6.6168996188055898E-2","13":"6.1788736504231105E-2","14":"6.1376801832143335E-2","15":"6.0453179769654475E-2","16":"5.8983905837136676E-2","17":"6.026406429391503E-2","18":"5.9053103007037741E-2","19":"6.0065223836347471E-2","20":"6.0339168490153174E-2","21":"5.1545461998852175E-2","22":"5.1974642961235794E-2","23":"5.0290160907412292E-2","24":"5.1508851508851511E-2","25":"5.3294871116286453E-2","26":"5.079001384314287E-2","27":"5.0644499178981936E-2","28":"6.5263024249862453E-2","29":"7.7959912359003486E-2","30":"8.1760055531988743E-2","31":"7.0733372009691833E-2","32":"6.8901573588398657E-2","33":"8.0702189178025616E-2","34":"7.8554812445478336E-2","35":"7.8592643363034037E-2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_CurrentUSD)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGovSpend)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGDP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>After:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1949"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1950"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1951"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1952"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1953"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1954"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1955"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1956"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1957"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1958"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1959"],"name":[13],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[14],"type":["chr"],"align":["left"]},{"label":["1961"],"name":[15],"type":["chr"],"align":["left"]},{"label":["1962"],"name":[16],"type":["chr"],"align":["left"]},{"label":["1963"],"name":[17],"type":["chr"],"align":["left"]},{"label":["1964"],"name":[18],"type":["chr"],"align":["left"]},{"label":["1965"],"name":[19],"type":["chr"],"align":["left"]},{"label":["1966"],"name":[20],"type":["chr"],"align":["left"]},{"label":["1967"],"name":[21],"type":["chr"],"align":["left"]},{"label":["1968"],"name":[22],"type":["chr"],"align":["left"]},{"label":["1969"],"name":[23],"type":["chr"],"align":["left"]},{"label":["1970"],"name":[24],"type":["chr"],"align":["left"]},{"label":["1971"],"name":[25],"type":["chr"],"align":["left"]},{"label":["1972"],"name":[26],"type":["chr"],"align":["left"]},{"label":["1973"],"name":[27],"type":["chr"],"align":["left"]},{"label":["1974"],"name":[28],"type":["chr"],"align":["left"]},{"label":["1975"],"name":[29],"type":["chr"],"align":["left"]},{"label":["1976"],"name":[30],"type":["chr"],"align":["left"]},{"label":["1977"],"name":[31],"type":["chr"],"align":["left"]},{"label":["1978"],"name":[32],"type":["chr"],"align":["left"]},{"label":["1979"],"name":[33],"type":["chr"],"align":["left"]},{"label":["1980"],"name":[34],"type":["chr"],"align":["left"]},{"label":["1981"],"name":[35],"type":["chr"],"align":["left"]},{"label":["1982"],"name":[36],"type":["chr"],"align":["left"]},{"label":["1983"],"name":[37],"type":["chr"],"align":["left"]},{"label":["1984"],"name":[38],"type":["chr"],"align":["left"]},{"label":["1985"],"name":[39],"type":["chr"],"align":["left"]},{"label":["1986"],"name":[40],"type":["chr"],"align":["left"]},{"label":["1987"],"name":[41],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[42],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[43],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[44],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[45],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[46],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[47],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[48],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[49],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[50],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[51],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[52],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[53],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[54],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[55],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[56],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[57],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[58],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[59],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[60],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[61],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[62],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[63],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[64],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[65],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[66],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[67],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[68],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[69],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[70],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[71],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[72],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[73],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[74],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[75],"type":["chr"],"align":["left"]}],"data":[{"1":"Algeria","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"xxx","16":"...","17":"2.5114854517611026E-2","18":"3.4964539007092198E-2","19":"3.4186351706036747E-2","20":"3.5125936010891763E-2","21":"3.0191004313000615E-2","22":"2.6147278548559232E-2","23":"2.3868673583710847E-2","24":"2.1305391835843703E-2","25":"2.0875850340136056E-2","26":"1.7958439664600801E-2","27":"1.6881619937694704E-2","28":"1.9576681485214451E-2","29":"2.1310942930457662E-2","30":"2.701721228484644E-2","31":"2.2419504590731422E-2","32":"2.3752289377289376E-2","33":"2.1386958657963077E-2","34":"2.102063295734953E-2","35":"1.818048874752571E-2","36":"2.0630974406413816E-2","37":"1.9512132516513226E-2","38":"1.7551240070341399E-2","39":"1.6437068968473613E-2","40":"1.7872136664519762E-2","41":"1.8563762767583609E-2","42":"1.7496987492702398E-2","43":"1.5401237785633725E-2","44":"1.4610705859434187E-2","45":"1.2108340592460793E-2","46":"2.1401321298967154E-2","47":"2.5056315771778234E-2","48":"3.1464300121016538E-2","49":"2.9350271073671191E-2","50":"3.0940883958553014E-2","51":"3.6374034681332434E-2","52":"3.9656737879307118E-2","53":"3.755079982706442E-2","54":"3.4333856350536318E-2","55":"3.8206954633307394E-2","56":"3.7008293589990207E-2","57":"3.251210893471837E-2","58":"3.2838845233139048E-2","59":"2.8341783501146526E-2","60":"2.6438075477202047E-2","61":"2.9233210269766888E-2","62":"3.0247471409038638E-2","63":"3.8485136982934438E-2","64":"3.5180126088261786E-2","65":"4.3257063586106898E-2","66":"4.4610786200769914E-2","67":"4.8445089170405874E-2","68":"5.5484833358485315E-2","69":"6.2702428562350768E-2","70":"6.3849289830186534E-2","71":"5.9243833268853449E-2","72":"5.4678243562887134E-2","73":"6.0210459935367645E-2","74":"6.6599937269506193E-2","75":"5.5925840707654932E-2"},{"1":"Libya","2":"North Africa","3":"xxx","4":"xxx","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"...","12":"...","13":"...","14":"1.592E-2","15":"1.8550724637681159E-2","16":"3.1041666666666665E-2","17":"2.4079422382671481E-2","18":"1.8437499999999999E-2","19":"1.8571428571428572E-2","20":"2.9149232914923291E-2","21":"3.3609467455621302E-2","22":"2.8559463986599663E-2","23":"3.7628865979381441E-2","24":"6.0729312762973352E-2","25":"5.3226797787338659E-2","26":"3.7096774193548385E-2","27":"3.9848619768477291E-2","28":"3.291269636878702E-2","29":"2.253968253968254E-2","30":"1.9686162624821684E-2","31":"2.4639944473364567E-2","32":"3.799226441631505E-2","33":"3.2207494264593427E-2","34":"2.9223643581826202E-2","35":"1.7551137632830199E-2","36":"2.2405257767156028E-2","37":"...","38":"...","39":"...","40":"...","41":"...","42":"...","43":"...","44":"...","45":"...","46":"...","47":"...","48":"...","49":"...","50":"...","51":"4.0780267156689518E-2","52":"5.2974415319416102E-2","53":"3.7838602447132046E-2","54":"3.1468636735809602E-2","55":"2.4135078584983698E-2","56":"2.0692385202245575E-2","57":"2.0720480715152593E-2","58":"2.0710744567483667E-2","59":"1.5281111599445552E-2","60":"1.1203354064860062E-2","61":"9.4667751725464652E-3","62":"1.4898510813042507E-2","63":"...","64":"...","65":"...","66":"3.7456038271920247E-2","67":"7.6393308482589323E-2","68":"0.15479576301383174","69":"...","70":"...","71":"...","72":"...","73":"...","74":"...","75":"..."},{"1":"Morocco","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"1.1806543385490753E-2","11":"1.7590027700831026E-2","12":"2.1419828641370868E-2","13":"2.4697336561743343E-2","14":"2.3157315731573157E-2","15":"2.7024336283185842E-2","16":"2.5659133709981168E-2","17":"3.1956155143338952E-2","18":"2.8358686949559647E-2","19":"2.4293313069908815E-2","20":"2.6775700934579438E-2","21":"2.6176470588235294E-2","22":"3.0045721750489876E-2","23":"2.3902167871039465E-2","24":"2.3160061760164694E-2","25":"2.6286248830682882E-2","26":"2.8439153439153438E-2","27":"3.0617977528089889E-2","28":"3.1458333333333331E-2","29":"4.6029128881560868E-2","30":"6.2204340404779325E-2","31":"6.6197749196141478E-2","32":"5.8368087035358111E-2","33":"5.6334622823984527E-2","34":"5.9400728843298688E-2","35":"6.3845939722144904E-2","36":"6.2208682734641592E-2","37":"4.5056585503621072E-2","38":"4.0181908796411661E-2","39":"5.3904352265870384E-2","40":"4.3044595576783307E-2","41":"4.3693147945152791E-2","42":"4.1285158177531665E-2","43":"4.3929174133616161E-2","44":"4.1488250407024349E-2","45":"4.1428429374036693E-2","46":"4.2980482787728293E-2","47":"4.6555716874047588E-2","48":"4.4938193888062264E-2","49":"4.3474104939692074E-2","50":"3.9490929265743616E-2","51":"4.1926594063430515E-2","52":"3.4563343607372982E-2","53":"2.4207632362230638E-2","54":"2.6851723067910602E-2","55":"3.7261358827697072E-2","56":"3.4917879924795586E-2","57":"3.4942075415127068E-2","58":"3.24946757487646E-2","59":"3.2579967820796758E-2","60":"3.1097963340993549E-2","61":"3.0469536640660232E-2","62":"3.183501427557224E-2","63":"3.2886518464681228E-2","64":"3.3907961010624196E-2","65":"3.2974952352035236E-2","66":"3.4627500793153757E-2","67":"3.805782901206451E-2","68":"3.6778563524448443E-2","69":"3.2301533478414898E-2","70":"3.2195264409866621E-2","71":"3.1830412387131725E-2","72":"3.1185875547766636E-2","73":"3.0999359701871697E-2","74":"4.2810288813703377E-2","75":"4.1835129927529455E-2"},{"1":"Tunisia","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"...","11":"...","12":"...","13":"...","14":"2.0047875523638539E-2","15":"2.215909090909091E-2","16":"1.7296050735082155E-2","17":"1.5080113100848256E-2","18":"1.7441860465116279E-2","19":"1.2877186238708439E-2","20":"1.3174748398902104E-2","21":"1.4210526315789474E-2","22":"1.4426846479535831E-2","23":"1.3142350856467809E-2","24":"1.5616728427739545E-2","25":"1.4752610077167499E-2","26":"1.4145199063231851E-2","27":"1.3984191783201599E-2","28":"1.3115389585217728E-2","29":"1.7399793269782932E-2","30":"1.8623900672529746E-2","31":"2.3814955061818514E-2","32":"2.4880228672651879E-2","33":"2.238193018480493E-2","34":"2.0287193436513376E-2","35":"2.4810777927009635E-2","36":"3.691903568811724E-2","37":"4.1672583490452685E-2","38":"2.7553414597423713E-2","39":"2.3355734273438362E-2","40":"2.0866761028820277E-2","41":"1.8231845930829667E-2","42":"2.1034758517182176E-2","43":"2.1145503906303528E-2","44":"1.8394565888667502E-2","45":"1.8337085277650732E-2","46":"1.7061258775943253E-2","47":"1.7321139551022567E-2","48":"1.7421232116496505E-2","49":"1.7447075858250335E-2","50":"1.8675352290320298E-2","51":"1.726384544322317E-2","52":"1.6779715154667404E-2","53":"1.5560757573087424E-2","54":"1.5479040325129019E-2","55":"1.5211124733645772E-2","56":"1.4926429262433922E-2","57":"1.4838857036399511E-2","58":"1.4259020629651297E-2","59":"1.4516014162102771E-2","60":"1.4463624243598759E-2","61":"1.2609938563665496E-2","62":"1.2906249257454167E-2","63":"1.2949496088006997E-2","64":"1.2966500421308178E-2","65":"1.5612733232168574E-2","66":"1.5123424535955228E-2","67":"1.6416160261596952E-2","68":"1.9081606517325794E-2","69":"2.2698651595662991E-2","70":"2.3608197371175577E-2","71":"2.1443021070998568E-2","72":"2.1133848612123463E-2","73":"2.5645593317689494E-2","74":"2.907744469754911E-2","75":"2.8289774858020342E-2"},{"1":"Angola","2":"sub-Saharan Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"xxx","16":"xxx","17":"xxx","18":"xxx","19":"xxx","20":"xxx","21":"xxx","22":"xxx","23":"xxx","24":"xxx","25":"xxx","26":"xxx","27":"xxx","28":"xxx","29":"...","30":"...","31":"...","32":"...","33":"...","34":"...","35":"...","36":"...","37":"...","38":"...","39":"1.7149999999999999E-7","40":"1.73E-7","41":"0.2225","42":"0.21980499999999994","43":"0.19432333333333335","44":"0.17463666666666666","45":"7.1025000000000005E-2","46":"5.6828305425813817E-2","47":"0.17522589075574097","48":"5.7092806908360397E-2","49":"4.7073927682623334E-2","50":"2.4478481567170522E-2","51":"5.9722682071949675E-2","52":"2.6420118810629757E-2","53":"0.17334692213615979","54":"6.3926031542740444E-2","55":"4.5243538152146129E-2","56":"2.8699324451257544E-2","57":"3.7614790735473386E-2","58":"3.471180186727791E-2","59":"3.6922409469853076E-2","60":"3.7614953054353195E-2","61":"3.1140544929574229E-2","62":"3.573120364491604E-2","63":"4.7096100483205054E-2","64":"4.1775845655398387E-2","65":"3.2556603512937633E-2","66":"3.236659499216598E-2","67":"4.4552394215510917E-2","68":"4.6984545156441432E-2","69":"3.1054262930828039E-2","70":"2.7333406553071923E-2","71":"2.5079854558752172E-2","72":"1.8717758661964221E-2","73":"1.6437402833203805E-2","74":"1.4441630818426953E-2","75":"1.1320598213115518E-2"},{"1":"Benin","2":"sub-Saharan Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"8.7158469945355192E-3","15":"1.3952879581151833E-2","16":"1.7516339869281045E-2","17":"1.7368421052631578E-2","18":"2.1816990098082821E-2","19":"2.106508875739645E-2","20":"1.9002325967768734E-2","21":"1.9762521056740211E-2","22":"2.0721247563352828E-2","23":"1.8947368421052633E-2","24":"1.6252815194158741E-2","25":"1.6010420341374725E-2","26":"1.4877943088256537E-2","27":"1.6775280898876404E-2","28":"1.4423791821561338E-2","29":"1.4929078014184397E-2","30":"1.2816479400749063E-2","31":"1.6787878787878789E-2","32":"1.1943069306930693E-2","33":"1.9304600344134469E-2","34":"2.031651419102409E-2","35":"1.5513713192303604E-2","36":"1.0492986496015506E-2","37":"1.1889706765480491E-2","38":"1.4586989402379652E-2","39":"1.3049319324108801E-2","40":"1.3550965400694807E-2","41":"1.5695985002417128E-2","42":"1.5640912047020762E-2","43":"1.3078960611848916E-2","44":"1.2251571212605684E-2","45":"...","46":"...","47":"...","48":"...","49":"...","50":"...","51":"...","52":"...","53":"4.85389230497635E-3","54":"4.1285230240838324E-3","55":"3.5797112730621473E-3","56":"6.2281945820977591E-3","57":"6.4722322680875674E-3","58":"6.7614985043211329E-3","59":"6.8097068499347914E-3","60":"6.6572332394775058E-3","61":"...","62":"6.6395897962646718E-3","63":"...","64":"...","65":"...","66":"7.0205615778774454E-3","67":"6.8723968349625368E-3","68":"7.0092494879796796E-3","69":"7.9848470490941834E-3","70":"6.7359672701681455E-3","71":"9.2061312442598079E-3","72":"6.3285754014759986E-3","73":"4.7293484122412788E-3","74":"4.706349168413902E-3","75":"5.6062137436351757E-3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="pivoting-and-restructuring" class="level2">
<h2 class="anchored" data-anchor-id="pivoting-and-restructuring">Pivoting and Restructuring</h2>
<section id="pivot-and-notation-changes" class="level3">
<h3 class="anchored" data-anchor-id="pivot-and-notation-changes">Pivot and Notation Changes</h3>
<p>Next I pivot the years, it should be noted that both the pivoting and Converting of notation could be handled by the clean function above, i kept the steps separate so that I could show the progression of the dataframe.</p>
<p>I must also handle the xxx and … notations. From the information page of my data set I can see that the notation is described as follows:</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Raw Notation</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>…</td>
<td>Data unavailable</td>
</tr>
<tr class="even">
<td>xxx</td>
<td>Country did not exist or was not independent during all or part of the year in question</td>
</tr>
</tbody>
</table>
<p>For now I think I will just keep both as NA but will save this form of the information for future use.</p>
<p>After pivot and notation changes:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> Cleaned_currentUSD <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_currentUSD),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> Cleaned_ShareOfGovSpend <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGovSpend),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> Cleaned_ShareOfGDP <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGDP),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_currentUSD)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGovSpend)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>df3<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">#df1</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">#df2</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co"># share of GDP</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">#df3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="converting-column-types" class="level3">
<h3 class="anchored" data-anchor-id="converting-column-types">Converting Column Types</h3>
<p>Finally I will convert the column types to their correct representation.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Year to Number</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_currentUSD<span class="sc">$</span>Year)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>Year)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGDP<span class="sc">$</span>Year)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># value to double</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_currentUSD<span class="sc">$</span>value)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>value)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGDP<span class="sc">$</span>value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">

</div>
</section>
<section id="joining-of-the-different-tabs" class="level3">
<h3 class="anchored" data-anchor-id="joining-of-the-different-tabs">Joining of the Different Tabs</h3>
<p>Here we do a full join to maintain data from all the different tabs. The years when share of Gov spend are unavailable will then show NA as intended.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>MilitarySpend<span class="ot">&lt;-</span> <span class="fu">full_join</span>(Cleaned_currentUSD,Cleaned_ShareOfGovSpend,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>MilitarySpend <span class="ot">&lt;-</span> <span class="fu">full_join</span>(MilitarySpend,Cleaned_ShareOfGDP,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(MilitarySpend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["int"],"align":["right"]},{"label":["MilitarySpend_currentUSD"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["MilitarySpend_ShareofGovSpend"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MilitarySpend_ShareofGDP"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Algeria","2":"North Africa","3":"1949","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1951","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1952","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1953","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1954","4":"NA","5":"NA","6":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="descriptive-stats" class="level1">
<h1>Descriptive stats</h1>
<section id="pivoting" class="level2">
<h2 class="anchored" data-anchor-id="pivoting">Pivoting</h2>
<p>Mean, Median and Standard Deviation for each of the tabs.</p>
<p>First I wanted to get an idea of what my data looks like for each of the countries individually. In order to see this I grouped on country name and the types of data we have.</p>
<p>In order to get that done I need to pivot my data again.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>combinedData <span class="ot">&lt;-</span>MilitarySpend <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(MilitarySpend_currentUSD,MilitarySpend_ShareofGovSpend,MilitarySpend_ShareofGDP),<span class="at">names_to =</span> <span class="st">"viewOfSpend"</span>,<span class="at">values_to =</span> <span class="st">"Spend"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combinedData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["int"],"align":["right"]},{"label":["viewOfSpend"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Spend"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Algeria","2":"North Africa","3":"1949","4":"MilitarySpend_currentUSD","5":"NA"},{"1":"Algeria","2":"North Africa","3":"1949","4":"MilitarySpend_ShareofGovSpend","5":"NA"},{"1":"Algeria","2":"North Africa","3":"1949","4":"MilitarySpend_ShareofGDP","5":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"MilitarySpend_currentUSD","5":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"MilitarySpend_ShareofGovSpend","5":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"MilitarySpend_ShareofGDP","5":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>combinedData<span class="ot">&lt;-</span><span class="fu">na.omit</span>(combinedData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Total number of countries analyzed:</p>
<div class="cell">

</div>
<p>List of Countries:</p>
<div class="cell">

</div>
<p>Number of countries by region:</p>
<div class="cell">

</div>
</section>
<section id="statistics-by-region" class="level2">
<h2 class="anchored" data-anchor-id="statistics-by-region">Statistics by region</h2>
<p>Now that I have all of my data in a malleable state I will do some initial statistics on each tab of the initial dataset to give asome insight to what patterns or outliers may exist.</p>
<section id="militaryspend_currentusd" class="level3">
<h3 class="anchored" data-anchor-id="militaryspend_currentusd">MilitarySpend_currentUSD</h3>
<p>I will be using the current USD data for my analysis of major world events so I will not dive deeper at this point.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_USD<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">min</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>byRegionStats_USD</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Region"],"name":[1],"type":["chr"],"align":["left"]},{"label":["viewOfSpend"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["std"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"North America","2":"MilitarySpend_currentUSD","3":"149263","4":"223389","5":"426.31","6":"800672"},{"1":"East Asia","2":"MilitarySpend_currentUSD","3":"20445","4":"42050","5":"0.00","6":"293352"},{"1":"Eastern Europe","2":"MilitarySpend_currentUSD","3":"10884","4":"35155","5":"0.00","6":"246011"},{"1":"Western Europe","2":"MilitarySpend_currentUSD","3":"7136","4":"12799","5":"0.00","6":"73448"},{"1":"Middle East","2":"MilitarySpend_currentUSD","3":"4914","4":"9592","5":"0.00","6":"87186"},{"1":"South Asia","2":"MilitarySpend_currentUSD","3":"4457","4":"11668","5":"2.48","6":"76598"},{"1":"Oceania","2":"MilitarySpend_currentUSD","3":"2832","4":"6289","5":"0.00","6":"31754"},{"1":"South America","2":"MilitarySpend_currentUSD","3":"2023","4":"4567","5":"0.00","6":"36936"},{"1":"South East Asia","2":"MilitarySpend_currentUSD","3":"1943","4":"3158","5":"0.00","6":"32954"},{"1":"North Africa","2":"MilitarySpend_currentUSD","3":"1363","4":"2207","5":"3.71","6":"10413"},{"1":"Central Europe","2":"MilitarySpend_currentUSD","3":"1142","4":"2200","5":"0.00","6":"17380"},{"1":"Central Asia","2":"MilitarySpend_currentUSD","3":"336","4":"592","5":"0.00","6":"2551"},{"1":"Central America and the Caribbean","2":"MilitarySpend_currentUSD","3":"286","4":"954","5":"0.00","6":"8681"},{"1":"sub-Saharan Africa","2":"MilitarySpend_currentUSD","3":"258","4":"635","5":"0.00","6":"6846"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="militaryspend_shareofgdp" class="level3">
<h3 class="anchored" data-anchor-id="militaryspend_shareofgdp">MilitarySpend_ShareOfGDP</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">min</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGDP"</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Region"],"name":[1],"type":["chr"],"align":["left"]},{"label":["viewOfSpend"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["std"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Middle East","2":"MilitarySpend_ShareofGDP","3":"0.0774","4":"0.06724","5":"0.011218466","6":"1.1735"},{"1":"North America","2":"MilitarySpend_ShareofGDP","3":"0.0422","4":"0.02846","5":"0.009899253","6":"0.1386"},{"1":"North Africa","2":"MilitarySpend_ShareofGDP","3":"0.0297","4":"0.01577","5":"0.009466775","6":"0.1548"},{"1":"South East Asia","2":"MilitarySpend_ShareofGDP","3":"0.0273","4":"0.01593","5":"0.001898952","6":"0.0868"},{"1":"East Asia","2":"MilitarySpend_ShareofGDP","3":"0.0261","4":"0.01897","5":"0.006296982","6":"0.0833"},{"1":"South Asia","2":"MilitarySpend_ShareofGDP","3":"0.0258","4":"0.01695","5":"0.002454847","6":"0.0699"},{"1":"Eastern Europe","2":"MilitarySpend_ShareofGDP","3":"0.0253","4":"0.01514","5":"0.002628792","6":"0.0916"},{"1":"South America","2":"MilitarySpend_ShareofGDP","3":"0.0237","4":"0.01265","5":"0.001508539","6":"0.0888"},{"1":"Western Europe","2":"MilitarySpend_ShareofGDP","3":"0.0232","4":"0.01460","5":"0.002647912","6":"0.1096"},{"1":"sub-Saharan Africa","2":"MilitarySpend_ShareofGDP","3":"0.0223","4":"0.02610","5":"0.000000171","6":"0.3438"},{"1":"Central Europe","2":"MilitarySpend_ShareofGDP","3":"0.0200","4":"0.01318","5":"0.000163028","6":"0.1115"},{"1":"Oceania","2":"MilitarySpend_ShareofGDP","3":"0.0175","4":"0.00862","5":"0.001876955","6":"0.0518"},{"1":"Central Asia","2":"MilitarySpend_ShareofGDP","3":"0.0130","4":"0.00599","5":"0.000003657","6":"0.0396"},{"1":"Central America and the Caribbean","2":"MilitarySpend_ShareofGDP","3":"0.0118","4":"0.00923","5":"0.000615198","6":"0.0659"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>After sorting by mean share of GDP spend I see that the middle east has the highest by quite a large margin. This is odd because usally the US(North America), has the highest military spending. A max of 1.17 for GDP is also stageringly high when compared to the other regions. This prompts further investigation. A violin plot below gives a visualization of this distribution.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGDP"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="sc">$</span>Region<span class="ot">&lt;-</span><span class="fu">as.factor</span>(byRegionStats_GDP<span class="sc">$</span>Region)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>violin_gdp<span class="ot">&lt;-</span> <span class="fu">na.omit</span>(byRegionStats_GDP)<span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Region,<span class="at">y=</span>Spend))<span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()<span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>violin_gdp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing NAs here because I cant plot them, I dont want to replace them with other values because it is still of interest when countries do not display their data.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Upon investigation of the underlying data I see that Kuwait in 1991 is the culprit of the high military spending as percent of GDP number.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region<span class="sc">==</span><span class="st">"Middle East"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Spend))<span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["fct"],"align":["left"]},{"label":["Year"],"name":[3],"type":["int"],"align":["right"]},{"label":["viewOfSpend"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Spend"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Kuwait","2":"Middle East","3":"1991","4":"MilitarySpend_ShareofGDP","5":"1.173"},{"1":"Kuwait","2":"Middle East","3":"1990","4":"MilitarySpend_ShareofGDP","5":"0.485"},{"1":"Kuwait","2":"Middle East","3":"1992","4":"MilitarySpend_ShareofGDP","5":"0.318"},{"1":"Israel","2":"Middle East","3":"1975","4":"MilitarySpend_ShareofGDP","5":"0.305"},{"1":"Israel","2":"Middle East","3":"1976","4":"MilitarySpend_ShareofGDP","5":"0.292"},{"1":"Israel","2":"Middle East","3":"1973","4":"MilitarySpend_ShareofGDP","5":"0.279"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>I initially thought this was a typo since there were two 1s in a row and it was such an insanely high spend. A share of GDP of 1.173 means Kuwait spent 117.3% of their GDP in that year. Upon further investigation, this is actually true and it was driven by the Persian Gulf War(aka Gulf War). The Gulf War was a conflict triggered by Iraqs invasion of Kuwait in 1990. This invasion was the first major international crisis since the Cold War and will certainly be a topic I add to the final analysis.</p>
<p>https://www.britannica.com/event/Persian-Gulf-War</p>
<p>Loosely I will plot Iraq, US and Kuwait spend from 1985-1995 to explore this time period.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">&gt;=</span> <span class="dv">1985</span> <span class="sc">&amp;</span> Year<span class="sc">&lt;=</span> <span class="dv">1995</span>)<span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"United States of America"</span>,<span class="st">"Iraq"</span>,<span class="st">"Kuwait"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">y =</span> Spend, <span class="at">x =</span> Year))<span class="sc">+</span>  </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country),<span class="at">na.rm =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">viewOfSpend</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A new discovery! Iraq chose not to report their spending during the Gulf war. This is most likely due to the fact that SIPRI data collection is funded by the Swedish government who have pretty close ties to the United States. Sweden was one of the first countries to recognize US independence in 1783. Below I highlight reported Iraqi military spending overlaid with markings for the start and end of their reported data. We can see that in the time leading up to the gulf war military spending rose sharpley and even after the war they continued to spend above historical levels.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>startOfNoData<span class="ot">&lt;-</span> <span class="dv">1982</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>endofNoData<span class="ot">&lt;-</span> <span class="dv">2003</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>iraqMissingDataPLOT<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Iraq"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>( <span class="at">x =</span> Spend,<span class="at">y =</span> Year))<span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">viewOfSpend</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_x"</span>)<span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">seq</span>(<span class="dv">1949</span>,<span class="dv">2020</span>,<span class="dv">5</span>),<span class="at">breaks =</span><span class="fu">seq</span>(<span class="dv">1949</span>,<span class="dv">2020</span>,<span class="dv">5</span>))</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>iraqMissingDataPLOT<span class="sc">+</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1982</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">2003</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1985</span>,<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1995</span>,<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">1982</span>,<span class="at">label=</span><span class="st">"1982"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">2003</span>,<span class="at">label=</span><span class="st">"2003"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="fl">1.1</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">1985</span>,<span class="at">label=</span><span class="st">"Start of Gulf war"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">1995</span>,<span class="at">label=</span><span class="st">"End of Gulf war"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="militaryspend_shareofgovspend" class="level3">
<h3 class="anchored" data-anchor-id="militaryspend_shareofgovspend">MilitarySpend_ShareofGovSpend</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_GovSpend<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">min</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGovSpend"</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>byRegionStats_GovSpend</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Region"],"name":[1],"type":["chr"],"align":["left"]},{"label":["viewOfSpend"],"name":[2],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["std"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["min"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["max"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Middle East","2":"MilitarySpend_ShareofGovSpend","3":"0.1615","4":"0.0757","5":"0.018322","6":"0.5748"},{"1":"South Asia","2":"MilitarySpend_ShareofGovSpend","3":"0.1217","4":"0.0511","5":"0.036526","6":"0.2740"},{"1":"Eastern Europe","2":"MilitarySpend_ShareofGovSpend","3":"0.1151","4":"0.0887","5":"0.007710","6":"0.3502"},{"1":"sub-Saharan Africa","2":"MilitarySpend_ShareofGovSpend","3":"0.1027","4":"0.2598","5":"0.003896","6":"5.8165"},{"1":"South East Asia","2":"MilitarySpend_ShareofGovSpend","3":"0.0984","4":"0.0749","5":"0.007834","6":"0.3922"},{"1":"North Africa","2":"MilitarySpend_ShareofGovSpend","3":"0.0973","4":"0.0369","5":"0.028092","6":"0.1778"},{"1":"East Asia","2":"MilitarySpend_ShareofGovSpend","3":"0.0837","4":"0.0503","5":"0.017346","6":"0.2253"},{"1":"South America","2":"MilitarySpend_ShareofGovSpend","3":"0.0728","4":"0.0392","5":"0.017268","6":"0.3476"},{"1":"North America","2":"MilitarySpend_ShareofGovSpend","3":"0.0600","4":"0.0386","5":"0.025084","6":"0.1244"},{"1":"Central Asia","2":"MilitarySpend_ShareofGovSpend","3":"0.0518","4":"0.0269","5":"0.013632","6":"0.1583"},{"1":"Oceania","2":"MilitarySpend_ShareofGovSpend","3":"0.0441","4":"0.0155","5":"0.015373","6":"0.0879"},{"1":"Central Europe","2":"MilitarySpend_ShareofGovSpend","3":"0.0439","4":"0.0283","5":"0.000672","6":"0.2896"},{"1":"Central America and the Caribbean","2":"MilitarySpend_ShareofGovSpend","3":"0.0354","4":"0.0218","5":"0.002200","6":"0.2142"},{"1":"Western Europe","2":"MilitarySpend_ShareofGovSpend","3":"0.0348","4":"0.0189","5":"0.008584","6":"0.1637"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The share of Gov spend shows an insanely high max of sub-Saharan African spending as well as the Middle East.The Middle east spending has been explained above however below I will investigate the sub-sahara African spending.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>violin_ShareOfSpend<span class="ot">&lt;-</span> <span class="fu">na.omit</span>(byRegionStats_GovSpend)<span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Region,<span class="at">y=</span>Spend))<span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()<span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>violin_gdp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Zooming into Zimbabwe’s Violin plot we can see that they often have an exteremly high military spending when compared to overall spending. As suggested by [5], Zimbabwe’s military spending is highly influenced by internal political turbulence more so than economic factors. It should also be mentioned that their military spending is often determined by SIPRI from estimation and not necessarily accurate, for this reason I wont be looking further into the anomaly.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGovSpend"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">==</span> <span class="st">"sub-Saharan Africa"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country<span class="sc">==</span><span class="st">"Zimbabwe"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Country,<span class="at">y=</span>Spend))<span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()<span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now that some introductory statistics have been done to explain the data at first glance, we focus in on the heavy hitters in the military spending space and look into how recent global events have affected their spending habits.</p>
<p>Top 6 mean spenders</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>top6_mean <span class="ot">&lt;-</span> byRegionStats_USD <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()<span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Region)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>top6_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "North America"  "East Asia"      "Eastern Europe" "Western Europe"
[5] "Middle East"    "South Asia"    </code></pre>
</div>
</div>
<p>The top 6 spenders stand out not only in their mean spending habits but they continue to spend more and more.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>statsViz2<span class="ot">&lt;-</span> byRegionStats_USD<span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">test =</span> <span class="fu">fct_reorder</span>(Region,<span class="fu">desc</span>(mean)))<span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">y =</span> test, <span class="at">x =</span> mean))<span class="sc">+</span>  </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region, <span class="at">alpha=</span><span class="fl">0.9</span>, <span class="at">size=</span>max)) <span class="sc">+</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>,<span class="at">color=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Certain Regions on average spend more than others"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>statsViz2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="top-6-spenders-over-time" class="level3">
<h3 class="anchored" data-anchor-id="top-6-spenders-over-time">Top 6 spenders over time</h3>
<p>This data is scaled for each country on the Y axis so that you can see the shape of the spending compared to global averages. I found the below interesting in that it paints the story of the US setting the pace and overall shape of the graph with East Asia playing a bit of catchup, mostly driven by China.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_year_top6<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend <span class="sc">==</span> <span class="st">'MilitarySpend_currentUSD'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">==</span> top6_mean)<span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co"># add global average overlay</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>GlobalAverage<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">GlobalAverage =</span> <span class="fu">mean</span>(Spend),<span class="at">GlobalStandardDev =</span> <span class="fu">sd</span>(Spend))</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6<span class="ot">&lt;-</span> byRegionStats_year_top6<span class="sc">%&gt;%</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> GlobalAverage,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>GlobalAverage))<span class="sc">+</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Raw Mean Spend in USD for top 6 Spenders with Global Average Overlay"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="top-6-spenders-over-time-with-gdp-raw-value-overlay" class="level3">
<h3 class="anchored" data-anchor-id="top-6-spenders-over-time-with-gdp-raw-value-overlay">Top 6 spenders over time with GDP raw value overlay</h3>
<p>In order to show the raw values of military spend and GDP for the top 6 spenders I back calculate the true GDP spend values from the percentage of military spend. This gives an idea of how the relationship of money spent on military causes and domestic production is shaped. We can see that for the most part raw GDP spend increases steadily, while we see more dramatic swings in military spending. An interesting point of note however is the increase in military spending in Eastern Europe and the Middle East associated with a dip in the regions GDP. If I were to continue to expand the report this would be an area of investigation.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_year_top6_GDP<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">%in%</span> top6_mean)<span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> viewOfSpend,<span class="at">values_from =</span> Spend)<span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rawGDP =</span> <span class="st">`</span><span class="at">MilitarySpend_currentUSD</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">MilitarySpend_ShareofGDP</span><span class="st">`</span>)<span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,Year)<span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">meanUSD =</span> <span class="fu">mean</span>(MilitarySpend_currentUSD, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">meanGDP =</span><span class="fu">mean</span>(rawGDP,<span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6_GDP<span class="ot">&lt;-</span> byRegionStats_year_top6<span class="sc">%&gt;%</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> byRegionStats_year_top6_GDP,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>meanGDP))<span class="sc">+</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Raw Mean Spend in USD for top 6 Spenders with raw GDP Overlay"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6_GDP</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="top-and-bottom-5-spenders" class="level3">
<h3 class="anchored" data-anchor-id="top-and-bottom-5-spenders">Top and bottom 5 spenders</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>topMean<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mean<span class="sc">&gt;=</span><span class="dv">1880</span>)<span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>botMean<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mean<span class="sc">&gt;=</span><span class="dv">1880</span>)<span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Afghanistan"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()<span class="sc">%&gt;%</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(Spend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Top 5 spenders on average:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["viewOfSpend"],"name":[3],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["std"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"United States of America","2":"North America","3":"MilitarySpend_currentUSD","4":"288081","5":"245779"},{"1":"USSR","2":"Eastern Europe","3":"MilitarySpend_currentUSD","4":"227226","5":"12848"},{"1":"China","2":"East Asia","3":"MilitarySpend_currentUSD","4":"90276","5":"89509"},{"1":"Russia","2":"Eastern Europe","3":"MilitarySpend_currentUSD","4":"40275","5":"28210"},{"1":"United Kingdom","2":"Western Europe","3":"MilitarySpend_currentUSD","4":"31144","5":"23133"},{"1":"France","2":"Western Europe","3":"MilitarySpend_currentUSD","4":"24685","5":"19043"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Bottom 5 spenders on average:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["viewOfSpend"],"name":[3],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["std"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Chile","2":"South America","3":"MilitarySpend_currentUSD","4":"1881","5":"1856"},{"1":"Denmark","2":"Western Europe","3":"MilitarySpend_currentUSD","4":"1975","5":"1627"},{"1":"Mexico","2":"Central America and the Caribbean","3":"MilitarySpend_currentUSD","4":"1977","5":"2257"},{"1":"Czechia","2":"Central Europe","3":"MilitarySpend_currentUSD","4":"2010","5":"794"},{"1":"South Africa","2":"sub-Saharan Africa","3":"MilitarySpend_currentUSD","4":"2128","5":"1509"},{"1":"Argentina","2":"South America","3":"MilitarySpend_currentUSD","4":"2136","5":"1758"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
</section>
<section id="top-spenders-by-country" class="level2">
<h2 class="anchored" data-anchor-id="top-spenders-by-country">Top spenders by Country</h2>
<p>In the following analysis I will be looking at significant events which impacted some if not all of the world. For the sake of clarity I will only be focusing on a select group of individual countries which are not directly involved. The top 10 countries which stand out as significant spenders in the last 10 years will be the ones focused on.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting top 10 mean spenders in last 10 years</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>topMeanCountries<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year<span class="sc">&gt;=</span><span class="dv">2012</span>)<span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>topMeanCountriesVec<span class="ot">&lt;-</span>topMeanCountries<span class="sc">$</span>Country</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>topMeanCountriesVec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "United States of America" "China"                   
 [3] "Russia"                   "Saudi Arabia"            
 [5] "India"                    "United Kingdom"          
 [7] "France"                   "Japan"                   
 [9] "Germany"                  "Korea, South"            </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Raw data for these 10 countries</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>top10SpendCountriesbyYear<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> topMeanCountriesVec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>grouped<span class="ot">&lt;-</span>top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>top10CountryTibbles<span class="ot">&lt;-</span>grouped<span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(Country)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Using PURR here! Pretty powerful.</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># result is list of tibbles which have been processed to contain YoY spend increases</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>top10CountryTibblesYoY<span class="ot">&lt;-</span> <span class="fu">map</span>(top10CountryTibbles,<span class="sc">~</span> .x <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">percentChangeYoY =</span> ((Spend <span class="sc">-</span> <span class="fu">lag</span>(Spend))<span class="sc">/</span>Spend)<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co"># I then stack these DF on top of eachother to create one single DF to interact with.</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>top10CountryYoY<span class="ot">&lt;-</span><span class="fu">bind_rows</span>(top10CountryTibblesYoY)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Plots detailing YoY(Year over Year) spending for each of the top 10 spenders. Green and green line segments indicate that year having an increase or decrease in spending respectively. From this visualization we can see more often than not the spending of most nations is increasing. Germany, France, Japan, and the UK stand out as those who do the most jumping back and forth between spending more or less YoY.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>rect_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(  <span class="at">xmin=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">1990</span>),</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">xmax=</span><span class="fu">c</span>(<span class="dv">2020</span>,<span class="dv">2020</span>),</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">0</span>),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymax=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20</span>),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">col=</span><span class="fu">c</span>(<span class="st">"green"</span>,<span class="st">"red"</span>))</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>PercentChangeTop10Countries<span class="ot">&lt;-</span>top10CountryYoY<span class="sc">%&gt;%</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year<span class="sc">&gt;=</span><span class="dv">1992</span>)<span class="sc">%&gt;%</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posOrNeg =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    percentChangeYoY<span class="sc">&gt;</span><span class="dv">0</span> <span class="sc">~</span> <span class="st">"Positive"</span>,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    percentChangeYoY<span class="sc">&lt;</span><span class="dv">0</span> <span class="sc">~</span> <span class="st">"Negative"</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  ))<span class="sc">%&gt;%</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> percentChangeYoY,<span class="at">color =</span> <span class="fu">as.factor</span>(posOrNeg)))<span class="sc">+</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Country),<span class="at">scale=</span><span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">group=</span><span class="cn">NA</span>)<span class="sc">+</span><span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"YoY Positive or negative spend"</span>))</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>PercentChangeTop10Countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>To give some perspective on just how much the US and now recently China spends on their military I have left the following vizualization of the top 10 spenders unscaled.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="ot">&lt;-</span> top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>,)) <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"East asia and NA dominate raw spend"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="sc">+</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="analysis" class="level1">
<h1>9/11 analysis</h1>
<p>The first major global event I want to intentionally focus in on is the September 11th, 2001 attack on the World Trade Center in New York City. This terrorist attack on the United States left the world stunned and had lasting effects on global military spending.</p>
<center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.911memorial.org/visit/memorial/names-911-memorial"><img src="MemorialImage.jpg" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">9/11 Memorial Lights</figcaption><p></p>
</figure>
</div>
<center>
<p>Timeline 1998 - Bill Clinton warned bin laden preparing to hijack US aircraft</p>
<p>1999 - Germany intercepts intel about plane crash</p>
<p>2001 sept- Attack occurs oct-US attack on Afghanistan starts(end in 2021)</p>
<p>Parties Involved Al-Qaeda - Saudi Arabia - Kuwait</p>
<p>Look at US spending before and after</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>timeLine<span class="ot">&lt;-</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">xintercept=</span> <span class="fu">c</span>(<span class="dv">1988</span>,<span class="dv">2001</span>),</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Key_Events =</span> <span class="fu">c</span>(<span class="st">"US warned of possible airplane hijack"</span>,<span class="st">"2001 attack on United States"</span>),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">c</span>(<span class="st">"black"</span>,<span class="st">"red"</span>),</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>US911<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">'United States of America'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a> us911Plot<span class="ot">&lt;-</span> US911<span class="sc">%&gt;%</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">data=</span> timeLine,<span class="fu">aes</span>(<span class="at">xintercept=</span>xintercept,<span class="at">color=</span>Key_Events))<span class="sc">+</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Key Events"</span>)<span class="sc">+</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> timeLine<span class="sc">$</span>color)<span class="sc">+</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">viewOfSpend</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"United States Military response to 9/11"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)<span class="sc">+</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>us911Plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It looks like the event of 9/11 had a pretty significant impact on US spending. While initially it looks like spending just continues to rise when looking at the raw USD spending, it is refreshing to see the share of Gov spend has trended down in recent years as money is being spent elsewhere. Another interesting observation is that there was a slight upward trend in spending prior to the attack in 2001 however the spending increase was mostly reactionary.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>us911Plot<span class="sc">+</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">2010</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we look at Spending for the other top 10 Spending countries we see that their spending increased along with the United States.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="ot">&lt;-</span> top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Top 10 spending Nations reacted to 2001 attack on the World Trade Center"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2001</span>,<span class="at">color=</span><span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)<span class="sc">+</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">2010</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</center></center></section>
<section id="ukraine-war-analysis" class="level1">
<h1>Ukraine war analysis</h1>
<p>Due to the recency of the Russo-Ukrainian War I will only be able to provide an analysis of the time period building up to the invasion of Ukraine. In order to get an idea of if and how different regions, and their respective countries, prepared for the invasion I overlay the top 10 spenders with key dates.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>top10CountriesUkraineWar<span class="ot">&lt;-</span> top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Top 10 spending Nations prepared for 2022 invasion of Ukraine"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>top10CountriesUkraineWar<span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>,<span class="at">color=</span><span class="st">'black'</span>)<span class="sc">+</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2015</span>,<span class="at">color=</span><span class="st">'black'</span>)<span class="sc">+</span><span class="co"># war in the donbas</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)<span class="sc">+</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">2010</span>,<span class="dv">2020</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>From the above we can somewhat see a trend in increased spending from the top 10 spenders. Next we investigate the Nations geographically surrounding Russia. Upon Putin’s first election, spending grew and then come his re-election spending increased at an expedited rate in Central and Eastern Europe.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>ukrainePlot<span class="ot">&lt;-</span> combinedData<span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Eastern Europe"</span>,<span class="st">"Central Europe"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country<span class="sc">!=</span><span class="st">"Russia"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year<span class="sc">&gt;=</span><span class="dv">1995</span>)<span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,Year)<span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Spend=</span><span class="fu">mean</span>(Spend))<span class="sc">%&gt;%</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Russian Bordering Nations responded to Putin election and invasion"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>UkrainePlot<span class="sc">+</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span><span class="co"># official invasion</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2020</span>,<span class="at">y=</span><span class="dv">500</span>,<span class="at">label=</span><span class="st">"Invasion of Ukraine"</span>,<span class="at">hjust=</span><span class="fl">0.5</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2015</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span><span class="co"># war in the donbas</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2015</span>,<span class="at">y=</span><span class="dv">500</span>,<span class="at">label=</span><span class="st">"War in the Donbas"</span>,<span class="at">hjust=</span><span class="fl">0.5</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2004</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span> <span class="co"># putin first election</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2004</span>,<span class="at">y=</span><span class="dv">1500</span>,<span class="at">label=</span><span class="st">"Putin re-elected"</span>,<span class="at">hjust=</span><span class="fl">0.7</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2000</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span> <span class="co"># putin Wins presidential election securing second term</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2000</span>,<span class="at">y=</span><span class="dv">1500</span>,<span class="at">label=</span><span class="st">"Putin wins first election"</span>,<span class="at">hjust=</span><span class="fl">0.7</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'UkrainePlot' not found</code></pre>
</div>
</div>
<p>Nations surrounding Ukraine and Russia had some of the most defined reactions to Putins re-election and the war in the Donbas. Vertical lines represetnt the same events as in the last vizualization.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Russia"</span>,<span class="st">"Ukraine"</span>,<span class="st">"Poland"</span>,<span class="st">"Belarus"</span>,<span class="st">"Moldova"</span>,<span class="st">"Kazakhstan"</span>,<span class="st">"Romania"</span>,<span class="st">"Slovakia"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Top 10 spending Nations prepared for 2022 invasion of Ukraine"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)<span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span><span class="co"># official invasion</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2015</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span><span class="co"># war in the donbas</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2004</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span> <span class="co"># putin first election</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2000</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span> <span class="co"># putin Wins presidential election securing second term</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)<span class="sc">+</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">2020</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="global-usd-military-spending-through-all-available-years" class="level1">
<h1>Global USD Military spending through all available years</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># might facet this out for all the tabs??</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>GlobalReviewPlot<span class="ot">&lt;-</span> GlobalAverage<span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> GlobalAverage,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>GlobalAverage),<span class="at">size=</span><span class="fl">1.5</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># annotations</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>GlobalReviewPlot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># +</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_vline(xintercept = 2001,color="red")+#9/11</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_vline(xintercept = 2020,color="red")+#covid declared a pandemic march 11 2020</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_vline(xintercept = 2021,color="red")</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title="Average Global spending in USD")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>GlobalReviewPlot<span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>GlobalAverage,<span class="fu">aes</span>(<span class="at">y=</span>GlobalAverage,<span class="at">ymin=</span>GlobalAverage<span class="sc">-</span>GlobalStandardDev,<span class="at">ymax=</span>GlobalAverage<span class="sc">+</span>GlobalStandardDev,<span class="at">x=</span>Year),<span class="at">alpha=</span><span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<blockquote class="blockquote">
<p>“Every gun that is made, every warship launched, every rocket fired signifies in the final sense, a theft from those who hunger and are not fed, those who are cold and are not clothed. &gt; &gt; This world in arms is not spending money alone. It is spending the sweat of its laborers, the genius of its scientists, the hopes of its children. This is not a way of life at all in any &gt; true sense. Under the clouds of war, it is humanity hanging on a cross of iron.”</p>
</blockquote>
<p>Dwight D. Eisenhower</p>
<p>After reviewing the data at a high level and diving deeper into spending surrounding 9/11 and the Russo-Ukraine war I have found a few facts have held true through the years. Powerful country Military spending rises like ships in high tide, when one goes up, they all do. In the years leading up to an altercation the nations involved often increased spending both in raw USD as well as percentage of their government spend and GDP. In the future I would like to spend some more time analyzing the tabs other than USD spend and look a little bit more at the times of peace and how countries would prioritize spending that time period. I had a lot of fun with this project and can say now that I am competent with R even when starting with zero experience beforehand.</p>
</section>
</section>
<section id="citations" class="level1">
<h1>Citations</h1>
<p>[1] https://www.goodreads.com/quotes/tag/military-budget#:~:text=%E2%80%9CEvery%20gun%20that%20is%20made,is%20not%20spending%20money%20alone.</p>
<p>[2] https://www.sipri.org/about</p>
<p>[3] R Core Team (2017). R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria. URL https://www.R-project.org/.</p>
<p>[4] Wickham, H., &amp; Grolemund, G. (2016). R for data science: Visualize, model, transform, tidy, and import data. OReilly Media.</p>
<p>[5] Tambudzai, Z. (2011). Determinants of military expenditure in Zimbabwe. The Economics of Peace and Security Journal, 6(2). doi:http://dx.doi.org/10.15355/epsj.6.2.41</p>
<p>[6] https://www.investopedia.com/terms/g/gdp.asp</p>
<p>[7] Centers for Disease Control and Prevention. (2022, August 16). CDC Museum Covid-19 Timeline. Centers for Disease Control and Prevention. Retrieved December 7, 2022, from https://www.cdc.gov/museum/timeline/covid19.html</p>
<p>[8] https://www.istockphoto.com/photo/9-11-memorial-beams-with-statue-of-liberty-and-lower-manhattan-gm1271263089-373908152</p>
</section>
<section id="appendix" class="level1">
<h1>Appendix</h1>
<p>Full descriptions of source sheet tabs as provided by SIPRI: 1. Introduction 2. Estimates of world, regional and sub-regional totals in constant (2019) US$ (billions). 3. Data for military expenditure by country in current price local currency, presented according to each country’s financial year. 4. Data for military expenditure by country in current price local currency, presented according to calendar year. 5. Data for military expenditure by country in constant price (2019) US$ (millions), presented according to calendar year, and in current US$m. for 2020. 6. Data for military expenditure by country in current US$ (millions), presented according to calendar year. 7. Data for military expenditure by country as a share of GDP, presented according to calendar year. 8. Data for military expenditure per capita, in current US$, presented according to calender year. (1988-2020 only) 9. Data for military expenditure as a percentage of general government expenditure. (1988-2020 only)</p>
<p>Additional Country info:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["n"],"name":[1],"type":["int"],"align":["right"]}],"data":[{"1":"173"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>List of Countries:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"Afghanistan","2":"South Asia"},{"1":"Albania","2":"Central Europe"},{"1":"Algeria","2":"North Africa"},{"1":"Angola","2":"sub-Saharan Africa"},{"1":"Argentina","2":"South America"},{"1":"Armenia","2":"Eastern Europe"},{"1":"Australia","2":"Oceania"},{"1":"Austria","2":"Western Europe"},{"1":"Azerbaijan","2":"Eastern Europe"},{"1":"Bahrain","2":"Middle East"},{"1":"Bangladesh","2":"South Asia"},{"1":"Belarus","2":"Eastern Europe"},{"1":"Belgium","2":"Western Europe"},{"1":"Belize","2":"Central America and the Caribbean"},{"1":"Benin","2":"sub-Saharan Africa"},{"1":"Bolivia","2":"South America"},{"1":"Bosnia and Herzegovina","2":"Central Europe"},{"1":"Botswana","2":"sub-Saharan Africa"},{"1":"Brazil","2":"South America"},{"1":"Brunei","2":"South East Asia"},{"1":"Bulgaria","2":"Central Europe"},{"1":"Burkina Faso","2":"sub-Saharan Africa"},{"1":"Burundi","2":"sub-Saharan Africa"},{"1":"Cambodia","2":"South East Asia"},{"1":"Cameroon","2":"sub-Saharan Africa"},{"1":"Canada","2":"North America"},{"1":"Cape Verde","2":"sub-Saharan Africa"},{"1":"Central African Republic","2":"sub-Saharan Africa"},{"1":"Chad","2":"sub-Saharan Africa"},{"1":"Chile","2":"South America"},{"1":"China","2":"East Asia"},{"1":"Colombia","2":"South America"},{"1":"Congo, DR","2":"sub-Saharan Africa"},{"1":"Congo, Republic","2":"sub-Saharan Africa"},{"1":"Costa Rica","2":"Central America and the Caribbean"},{"1":"Cote d'Ivoire","2":"sub-Saharan Africa"},{"1":"Croatia","2":"Central Europe"},{"1":"Cuba","2":"Central America and the Caribbean"},{"1":"Cyprus","2":"Western Europe"},{"1":"Czechia","2":"Central Europe"},{"1":"Czechoslovakia","2":"Central Europe"},{"1":"Denmark","2":"Western Europe"},{"1":"Djibouti","2":"sub-Saharan Africa"},{"1":"Dominican Republic","2":"Central America and the Caribbean"},{"1":"Ecuador","2":"South America"},{"1":"Egypt","2":"Middle East"},{"1":"El Salvador","2":"Central America and the Caribbean"},{"1":"Equatorial Guinea","2":"sub-Saharan Africa"},{"1":"Eritrea","2":"sub-Saharan Africa"},{"1":"Estonia","2":"Central Europe"},{"1":"Eswatini","2":"sub-Saharan Africa"},{"1":"Ethiopia","2":"sub-Saharan Africa"},{"1":"Fiji","2":"Oceania"},{"1":"Finland","2":"Western Europe"},{"1":"France","2":"Western Europe"},{"1":"Gabon","2":"sub-Saharan Africa"},{"1":"Gambia, The","2":"sub-Saharan Africa"},{"1":"Georgia","2":"Eastern Europe"},{"1":"German Democratic Republic","2":"Central Europe"},{"1":"Germany","2":"Western Europe"},{"1":"Ghana","2":"sub-Saharan Africa"},{"1":"Greece","2":"Western Europe"},{"1":"Guatemala","2":"Central America and the Caribbean"},{"1":"Guinea","2":"sub-Saharan Africa"},{"1":"Guinea-Bissau","2":"sub-Saharan Africa"},{"1":"Guyana","2":"South America"},{"1":"Haiti","2":"Central America and the Caribbean"},{"1":"Honduras","2":"Central America and the Caribbean"},{"1":"Hungary","2":"Central Europe"},{"1":"Iceland","2":"Western Europe"},{"1":"India","2":"South Asia"},{"1":"Indonesia","2":"South East Asia"},{"1":"Iran","2":"Middle East"},{"1":"Iraq","2":"Middle East"},{"1":"Ireland","2":"Western Europe"},{"1":"Israel","2":"Middle East"},{"1":"Italy","2":"Western Europe"},{"1":"Jamaica","2":"Central America and the Caribbean"},{"1":"Japan","2":"East Asia"},{"1":"Jordan","2":"Middle East"},{"1":"Kazakhstan","2":"Central Asia"},{"1":"Kenya","2":"sub-Saharan Africa"},{"1":"Korea, North","2":"East Asia"},{"1":"Korea, South","2":"East Asia"},{"1":"Kosovo","2":"Central Europe"},{"1":"Kuwait","2":"Middle East"},{"1":"Kyrgyz Republic","2":"Central Asia"},{"1":"Laos","2":"South East Asia"},{"1":"Latvia","2":"Central Europe"},{"1":"Lebanon","2":"Middle East"},{"1":"Lesotho","2":"sub-Saharan Africa"},{"1":"Liberia","2":"sub-Saharan Africa"},{"1":"Libya","2":"North Africa"},{"1":"Lithuania","2":"Central Europe"},{"1":"Luxembourg","2":"Western Europe"},{"1":"Madagascar","2":"sub-Saharan Africa"},{"1":"Malawi","2":"sub-Saharan Africa"},{"1":"Malaysia","2":"South East Asia"},{"1":"Mali","2":"sub-Saharan Africa"},{"1":"Malta","2":"Western Europe"},{"1":"Mauritania","2":"sub-Saharan Africa"},{"1":"Mauritius","2":"sub-Saharan Africa"},{"1":"Mexico","2":"Central America and the Caribbean"},{"1":"Moldova","2":"Eastern Europe"},{"1":"Mongolia","2":"East Asia"},{"1":"Montenegro","2":"Central Europe"},{"1":"Morocco","2":"North Africa"},{"1":"Mozambique","2":"sub-Saharan Africa"},{"1":"Myanmar","2":"South East Asia"},{"1":"Namibia","2":"sub-Saharan Africa"},{"1":"Nepal","2":"South Asia"},{"1":"Netherlands","2":"Western Europe"},{"1":"New Zealand","2":"Oceania"},{"1":"Nicaragua","2":"Central America and the Caribbean"},{"1":"Niger","2":"sub-Saharan Africa"},{"1":"Nigeria","2":"sub-Saharan Africa"},{"1":"North Macedonia","2":"Central Europe"},{"1":"Norway","2":"Western Europe"},{"1":"Oman","2":"Middle East"},{"1":"Pakistan","2":"South Asia"},{"1":"Panama","2":"Central America and the Caribbean"},{"1":"Papua New Guinea","2":"Oceania"},{"1":"Paraguay","2":"South America"},{"1":"Peru","2":"South America"},{"1":"Philippines","2":"South East Asia"},{"1":"Poland","2":"Central Europe"},{"1":"Portugal","2":"Western Europe"},{"1":"Qatar","2":"Middle East"},{"1":"Romania","2":"Central Europe"},{"1":"Russia","2":"Eastern Europe"},{"1":"Rwanda","2":"sub-Saharan Africa"},{"1":"Saudi Arabia","2":"Middle East"},{"1":"Senegal","2":"sub-Saharan Africa"},{"1":"Serbia","2":"Central Europe"},{"1":"Seychelles","2":"sub-Saharan Africa"},{"1":"Sierra Leone","2":"sub-Saharan Africa"},{"1":"Singapore","2":"South East Asia"},{"1":"Slovakia","2":"Central Europe"},{"1":"Slovenia","2":"Central Europe"},{"1":"Somalia","2":"sub-Saharan Africa"},{"1":"South Africa","2":"sub-Saharan Africa"},{"1":"South Sudan","2":"sub-Saharan Africa"},{"1":"Spain","2":"Western Europe"},{"1":"Sri Lanka","2":"South Asia"},{"1":"Sudan","2":"sub-Saharan Africa"},{"1":"Sweden","2":"Western Europe"},{"1":"Switzerland","2":"Western Europe"},{"1":"Syria","2":"Middle East"},{"1":"Taiwan","2":"East Asia"},{"1":"Tajikistan","2":"Central Asia"},{"1":"Tanzania","2":"sub-Saharan Africa"},{"1":"Thailand","2":"South East Asia"},{"1":"Timor Leste","2":"South East Asia"},{"1":"Togo","2":"sub-Saharan Africa"},{"1":"Trinidad and Tobago","2":"Central America and the Caribbean"},{"1":"Tunisia","2":"North Africa"},{"1":"Turkey","2":"Middle East"},{"1":"Turkmenistan","2":"Central Asia"},{"1":"Uganda","2":"sub-Saharan Africa"},{"1":"Ukraine","2":"Eastern Europe"},{"1":"United Arab Emirates","2":"Middle East"},{"1":"United Kingdom","2":"Western Europe"},{"1":"United States of America","2":"North America"},{"1":"Uruguay","2":"South America"},{"1":"USSR","2":"Eastern Europe"},{"1":"Uzbekistan","2":"Central Asia"},{"1":"Venezuela","2":"South America"},{"1":"Viet Nam","2":"South East Asia"},{"1":"Yemen","2":"Middle East"},{"1":"Yemen, North","2":"Middle East"},{"1":"Yugoslavia","2":"Central Europe"},{"1":"Zambia","2":"sub-Saharan Africa"},{"1":"Zimbabwe","2":"sub-Saharan Africa"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Number of countries by region:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Region"],"name":[1],"type":["chr"],"align":["left"]},{"label":["numberCountries"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"sub-Saharan Africa","2":"47"},{"1":"Central Europe","2":"20"},{"1":"Western Europe","2":"20"},{"1":"Middle East","2":"16"},{"1":"Central America and the Caribbean","2":"13"},{"1":"South America","2":"11"},{"1":"South East Asia","2":"11"},{"1":"Eastern Europe","2":"8"},{"1":"East Asia","2":"6"},{"1":"South Asia","2":"6"},{"1":"Central Asia","2":"5"},{"1":"North Africa","2":"4"},{"1":"Oceania","2":"4"},{"1":"North America","2":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<section id="cleaning-with-intermitant-steps" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-with-intermitant-steps">Cleaning with intermitant steps</h2>
</section>
</section>
<section id="input-and-cleaning-1" class="level1">
<h1>Input and Cleaning</h1>
<section id="reading-in-raw-information-1" class="level2">
<h2 class="anchored" data-anchor-id="reading-in-raw-information-1">Reading in raw information</h2>
<p>The data provided by the Stockholm International Peace Research Institute(SIPRI) was separated into multiple tabs in one excel .xlsx file.</p>
<p>In order to begin working I imported the tabs I planned to utilize, skipping over some of the notes and title rows at the start of each tab.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">6</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">7</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">9</span>],<span class="at">skip=</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Notes"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1949"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1950"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1951"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1952"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1953"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1954"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1955"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1956"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1957"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1958"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1959"],"name":[13],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[14],"type":["chr"],"align":["left"]},{"label":["1961"],"name":[15],"type":["chr"],"align":["left"]},{"label":["1962"],"name":[16],"type":["chr"],"align":["left"]},{"label":["1963"],"name":[17],"type":["chr"],"align":["left"]},{"label":["1964"],"name":[18],"type":["chr"],"align":["left"]},{"label":["1965"],"name":[19],"type":["chr"],"align":["left"]},{"label":["1966"],"name":[20],"type":["chr"],"align":["left"]},{"label":["1967"],"name":[21],"type":["chr"],"align":["left"]},{"label":["1968"],"name":[22],"type":["chr"],"align":["left"]},{"label":["1969"],"name":[23],"type":["chr"],"align":["left"]},{"label":["1970"],"name":[24],"type":["chr"],"align":["left"]},{"label":["1971"],"name":[25],"type":["chr"],"align":["left"]},{"label":["1972"],"name":[26],"type":["chr"],"align":["left"]},{"label":["1973"],"name":[27],"type":["chr"],"align":["left"]},{"label":["1974"],"name":[28],"type":["chr"],"align":["left"]},{"label":["1975"],"name":[29],"type":["chr"],"align":["left"]},{"label":["1976"],"name":[30],"type":["chr"],"align":["left"]},{"label":["1977"],"name":[31],"type":["chr"],"align":["left"]},{"label":["1978"],"name":[32],"type":["chr"],"align":["left"]},{"label":["1979"],"name":[33],"type":["chr"],"align":["left"]},{"label":["1980"],"name":[34],"type":["chr"],"align":["left"]},{"label":["1981"],"name":[35],"type":["chr"],"align":["left"]},{"label":["1982"],"name":[36],"type":["chr"],"align":["left"]},{"label":["1983"],"name":[37],"type":["chr"],"align":["left"]},{"label":["1984"],"name":[38],"type":["chr"],"align":["left"]},{"label":["1985"],"name":[39],"type":["chr"],"align":["left"]},{"label":["1986"],"name":[40],"type":["chr"],"align":["left"]},{"label":["1987"],"name":[41],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[42],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[43],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[44],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[45],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[46],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[47],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[48],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[49],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[50],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[51],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[52],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[53],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[54],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[55],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[56],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[57],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[58],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[59],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[60],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[61],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[62],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[63],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[64],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[65],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[66],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[67],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[68],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[69],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[70],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[71],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[72],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[73],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[74],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[75],"type":["chr"],"align":["left"]}],"data":[{"1":"NA","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA"},{"1":"Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA"},{"1":"North Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA"},{"1":"Algeria","2":"§4","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"xxx","16":"...","17":"66.436300146240882","18":"99.856999914929133","19":"105.52839139082775","20":"104.51564291298871","21":"99.249350828225715","22":"99.249350828225715","23":"99.249350828225715","24":"98.844251437090094","25":"99.946261073475782","26":"109.94284132833093","27":"136.75709779179812","28":"260.1686300304969","29":"332.25215918327041","30":"480.64037350317733","31":"471.66944795454771","32":"627.85244206863513","33":"711.68124735614174","34":"890.17446481387378","35":"806.56933460926223","36":"932.45270774946152","37":"952.43067156698964","38":"929.29082127154925","39":"953.2996539241816","40":"1127.1032171353716","41":"1196.9713840329584","42":"1028.6114252963346","43":"854.30094525113816","44":"904.2691551558413","45":"565.09806256732838","46":"1053.3016426926056","47":"1276.9110831255837","48":"1334.9116476746008","49":"1234.6551915858731","50":"1452.4310077462744","51":"1752.395277547208","52":"1910.9620524693985","53":"1826.4965699771233","54":"1881.1636491194504","55":"2091.6272744932976","56":"2100.6025207732246","57":"2206.3957620001293","58":"2802.2247941316059","59":"2924.8201669571195","60":"3093.9782453686748","61":"3945.8151254683057","62":"5172.3369070402641","63":"5280.5881559422633","64":"5671.3091173070197","65":"8652.2370400025229","66":"9326.2871440363178","67":"10161.588239148075","68":"9724.3799719232557","69":"10412.714002896393","70":"10217.081699569308","71":"10073.364021301344","72":"9583.7242883703002","73":"10303.60057521065","74":"9708.2774402272553","75":"9112.4611053489425"},{"1":"Libya","2":"‡§¶16","3":"xxx","4":"xxx","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"...","12":"...","13":"5.5719977712008912","14":"5.5719977712008912","15":"7.1679971328011476","16":"16.687993324802672","17":"18.67599252960299","18":"21.475991409603434","19":"29.119988352004658","20":"58.519976592009364","21":"79.519968192012726","22":"95.47996180801529","23":"143.0799427680229","24":"242.47990300803883","25":"243.03587164562788","26":"202.76822710041438","27":"298.30748001839839","28":"431.68237904955566","29":"287.78825269970378","30":"326.2951315820585","31":"479.64708783283959","32":"729.94180056814525","33":"853.56914855886316","34":"1074.1392530341056","35":"557.33452231364765","36":"709.33245060850584","37":"...","38":"...","39":"...","40":"...","41":"...","42":"...","43":"...","44":"...","45":"...","46":"...","47":"...","48":"...","49":"...","50":"...","51":"1251.9908172874545","52":"1443.6217582671406","53":"1153.4870884907862","54":"1085.5346648704581","55":"819.74799360067686","56":"452.51361475745267","57":"541.40176651662102","58":"685.07322007402468","59":"690.93076934835449","60":"614.35629620043096","61":"639.13704618893746","62":"1100.0686521298505","63":"...","64":"...","65":"...","66":"2987.4134077326698","67":"3964.690154136521","68":"3755.6524963509291","69":"...","70":"...","71":"...","72":"...","73":"...","74":"...","75":"..."},{"1":"Morocco","2":"§17","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"23.714285714285712","11":"35.401979723307051","12":"41.692277637215241","13":"41.880517347567228","14":"41.596762368861519","15":"48.275957466569444","16":"53.848540358739967","17":"74.893933196192478","18":"69.99322200024109","19":"63.175700376840979","20":"67.938085047100188","21":"70.348918780592399","22":"90.900288312001408","23":"84.972008639479583","24":"88.924195087827471","25":"111.28801020206102","26":"140.44699160366511","27":"185.78399384453559","28":"241.88916121443464","29":"413.32612788680541","30":"577.2394333051991","31":"731.45547203748322","32":"772.5593819524945","33":"896.35380200198506","34":"1117.9556221660548","35":"975.58146279218147","36":"959.48544085857259","37":"628.15342299319957","38":"512.4544012058285","39":"692.47204968944095","40":"728.54563268031859","41":"815.38610613656999","42":"917.26914479574634","43":"990.55509020201055","44":"1069.7204919962048","45":"1148.4457104134244","46":"1228.5265528756001","47":"1251.7865381327088","48":"1365.2500187444784","49":"1437.8987007390892","50":"1447.1286892430828","51":"1400.9495009504456","52":"1444.9597164638781","53":"1007.8107629008141","54":"1043.4234302062941","55":"1470.3176147925328","56":"1474.8743262617281","57":"1819.2300702499797","58":"1937.523821552049","59":"2031.1313805624586","60":"2134.5948760627498","61":"2408.3502495627008","62":"2944.9584727359997","63":"3055.0694418587332","64":"3160.804832033607","65":"3342.6989556074454","66":"3402.700835840546","67":"4065.5523169353401","68":"4048.6125243501792","69":"3268.3633756657109","70":"3327.0318896485569","71":"3461.461531383587","72":"3696.8569447441005","73":"3721.3238374528701","74":"4830.9563935116921","75":"5378.3665352074695"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Next I delete the first row of NA as well as the Notes column for each tibble.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD[<span class="sc">-</span><span class="dv">1</span>,]  <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> rawData_ShareOfGDP[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> rawData_ShareOfGovSpend[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">:-</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1949"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1950"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1951"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1952"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1953"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1954"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1955"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1956"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1957"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1958"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1959"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[13],"type":["chr"],"align":["left"]},{"label":["1961"],"name":[14],"type":["chr"],"align":["left"]},{"label":["1962"],"name":[15],"type":["chr"],"align":["left"]},{"label":["1963"],"name":[16],"type":["chr"],"align":["left"]},{"label":["1964"],"name":[17],"type":["chr"],"align":["left"]},{"label":["1965"],"name":[18],"type":["chr"],"align":["left"]},{"label":["1966"],"name":[19],"type":["chr"],"align":["left"]},{"label":["1967"],"name":[20],"type":["chr"],"align":["left"]},{"label":["1968"],"name":[21],"type":["chr"],"align":["left"]},{"label":["1969"],"name":[22],"type":["chr"],"align":["left"]},{"label":["1970"],"name":[23],"type":["chr"],"align":["left"]},{"label":["1971"],"name":[24],"type":["chr"],"align":["left"]},{"label":["1972"],"name":[25],"type":["chr"],"align":["left"]},{"label":["1973"],"name":[26],"type":["chr"],"align":["left"]},{"label":["1974"],"name":[27],"type":["chr"],"align":["left"]},{"label":["1975"],"name":[28],"type":["chr"],"align":["left"]},{"label":["1976"],"name":[29],"type":["chr"],"align":["left"]},{"label":["1977"],"name":[30],"type":["chr"],"align":["left"]},{"label":["1978"],"name":[31],"type":["chr"],"align":["left"]},{"label":["1979"],"name":[32],"type":["chr"],"align":["left"]},{"label":["1980"],"name":[33],"type":["chr"],"align":["left"]},{"label":["1981"],"name":[34],"type":["chr"],"align":["left"]},{"label":["1982"],"name":[35],"type":["chr"],"align":["left"]},{"label":["1983"],"name":[36],"type":["chr"],"align":["left"]},{"label":["1984"],"name":[37],"type":["chr"],"align":["left"]},{"label":["1985"],"name":[38],"type":["chr"],"align":["left"]},{"label":["1986"],"name":[39],"type":["chr"],"align":["left"]},{"label":["1987"],"name":[40],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[41],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[42],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[43],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[44],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[45],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[46],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[47],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[48],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[49],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[50],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[51],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[52],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[53],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[54],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[55],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[56],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[57],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[58],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[59],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[60],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[61],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[62],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[63],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[64],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[65],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[66],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[67],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[68],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[69],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[70],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[71],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[72],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[73],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[74],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA"},{"1":"North Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA"},{"1":"Algeria","2":"xxx","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"...","16":"66.436300146240882","17":"99.856999914929133","18":"105.52839139082775","19":"104.51564291298871","20":"99.249350828225715","21":"99.249350828225715","22":"99.249350828225715","23":"98.844251437090094","24":"99.946261073475782","25":"109.94284132833093","26":"136.75709779179812","27":"260.1686300304969","28":"332.25215918327041","29":"480.64037350317733","30":"471.66944795454771","31":"627.85244206863513","32":"711.68124735614174","33":"890.17446481387378","34":"806.56933460926223","35":"932.45270774946152","36":"952.43067156698964","37":"929.29082127154925","38":"953.2996539241816","39":"1127.1032171353716","40":"1196.9713840329584","41":"1028.6114252963346","42":"854.30094525113816","43":"904.2691551558413","44":"565.09806256732838","45":"1053.3016426926056","46":"1276.9110831255837","47":"1334.9116476746008","48":"1234.6551915858731","49":"1452.4310077462744","50":"1752.395277547208","51":"1910.9620524693985","52":"1826.4965699771233","53":"1881.1636491194504","54":"2091.6272744932976","55":"2100.6025207732246","56":"2206.3957620001293","57":"2802.2247941316059","58":"2924.8201669571195","59":"3093.9782453686748","60":"3945.8151254683057","61":"5172.3369070402641","62":"5280.5881559422633","63":"5671.3091173070197","64":"8652.2370400025229","65":"9326.2871440363178","66":"10161.588239148075","67":"9724.3799719232557","68":"10412.714002896393","69":"10217.081699569308","70":"10073.364021301344","71":"9583.7242883703002","72":"10303.60057521065","73":"9708.2774402272553","74":"9112.4611053489425"},{"1":"Libya","2":"xxx","3":"xxx","4":"...","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"...","12":"5.5719977712008912","13":"5.5719977712008912","14":"7.1679971328011476","15":"16.687993324802672","16":"18.67599252960299","17":"21.475991409603434","18":"29.119988352004658","19":"58.519976592009364","20":"79.519968192012726","21":"95.47996180801529","22":"143.0799427680229","23":"242.47990300803883","24":"243.03587164562788","25":"202.76822710041438","26":"298.30748001839839","27":"431.68237904955566","28":"287.78825269970378","29":"326.2951315820585","30":"479.64708783283959","31":"729.94180056814525","32":"853.56914855886316","33":"1074.1392530341056","34":"557.33452231364765","35":"709.33245060850584","36":"...","37":"...","38":"...","39":"...","40":"...","41":"...","42":"...","43":"...","44":"...","45":"...","46":"...","47":"...","48":"...","49":"...","50":"1251.9908172874545","51":"1443.6217582671406","52":"1153.4870884907862","53":"1085.5346648704581","54":"819.74799360067686","55":"452.51361475745267","56":"541.40176651662102","57":"685.07322007402468","58":"690.93076934835449","59":"614.35629620043096","60":"639.13704618893746","61":"1100.0686521298505","62":"...","63":"...","64":"...","65":"2987.4134077326698","66":"3964.690154136521","67":"3755.6524963509291","68":"...","69":"...","70":"...","71":"...","72":"...","73":"...","74":"..."},{"1":"Morocco","2":"xxx","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"23.714285714285712","10":"35.401979723307051","11":"41.692277637215241","12":"41.880517347567228","13":"41.596762368861519","14":"48.275957466569444","15":"53.848540358739967","16":"74.893933196192478","17":"69.99322200024109","18":"63.175700376840979","19":"67.938085047100188","20":"70.348918780592399","21":"90.900288312001408","22":"84.972008639479583","23":"88.924195087827471","24":"111.28801020206102","25":"140.44699160366511","26":"185.78399384453559","27":"241.88916121443464","28":"413.32612788680541","29":"577.2394333051991","30":"731.45547203748322","31":"772.5593819524945","32":"896.35380200198506","33":"1117.9556221660548","34":"975.58146279218147","35":"959.48544085857259","36":"628.15342299319957","37":"512.4544012058285","38":"692.47204968944095","39":"728.54563268031859","40":"815.38610613656999","41":"917.26914479574634","42":"990.55509020201055","43":"1069.7204919962048","44":"1148.4457104134244","45":"1228.5265528756001","46":"1251.7865381327088","47":"1365.2500187444784","48":"1437.8987007390892","49":"1447.1286892430828","50":"1400.9495009504456","51":"1444.9597164638781","52":"1007.8107629008141","53":"1043.4234302062941","54":"1470.3176147925328","55":"1474.8743262617281","56":"1819.2300702499797","57":"1937.523821552049","58":"2031.1313805624586","59":"2134.5948760627498","60":"2408.3502495627008","61":"2944.9584727359997","62":"3055.0694418587332","63":"3160.804832033607","64":"3342.6989556074454","65":"3402.700835840546","66":"4065.5523169353401","67":"4048.6125243501792","68":"3268.3633756657109","69":"3327.0318896485569","70":"3461.461531383587","71":"3696.8569447441005","72":"3721.3238374528701","73":"4830.9563935116921","74":"5378.3665352074695"},{"1":"Tunisia","2":"xxx","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"3.7142857142857144","10":"6.4111498257839719","11":"9.5238095238095237","12":"14.285714285714285","13":"15.952380952380953","14":"18.571428571428569","15":"14.285714285714285","16":"15.238095238095239","17":"17.478991596638657","18":"12.761904761904761","19":"13.714285714285715","20":"15.428571428571427","21":"17.523809523809522","22":"16.952380952380953","23":"22.476190476190474","24":"24.860541921566902","25":"31.65067713584429","26":"38.188218104536098","27":"46.505447781025772","28":"75.323106295072677","29":"83.960118943501826","30":"121.69250495395734","31":"148.4966516167633","32":"160.90064999926196","33":"194.09611955925857","34":"228.83573239584933","35":"328.60042628329393","36":"383.48947429677634","37":"249.4744687725676","38":"215.9387222946545","39":"206.79345464712247","40":"194.4097834822883","41":"232.92034077714723","42":"234.06202959799688","43":"247.85588153923399","44":"260.43103066012992","45":"289.67711516870128","46":"276.16713491541628","47":"297.06885472789287","48":"342.90245836637592","49":"397.46950918833619","50":"358.1665777504499","51":"365.84937473654634","52":"357.01339537863652","53":"332.38976274549862","54":"335.6479068054021","55":"345.42423666940982","56":"407.38556105738633","57":"444.65141673424489","58":"468.46457997733978","59":"497.21266397199133","60":"490.65055878129488","61":"578.9114873309851","62":"564.77593370214845","63":"571.18904568953462","64":"715.23959709613712","65":"681.22595061111861","66":"759.35888124284475","67":"908.35728759247911","68":"979.49404192952272","69":"987.73470521580032","70":"858.9495812565691","71":"844.22736712851361","72":"1000.922131147541","73":"1157.3723670117815","74":"1250.4543802253725"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="tidying-data-1" class="level2">
<h2 class="anchored" data-anchor-id="tidying-data-1">Tidying Data</h2>
<p>Before pivoting my data I wanted to add a column for region. I chose to do this with an algorithm as an exercise in iteration however it would have been more practical to just hard code this column.</p>
<p>The list of countries where there are NA’s for every year:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>Regions <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">1949</span><span class="st">`</span>))<span class="sc">%&gt;%</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>Regions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa"},{"1":"North Africa"},{"1":"sub-Saharan Africa"},{"1":"Americas"},{"1":"Central America and the Caribbean"},{"1":"North America"},{"1":"South America"},{"1":"Asia & Oceania"},{"1":"Oceania"},{"1":"South Asia"},{"1":"East Asia"},{"1":"South East Asia"},{"1":"Central Asia"},{"1":"Europe"},{"1":"Central Europe"},{"1":"Eastern Europe"},{"1":"Western Europe"},{"1":"Middle East"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>You will notice that some of these are continents and sub-continents, I wanted to break these into a <code>Region</code> field. The pattern I saw and chose to exploit was the fact that the overarching category would always be followed with a more specific category such as the <strong>Africa</strong> followed by <strong>North Africa</strong> values (see earlier print outs to see raw information).</p>
<p>I then added an empty vector into the tibble and populated it according to the Country column using the pattern described above.</p>
<p>Once I had left flags in the region column dictating where each region was starting I could use <code>fill(Region)</code> in order to populate the rest of the column.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">length</span>(rawData_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>)))<span class="do">## doing as numeric here as a hacky way to fill this with NA's, any better way?</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Region =</span>emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(mutated_CurrentUSD<span class="sc">$</span>Country) ){</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>   <span class="co">#if 2 nas in a row then do something</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i<span class="sc">+</span><span class="dv">1</span>]) ){</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>] <span class="co">#this works because when referencing an index outside of the vector R will return NA - Great to know.</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#if the row is a region</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) ){</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>     mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i]</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> mutated_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(Region)</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mutated_CurrentUSD)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1949"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1950"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1951"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1952"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1953"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1954"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1955"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1956"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1957"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1958"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1959"],"name":[13],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[14],"type":["chr"],"align":["left"]},{"label":["1961"],"name":[15],"type":["chr"],"align":["left"]},{"label":["1962"],"name":[16],"type":["chr"],"align":["left"]},{"label":["1963"],"name":[17],"type":["chr"],"align":["left"]},{"label":["1964"],"name":[18],"type":["chr"],"align":["left"]},{"label":["1965"],"name":[19],"type":["chr"],"align":["left"]},{"label":["1966"],"name":[20],"type":["chr"],"align":["left"]},{"label":["1967"],"name":[21],"type":["chr"],"align":["left"]},{"label":["1968"],"name":[22],"type":["chr"],"align":["left"]},{"label":["1969"],"name":[23],"type":["chr"],"align":["left"]},{"label":["1970"],"name":[24],"type":["chr"],"align":["left"]},{"label":["1971"],"name":[25],"type":["chr"],"align":["left"]},{"label":["1972"],"name":[26],"type":["chr"],"align":["left"]},{"label":["1973"],"name":[27],"type":["chr"],"align":["left"]},{"label":["1974"],"name":[28],"type":["chr"],"align":["left"]},{"label":["1975"],"name":[29],"type":["chr"],"align":["left"]},{"label":["1976"],"name":[30],"type":["chr"],"align":["left"]},{"label":["1977"],"name":[31],"type":["chr"],"align":["left"]},{"label":["1978"],"name":[32],"type":["chr"],"align":["left"]},{"label":["1979"],"name":[33],"type":["chr"],"align":["left"]},{"label":["1980"],"name":[34],"type":["chr"],"align":["left"]},{"label":["1981"],"name":[35],"type":["chr"],"align":["left"]},{"label":["1982"],"name":[36],"type":["chr"],"align":["left"]},{"label":["1983"],"name":[37],"type":["chr"],"align":["left"]},{"label":["1984"],"name":[38],"type":["chr"],"align":["left"]},{"label":["1985"],"name":[39],"type":["chr"],"align":["left"]},{"label":["1986"],"name":[40],"type":["chr"],"align":["left"]},{"label":["1987"],"name":[41],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[42],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[43],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[44],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[45],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[46],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[47],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[48],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[49],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[50],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[51],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[52],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[53],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[54],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[55],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[56],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[57],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[58],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[59],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[60],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[61],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[62],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[63],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[64],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[65],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[66],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[67],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[68],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[69],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[70],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[71],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[72],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[73],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[74],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[75],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA"},{"1":"North Africa","2":"Africa","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA","36":"NA","37":"NA","38":"NA","39":"NA","40":"NA","41":"NA","42":"NA","43":"NA","44":"NA","45":"NA","46":"NA","47":"NA","48":"NA","49":"NA","50":"NA","51":"NA","52":"NA","53":"NA","54":"NA","55":"NA","56":"NA","57":"NA","58":"NA","59":"NA","60":"NA","61":"NA","62":"NA","63":"NA","64":"NA","65":"NA","66":"NA","67":"NA","68":"NA","69":"NA","70":"NA","71":"NA","72":"NA","73":"NA","74":"NA","75":"NA"},{"1":"Algeria","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"xxx","16":"...","17":"66.436300146240882","18":"99.856999914929133","19":"105.52839139082775","20":"104.51564291298871","21":"99.249350828225715","22":"99.249350828225715","23":"99.249350828225715","24":"98.844251437090094","25":"99.946261073475782","26":"109.94284132833093","27":"136.75709779179812","28":"260.1686300304969","29":"332.25215918327041","30":"480.64037350317733","31":"471.66944795454771","32":"627.85244206863513","33":"711.68124735614174","34":"890.17446481387378","35":"806.56933460926223","36":"932.45270774946152","37":"952.43067156698964","38":"929.29082127154925","39":"953.2996539241816","40":"1127.1032171353716","41":"1196.9713840329584","42":"1028.6114252963346","43":"854.30094525113816","44":"904.2691551558413","45":"565.09806256732838","46":"1053.3016426926056","47":"1276.9110831255837","48":"1334.9116476746008","49":"1234.6551915858731","50":"1452.4310077462744","51":"1752.395277547208","52":"1910.9620524693985","53":"1826.4965699771233","54":"1881.1636491194504","55":"2091.6272744932976","56":"2100.6025207732246","57":"2206.3957620001293","58":"2802.2247941316059","59":"2924.8201669571195","60":"3093.9782453686748","61":"3945.8151254683057","62":"5172.3369070402641","63":"5280.5881559422633","64":"5671.3091173070197","65":"8652.2370400025229","66":"9326.2871440363178","67":"10161.588239148075","68":"9724.3799719232557","69":"10412.714002896393","70":"10217.081699569308","71":"10073.364021301344","72":"9583.7242883703002","73":"10303.60057521065","74":"9708.2774402272553","75":"9112.4611053489425"},{"1":"Libya","2":"North Africa","3":"xxx","4":"xxx","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"...","12":"...","13":"5.5719977712008912","14":"5.5719977712008912","15":"7.1679971328011476","16":"16.687993324802672","17":"18.67599252960299","18":"21.475991409603434","19":"29.119988352004658","20":"58.519976592009364","21":"79.519968192012726","22":"95.47996180801529","23":"143.0799427680229","24":"242.47990300803883","25":"243.03587164562788","26":"202.76822710041438","27":"298.30748001839839","28":"431.68237904955566","29":"287.78825269970378","30":"326.2951315820585","31":"479.64708783283959","32":"729.94180056814525","33":"853.56914855886316","34":"1074.1392530341056","35":"557.33452231364765","36":"709.33245060850584","37":"...","38":"...","39":"...","40":"...","41":"...","42":"...","43":"...","44":"...","45":"...","46":"...","47":"...","48":"...","49":"...","50":"...","51":"1251.9908172874545","52":"1443.6217582671406","53":"1153.4870884907862","54":"1085.5346648704581","55":"819.74799360067686","56":"452.51361475745267","57":"541.40176651662102","58":"685.07322007402468","59":"690.93076934835449","60":"614.35629620043096","61":"639.13704618893746","62":"1100.0686521298505","63":"...","64":"...","65":"...","66":"2987.4134077326698","67":"3964.690154136521","68":"3755.6524963509291","69":"...","70":"...","71":"...","72":"...","73":"...","74":"...","75":"..."},{"1":"Morocco","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"23.714285714285712","11":"35.401979723307051","12":"41.692277637215241","13":"41.880517347567228","14":"41.596762368861519","15":"48.275957466569444","16":"53.848540358739967","17":"74.893933196192478","18":"69.99322200024109","19":"63.175700376840979","20":"67.938085047100188","21":"70.348918780592399","22":"90.900288312001408","23":"84.972008639479583","24":"88.924195087827471","25":"111.28801020206102","26":"140.44699160366511","27":"185.78399384453559","28":"241.88916121443464","29":"413.32612788680541","30":"577.2394333051991","31":"731.45547203748322","32":"772.5593819524945","33":"896.35380200198506","34":"1117.9556221660548","35":"975.58146279218147","36":"959.48544085857259","37":"628.15342299319957","38":"512.4544012058285","39":"692.47204968944095","40":"728.54563268031859","41":"815.38610613656999","42":"917.26914479574634","43":"990.55509020201055","44":"1069.7204919962048","45":"1148.4457104134244","46":"1228.5265528756001","47":"1251.7865381327088","48":"1365.2500187444784","49":"1437.8987007390892","50":"1447.1286892430828","51":"1400.9495009504456","52":"1444.9597164638781","53":"1007.8107629008141","54":"1043.4234302062941","55":"1470.3176147925328","56":"1474.8743262617281","57":"1819.2300702499797","58":"1937.523821552049","59":"2031.1313805624586","60":"2134.5948760627498","61":"2408.3502495627008","62":"2944.9584727359997","63":"3055.0694418587332","64":"3160.804832033607","65":"3342.6989556074454","66":"3402.700835840546","67":"4065.5523169353401","68":"4048.6125243501792","69":"3268.3633756657109","70":"3327.0318896485569","71":"3461.461531383587","72":"3696.8569447441005","73":"3721.3238374528701","74":"4830.9563935116921","75":"5378.3665352074695"},{"1":"Tunisia","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"3.7142857142857144","11":"6.4111498257839719","12":"9.5238095238095237","13":"14.285714285714285","14":"15.952380952380953","15":"18.571428571428569","16":"14.285714285714285","17":"15.238095238095239","18":"17.478991596638657","19":"12.761904761904761","20":"13.714285714285715","21":"15.428571428571427","22":"17.523809523809522","23":"16.952380952380953","24":"22.476190476190474","25":"24.860541921566902","26":"31.65067713584429","27":"38.188218104536098","28":"46.505447781025772","29":"75.323106295072677","30":"83.960118943501826","31":"121.69250495395734","32":"148.4966516167633","33":"160.90064999926196","34":"194.09611955925857","35":"228.83573239584933","36":"328.60042628329393","37":"383.48947429677634","38":"249.4744687725676","39":"215.9387222946545","40":"206.79345464712247","41":"194.4097834822883","42":"232.92034077714723","43":"234.06202959799688","44":"247.85588153923399","45":"260.43103066012992","46":"289.67711516870128","47":"276.16713491541628","48":"297.06885472789287","49":"342.90245836637592","50":"397.46950918833619","51":"358.1665777504499","52":"365.84937473654634","53":"357.01339537863652","54":"332.38976274549862","55":"335.6479068054021","56":"345.42423666940982","57":"407.38556105738633","58":"444.65141673424489","59":"468.46457997733978","60":"497.21266397199133","61":"490.65055878129488","62":"578.9114873309851","63":"564.77593370214845","64":"571.18904568953462","65":"715.23959709613712","66":"681.22595061111861","67":"759.35888124284475","68":"908.35728759247911","69":"979.49404192952272","70":"987.73470521580032","71":"858.9495812565691","72":"844.22736712851361","73":"1000.922131147541","74":"1157.3723670117815","75":"1250.4543802253725"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Now that I had my proof of concept for cleaning one of the sheets, in a format I wanted, it was time to clean the other sheets as well. I could have taken the above code and modified it to work for each of the other tabs individually however I took the opportunity to practice with functions and created the below function to clean any of the tabs once they were loaded in and lightly pre-processed.</p>
</section>
<section id="clean-and-format-function-1" class="level2">
<h2 class="anchored" data-anchor-id="clean-and-format-function-1">Clean and format function</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a function to clean the other sheets</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="do">##Input: a partially cleaned tibble, must have been read in and had excess rows trimmed</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="do">##output: tibble with regions correctly labeled and umbrella region categories i.e Africa above south Africa removed</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="do">##Note: All sub categories contained the main category name in them, will use regex to create groupings in the future.</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>CleanData <span class="ot">&lt;-</span> <span class="cf">function</span>(inSheet){</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">nrow</span>(<span class="fu">select</span>(inSheet,<span class="dv">2</span>))))</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> inSheet <span class="sc">%&gt;%</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Region =</span> emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(output<span class="sc">$</span>Country)){</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(output[[(i<span class="sc">+</span><span class="dv">1</span>),<span class="dv">3</span>]]))</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>      output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>]</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]))</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>       output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i]</span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fill</span>(Region)</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># removing header rows</span></span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(output[[<span class="dv">3</span>]]))</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Below I call the function on each of the tibbles loaded in earlier. For the sake of space I will only show one tab being cleaned.</p>
<p>Before:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[13],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[14],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[15],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[16],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[17],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[18],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[19],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[20],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[21],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[22],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[23],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[24],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[25],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[26],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[27],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[28],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[29],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[30],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[31],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[32],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[33],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[34],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[35],"type":["chr"],"align":["left"]}],"data":[{"1":"Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA"},{"1":"North Africa","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"NA","32":"NA","33":"NA","34":"NA","35":"NA"},{"1":"Algeria","2":"...","3":"...","4":"5.6826154062017679E-2","5":"4.3562992947460667E-2","6":"7.450020082662831E-2","7":"7.6341156103707189E-2","8":"0.10132172896437502","9":"9.9895600804637705E-2","10":"0.10974056353150458","11":"0.11964798697580206","12":"0.12817517548036572","13":"0.11756226312939903","14":"0.12017091608509135","15":"0.12225706041052876","16":"0.10794210928864487","17":"0.10096289718178453","18":"0.1067413621853408","19":"0.10455123752136684","20":"9.1628910393499588E-2","21":"8.7955261729754125E-2","22":"7.9704112405217672E-2","23":"9.0341692386891853E-2","24":"9.4441832663971326E-2","25":"0.10781046571758186","26":"0.10245186679329056","27":"0.13387972472710172","28":"0.13664344834713668","29":"0.13687051931270997","30":"0.1532439766308818","31":"0.15355675078920666","32":"0.14463099790871009","33":"0.15888711845293033","34":"0.17392426654392509","35":"0.15239467793181341"},{"1":"Libya","2":"...","3":"...","4":"...","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"0.11687259469313348","12":"0.14213518635502212","13":"0.11525204653166739","14":"0.10267774699907664","15":"6.296813507680589E-2","16":"5.2401348765150825E-2","17":"4.8359240069084632E-2","18":"4.8999725952315706E-2","19":"5.0238968545070581E-2","20":"3.5877828657804652E-2","21":"2.8092038848470082E-2","22":"3.0918362659071073E-2","23":"...","24":"...","25":"...","26":"8.1976162512505973E-2","27":"7.4022141304986189E-2","28":"0.10906787784726342","29":"...","30":"...","31":"...","32":"...","33":"...","34":"...","35":"..."},{"1":"Morocco","2":"...","3":"...","4":"0.14500213794691316","5":"0.1580369843527738","6":"0.15112961788945883","7":"0.15810920945395274","8":"0.16298256537982569","9":"0.16003961892846438","10":"0.17613953748184558","11":"0.1778011642932314","12":"0.17034282137202195","13":"0.1213568980975424","14":"0.10904244856209921","15":"0.14526589979371352","16":"0.1249913488822756","17":"0.13397430966848703","18":"0.12266548632132046","19":"0.10512856442233588","20":"0.11060904195779477","21":"0.10652542464392539","22":"0.10411118865488914","23":"0.10812033575943389","24":"0.10913528591352858","25":"9.7564319499514746E-2","26":"9.8328482774095671E-2","27":"0.11556215358914615","28":"0.11078307233092348","29":"0.10417621519276599","30":"0.10444783017841253","31":"0.10592541288624464","32":"0.10489648333575195","33":"0.10473610517472623","34":"0.11699027145050786","35":"0.13196374222575097"},{"1":"Tunisia","2":"...","3":"...","4":"...","5":"6.3268523384130318E-2","6":"6.329051383399209E-2","7":"6.1916461916461912E-2","8":"6.4017895185342996E-2","9":"6.2582014666152055E-2","10":"6.674141797481456E-2","11":"6.7090108401084009E-2","12":"6.6168996188055898E-2","13":"6.1788736504231105E-2","14":"6.1376801832143335E-2","15":"6.0453179769654475E-2","16":"5.8983905837136676E-2","17":"6.026406429391503E-2","18":"5.9053103007037741E-2","19":"6.0065223836347471E-2","20":"6.0339168490153174E-2","21":"5.1545461998852175E-2","22":"5.1974642961235794E-2","23":"5.0290160907412292E-2","24":"5.1508851508851511E-2","25":"5.3294871116286453E-2","26":"5.079001384314287E-2","27":"5.0644499178981936E-2","28":"6.5263024249862453E-2","29":"7.7959912359003486E-2","30":"8.1760055531988743E-2","31":"7.0733372009691833E-2","32":"6.8901573588398657E-2","33":"8.0702189178025616E-2","34":"7.8554812445478336E-2","35":"7.8592643363034037E-2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_CurrentUSD)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGovSpend)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGDP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>After:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["1949"],"name":[3],"type":["chr"],"align":["left"]},{"label":["1950"],"name":[4],"type":["chr"],"align":["left"]},{"label":["1951"],"name":[5],"type":["chr"],"align":["left"]},{"label":["1952"],"name":[6],"type":["chr"],"align":["left"]},{"label":["1953"],"name":[7],"type":["chr"],"align":["left"]},{"label":["1954"],"name":[8],"type":["chr"],"align":["left"]},{"label":["1955"],"name":[9],"type":["chr"],"align":["left"]},{"label":["1956"],"name":[10],"type":["chr"],"align":["left"]},{"label":["1957"],"name":[11],"type":["chr"],"align":["left"]},{"label":["1958"],"name":[12],"type":["chr"],"align":["left"]},{"label":["1959"],"name":[13],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[14],"type":["chr"],"align":["left"]},{"label":["1961"],"name":[15],"type":["chr"],"align":["left"]},{"label":["1962"],"name":[16],"type":["chr"],"align":["left"]},{"label":["1963"],"name":[17],"type":["chr"],"align":["left"]},{"label":["1964"],"name":[18],"type":["chr"],"align":["left"]},{"label":["1965"],"name":[19],"type":["chr"],"align":["left"]},{"label":["1966"],"name":[20],"type":["chr"],"align":["left"]},{"label":["1967"],"name":[21],"type":["chr"],"align":["left"]},{"label":["1968"],"name":[22],"type":["chr"],"align":["left"]},{"label":["1969"],"name":[23],"type":["chr"],"align":["left"]},{"label":["1970"],"name":[24],"type":["chr"],"align":["left"]},{"label":["1971"],"name":[25],"type":["chr"],"align":["left"]},{"label":["1972"],"name":[26],"type":["chr"],"align":["left"]},{"label":["1973"],"name":[27],"type":["chr"],"align":["left"]},{"label":["1974"],"name":[28],"type":["chr"],"align":["left"]},{"label":["1975"],"name":[29],"type":["chr"],"align":["left"]},{"label":["1976"],"name":[30],"type":["chr"],"align":["left"]},{"label":["1977"],"name":[31],"type":["chr"],"align":["left"]},{"label":["1978"],"name":[32],"type":["chr"],"align":["left"]},{"label":["1979"],"name":[33],"type":["chr"],"align":["left"]},{"label":["1980"],"name":[34],"type":["chr"],"align":["left"]},{"label":["1981"],"name":[35],"type":["chr"],"align":["left"]},{"label":["1982"],"name":[36],"type":["chr"],"align":["left"]},{"label":["1983"],"name":[37],"type":["chr"],"align":["left"]},{"label":["1984"],"name":[38],"type":["chr"],"align":["left"]},{"label":["1985"],"name":[39],"type":["chr"],"align":["left"]},{"label":["1986"],"name":[40],"type":["chr"],"align":["left"]},{"label":["1987"],"name":[41],"type":["chr"],"align":["left"]},{"label":["1988"],"name":[42],"type":["chr"],"align":["left"]},{"label":["1989"],"name":[43],"type":["chr"],"align":["left"]},{"label":["1990"],"name":[44],"type":["chr"],"align":["left"]},{"label":["1991"],"name":[45],"type":["chr"],"align":["left"]},{"label":["1992"],"name":[46],"type":["chr"],"align":["left"]},{"label":["1993"],"name":[47],"type":["chr"],"align":["left"]},{"label":["1994"],"name":[48],"type":["chr"],"align":["left"]},{"label":["1995"],"name":[49],"type":["chr"],"align":["left"]},{"label":["1996"],"name":[50],"type":["chr"],"align":["left"]},{"label":["1997"],"name":[51],"type":["chr"],"align":["left"]},{"label":["1998"],"name":[52],"type":["chr"],"align":["left"]},{"label":["1999"],"name":[53],"type":["chr"],"align":["left"]},{"label":["2000"],"name":[54],"type":["chr"],"align":["left"]},{"label":["2001"],"name":[55],"type":["chr"],"align":["left"]},{"label":["2002"],"name":[56],"type":["chr"],"align":["left"]},{"label":["2003"],"name":[57],"type":["chr"],"align":["left"]},{"label":["2004"],"name":[58],"type":["chr"],"align":["left"]},{"label":["2005"],"name":[59],"type":["chr"],"align":["left"]},{"label":["2006"],"name":[60],"type":["chr"],"align":["left"]},{"label":["2007"],"name":[61],"type":["chr"],"align":["left"]},{"label":["2008"],"name":[62],"type":["chr"],"align":["left"]},{"label":["2009"],"name":[63],"type":["chr"],"align":["left"]},{"label":["2010"],"name":[64],"type":["chr"],"align":["left"]},{"label":["2011"],"name":[65],"type":["chr"],"align":["left"]},{"label":["2012"],"name":[66],"type":["chr"],"align":["left"]},{"label":["2013"],"name":[67],"type":["chr"],"align":["left"]},{"label":["2014"],"name":[68],"type":["chr"],"align":["left"]},{"label":["2015"],"name":[69],"type":["chr"],"align":["left"]},{"label":["2016"],"name":[70],"type":["chr"],"align":["left"]},{"label":["2017"],"name":[71],"type":["chr"],"align":["left"]},{"label":["2018"],"name":[72],"type":["chr"],"align":["left"]},{"label":["2019"],"name":[73],"type":["chr"],"align":["left"]},{"label":["2020"],"name":[74],"type":["chr"],"align":["left"]},{"label":["2021"],"name":[75],"type":["chr"],"align":["left"]}],"data":[{"1":"Algeria","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"xxx","16":"...","17":"2.5114854517611026E-2","18":"3.4964539007092198E-2","19":"3.4186351706036747E-2","20":"3.5125936010891763E-2","21":"3.0191004313000615E-2","22":"2.6147278548559232E-2","23":"2.3868673583710847E-2","24":"2.1305391835843703E-2","25":"2.0875850340136056E-2","26":"1.7958439664600801E-2","27":"1.6881619937694704E-2","28":"1.9576681485214451E-2","29":"2.1310942930457662E-2","30":"2.701721228484644E-2","31":"2.2419504590731422E-2","32":"2.3752289377289376E-2","33":"2.1386958657963077E-2","34":"2.102063295734953E-2","35":"1.818048874752571E-2","36":"2.0630974406413816E-2","37":"1.9512132516513226E-2","38":"1.7551240070341399E-2","39":"1.6437068968473613E-2","40":"1.7872136664519762E-2","41":"1.8563762767583609E-2","42":"1.7496987492702398E-2","43":"1.5401237785633725E-2","44":"1.4610705859434187E-2","45":"1.2108340592460793E-2","46":"2.1401321298967154E-2","47":"2.5056315771778234E-2","48":"3.1464300121016538E-2","49":"2.9350271073671191E-2","50":"3.0940883958553014E-2","51":"3.6374034681332434E-2","52":"3.9656737879307118E-2","53":"3.755079982706442E-2","54":"3.4333856350536318E-2","55":"3.8206954633307394E-2","56":"3.7008293589990207E-2","57":"3.251210893471837E-2","58":"3.2838845233139048E-2","59":"2.8341783501146526E-2","60":"2.6438075477202047E-2","61":"2.9233210269766888E-2","62":"3.0247471409038638E-2","63":"3.8485136982934438E-2","64":"3.5180126088261786E-2","65":"4.3257063586106898E-2","66":"4.4610786200769914E-2","67":"4.8445089170405874E-2","68":"5.5484833358485315E-2","69":"6.2702428562350768E-2","70":"6.3849289830186534E-2","71":"5.9243833268853449E-2","72":"5.4678243562887134E-2","73":"6.0210459935367645E-2","74":"6.6599937269506193E-2","75":"5.5925840707654932E-2"},{"1":"Libya","2":"North Africa","3":"xxx","4":"xxx","5":"...","6":"...","7":"...","8":"...","9":"...","10":"...","11":"...","12":"...","13":"...","14":"1.592E-2","15":"1.8550724637681159E-2","16":"3.1041666666666665E-2","17":"2.4079422382671481E-2","18":"1.8437499999999999E-2","19":"1.8571428571428572E-2","20":"2.9149232914923291E-2","21":"3.3609467455621302E-2","22":"2.8559463986599663E-2","23":"3.7628865979381441E-2","24":"6.0729312762973352E-2","25":"5.3226797787338659E-2","26":"3.7096774193548385E-2","27":"3.9848619768477291E-2","28":"3.291269636878702E-2","29":"2.253968253968254E-2","30":"1.9686162624821684E-2","31":"2.4639944473364567E-2","32":"3.799226441631505E-2","33":"3.2207494264593427E-2","34":"2.9223643581826202E-2","35":"1.7551137632830199E-2","36":"2.2405257767156028E-2","37":"...","38":"...","39":"...","40":"...","41":"...","42":"...","43":"...","44":"...","45":"...","46":"...","47":"...","48":"...","49":"...","50":"...","51":"4.0780267156689518E-2","52":"5.2974415319416102E-2","53":"3.7838602447132046E-2","54":"3.1468636735809602E-2","55":"2.4135078584983698E-2","56":"2.0692385202245575E-2","57":"2.0720480715152593E-2","58":"2.0710744567483667E-2","59":"1.5281111599445552E-2","60":"1.1203354064860062E-2","61":"9.4667751725464652E-3","62":"1.4898510813042507E-2","63":"...","64":"...","65":"...","66":"3.7456038271920247E-2","67":"7.6393308482589323E-2","68":"0.15479576301383174","69":"...","70":"...","71":"...","72":"...","73":"...","74":"...","75":"..."},{"1":"Morocco","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"1.1806543385490753E-2","11":"1.7590027700831026E-2","12":"2.1419828641370868E-2","13":"2.4697336561743343E-2","14":"2.3157315731573157E-2","15":"2.7024336283185842E-2","16":"2.5659133709981168E-2","17":"3.1956155143338952E-2","18":"2.8358686949559647E-2","19":"2.4293313069908815E-2","20":"2.6775700934579438E-2","21":"2.6176470588235294E-2","22":"3.0045721750489876E-2","23":"2.3902167871039465E-2","24":"2.3160061760164694E-2","25":"2.6286248830682882E-2","26":"2.8439153439153438E-2","27":"3.0617977528089889E-2","28":"3.1458333333333331E-2","29":"4.6029128881560868E-2","30":"6.2204340404779325E-2","31":"6.6197749196141478E-2","32":"5.8368087035358111E-2","33":"5.6334622823984527E-2","34":"5.9400728843298688E-2","35":"6.3845939722144904E-2","36":"6.2208682734641592E-2","37":"4.5056585503621072E-2","38":"4.0181908796411661E-2","39":"5.3904352265870384E-2","40":"4.3044595576783307E-2","41":"4.3693147945152791E-2","42":"4.1285158177531665E-2","43":"4.3929174133616161E-2","44":"4.1488250407024349E-2","45":"4.1428429374036693E-2","46":"4.2980482787728293E-2","47":"4.6555716874047588E-2","48":"4.4938193888062264E-2","49":"4.3474104939692074E-2","50":"3.9490929265743616E-2","51":"4.1926594063430515E-2","52":"3.4563343607372982E-2","53":"2.4207632362230638E-2","54":"2.6851723067910602E-2","55":"3.7261358827697072E-2","56":"3.4917879924795586E-2","57":"3.4942075415127068E-2","58":"3.24946757487646E-2","59":"3.2579967820796758E-2","60":"3.1097963340993549E-2","61":"3.0469536640660232E-2","62":"3.183501427557224E-2","63":"3.2886518464681228E-2","64":"3.3907961010624196E-2","65":"3.2974952352035236E-2","66":"3.4627500793153757E-2","67":"3.805782901206451E-2","68":"3.6778563524448443E-2","69":"3.2301533478414898E-2","70":"3.2195264409866621E-2","71":"3.1830412387131725E-2","72":"3.1185875547766636E-2","73":"3.0999359701871697E-2","74":"4.2810288813703377E-2","75":"4.1835129927529455E-2"},{"1":"Tunisia","2":"North Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"...","11":"...","12":"...","13":"...","14":"2.0047875523638539E-2","15":"2.215909090909091E-2","16":"1.7296050735082155E-2","17":"1.5080113100848256E-2","18":"1.7441860465116279E-2","19":"1.2877186238708439E-2","20":"1.3174748398902104E-2","21":"1.4210526315789474E-2","22":"1.4426846479535831E-2","23":"1.3142350856467809E-2","24":"1.5616728427739545E-2","25":"1.4752610077167499E-2","26":"1.4145199063231851E-2","27":"1.3984191783201599E-2","28":"1.3115389585217728E-2","29":"1.7399793269782932E-2","30":"1.8623900672529746E-2","31":"2.3814955061818514E-2","32":"2.4880228672651879E-2","33":"2.238193018480493E-2","34":"2.0287193436513376E-2","35":"2.4810777927009635E-2","36":"3.691903568811724E-2","37":"4.1672583490452685E-2","38":"2.7553414597423713E-2","39":"2.3355734273438362E-2","40":"2.0866761028820277E-2","41":"1.8231845930829667E-2","42":"2.1034758517182176E-2","43":"2.1145503906303528E-2","44":"1.8394565888667502E-2","45":"1.8337085277650732E-2","46":"1.7061258775943253E-2","47":"1.7321139551022567E-2","48":"1.7421232116496505E-2","49":"1.7447075858250335E-2","50":"1.8675352290320298E-2","51":"1.726384544322317E-2","52":"1.6779715154667404E-2","53":"1.5560757573087424E-2","54":"1.5479040325129019E-2","55":"1.5211124733645772E-2","56":"1.4926429262433922E-2","57":"1.4838857036399511E-2","58":"1.4259020629651297E-2","59":"1.4516014162102771E-2","60":"1.4463624243598759E-2","61":"1.2609938563665496E-2","62":"1.2906249257454167E-2","63":"1.2949496088006997E-2","64":"1.2966500421308178E-2","65":"1.5612733232168574E-2","66":"1.5123424535955228E-2","67":"1.6416160261596952E-2","68":"1.9081606517325794E-2","69":"2.2698651595662991E-2","70":"2.3608197371175577E-2","71":"2.1443021070998568E-2","72":"2.1133848612123463E-2","73":"2.5645593317689494E-2","74":"2.907744469754911E-2","75":"2.8289774858020342E-2"},{"1":"Angola","2":"sub-Saharan Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"xxx","15":"xxx","16":"xxx","17":"xxx","18":"xxx","19":"xxx","20":"xxx","21":"xxx","22":"xxx","23":"xxx","24":"xxx","25":"xxx","26":"xxx","27":"xxx","28":"xxx","29":"...","30":"...","31":"...","32":"...","33":"...","34":"...","35":"...","36":"...","37":"...","38":"...","39":"1.7149999999999999E-7","40":"1.73E-7","41":"0.2225","42":"0.21980499999999994","43":"0.19432333333333335","44":"0.17463666666666666","45":"7.1025000000000005E-2","46":"5.6828305425813817E-2","47":"0.17522589075574097","48":"5.7092806908360397E-2","49":"4.7073927682623334E-2","50":"2.4478481567170522E-2","51":"5.9722682071949675E-2","52":"2.6420118810629757E-2","53":"0.17334692213615979","54":"6.3926031542740444E-2","55":"4.5243538152146129E-2","56":"2.8699324451257544E-2","57":"3.7614790735473386E-2","58":"3.471180186727791E-2","59":"3.6922409469853076E-2","60":"3.7614953054353195E-2","61":"3.1140544929574229E-2","62":"3.573120364491604E-2","63":"4.7096100483205054E-2","64":"4.1775845655398387E-2","65":"3.2556603512937633E-2","66":"3.236659499216598E-2","67":"4.4552394215510917E-2","68":"4.6984545156441432E-2","69":"3.1054262930828039E-2","70":"2.7333406553071923E-2","71":"2.5079854558752172E-2","72":"1.8717758661964221E-2","73":"1.6437402833203805E-2","74":"1.4441630818426953E-2","75":"1.1320598213115518E-2"},{"1":"Benin","2":"sub-Saharan Africa","3":"xxx","4":"xxx","5":"xxx","6":"xxx","7":"xxx","8":"xxx","9":"xxx","10":"xxx","11":"xxx","12":"xxx","13":"xxx","14":"8.7158469945355192E-3","15":"1.3952879581151833E-2","16":"1.7516339869281045E-2","17":"1.7368421052631578E-2","18":"2.1816990098082821E-2","19":"2.106508875739645E-2","20":"1.9002325967768734E-2","21":"1.9762521056740211E-2","22":"2.0721247563352828E-2","23":"1.8947368421052633E-2","24":"1.6252815194158741E-2","25":"1.6010420341374725E-2","26":"1.4877943088256537E-2","27":"1.6775280898876404E-2","28":"1.4423791821561338E-2","29":"1.4929078014184397E-2","30":"1.2816479400749063E-2","31":"1.6787878787878789E-2","32":"1.1943069306930693E-2","33":"1.9304600344134469E-2","34":"2.031651419102409E-2","35":"1.5513713192303604E-2","36":"1.0492986496015506E-2","37":"1.1889706765480491E-2","38":"1.4586989402379652E-2","39":"1.3049319324108801E-2","40":"1.3550965400694807E-2","41":"1.5695985002417128E-2","42":"1.5640912047020762E-2","43":"1.3078960611848916E-2","44":"1.2251571212605684E-2","45":"...","46":"...","47":"...","48":"...","49":"...","50":"...","51":"...","52":"...","53":"4.85389230497635E-3","54":"4.1285230240838324E-3","55":"3.5797112730621473E-3","56":"6.2281945820977591E-3","57":"6.4722322680875674E-3","58":"6.7614985043211329E-3","59":"6.8097068499347914E-3","60":"6.6572332394775058E-3","61":"...","62":"6.6395897962646718E-3","63":"...","64":"...","65":"...","66":"7.0205615778774454E-3","67":"6.8723968349625368E-3","68":"7.0092494879796796E-3","69":"7.9848470490941834E-3","70":"6.7359672701681455E-3","71":"9.2061312442598079E-3","72":"6.3285754014759986E-3","73":"4.7293484122412788E-3","74":"4.706349168413902E-3","75":"5.6062137436351757E-3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="pivoting-and-restructuring-1" class="level2">
<h2 class="anchored" data-anchor-id="pivoting-and-restructuring-1">Pivoting and Restructuring</h2>
<section id="pivot-and-notation-changes-1" class="level3">
<h3 class="anchored" data-anchor-id="pivot-and-notation-changes-1">Pivot and Notation Changes</h3>
<p>Next I pivot the years, it should be noted that both the pivoting and Converting of notation could be handled by the clean function above, i kept the steps separate so that I could show the progression of the dataframe.</p>
<p>I must also handle the xxx and … notations. From the information page of my data set I can see that the notation is described as follows:</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Raw Notation</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>…</td>
<td>Data unavailable</td>
</tr>
<tr class="even">
<td>xxx</td>
<td>Country did not exist or was not independent during all or part of the year in question</td>
</tr>
</tbody>
</table>
<p>For now I think I will just keep both as NA but will save this form of the information for future use.</p>
<p>After pivot and notation changes:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> Cleaned_currentUSD <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_currentUSD),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> Cleaned_ShareOfGovSpend <span class="sc">%&gt;%</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGovSpend),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> Cleaned_ShareOfGDP <span class="sc">%&gt;%</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGDP),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_currentUSD)</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGovSpend)</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>df3<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a><span class="co">#df1</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a><span class="co">#df2</span></span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a><span class="co"># share of GDP</span></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>df3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["chr"],"align":["left"]},{"label":["value"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Algeria","2":"North Africa","3":"1949","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1951","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1952","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1953","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1954","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="converting-column-types-1" class="level3">
<h3 class="anchored" data-anchor-id="converting-column-types-1">Converting Column Types</h3>
<p>Finally I will convert the column types to their correct representation.</p>
<p>Before:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["chr"],"align":["left"]},{"label":["value"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Algeria","2":"North Africa","3":"1949","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1951","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1952","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1953","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1954","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Year to Number</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_currentUSD<span class="sc">$</span>Year)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>Year)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGDP<span class="sc">$</span>Year)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co"># value to double</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_currentUSD<span class="sc">$</span>value)</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>value)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGDP<span class="sc">$</span>value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>After:</p>
<div class="cell">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["int"],"align":["right"]},{"label":["value"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Algeria","2":"North Africa","3":"1949","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1951","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1952","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1953","4":"NA"},{"1":"Algeria","2":"North Africa","3":"1954","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell">

</div>
</section>
<section id="joining-of-the-different-tabs-1" class="level3">
<h3 class="anchored" data-anchor-id="joining-of-the-different-tabs-1">Joining of the Different Tabs</h3>
<p>Here we do a full join to maintain data from all the different tabs. The years when share of Gov spend are unavaiable will then show NA as intended.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(Cleaned_currentUSD)</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(Cleaned_ShareOfGovSpend)</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(Cleaned_ShareOfGDP)</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>MilitarySpend<span class="ot">&lt;-</span> <span class="fu">full_join</span>(Cleaned_currentUSD,Cleaned_ShareOfGovSpend,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>MilitarySpend <span class="ot">&lt;-</span> <span class="fu">full_join</span>(MilitarySpend,Cleaned_ShareOfGDP,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(MilitarySpend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Year"],"name":[3],"type":["int"],"align":["right"]},{"label":["MilitarySpend_currentUSD"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["MilitarySpend_ShareofGovSpend"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["MilitarySpend_ShareofGDP"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Algeria","2":"North Africa","3":"1949","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1950","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1951","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1952","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1953","4":"NA","5":"NA","6":"NA"},{"1":"Algeria","2":"North Africa","3":"1954","4":"NA","5":"NA","6":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(MilitarySpend)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="extra-vizualizations" class="level2">
<h2 class="anchored" data-anchor-id="extra-vizualizations">extra Vizualizations</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>byRegionStats_year_top6<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend <span class="sc">==</span> <span class="st">'MilitarySpend_currentUSD'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">==</span> top6_mean)<span class="sc">%&gt;%</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co"># add global average overlay</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>GlobalAverage<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">GlobalAverage =</span> <span class="fu">mean</span>(Spend),<span class="at">GlobalStandardDev =</span> <span class="fu">sd</span>(Spend))</span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6<span class="ot">&lt;-</span> byRegionStats_year_top6<span class="sc">%&gt;%</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region, <span class="at">alpha=</span><span class="fl">0.9</span>,)) <span class="sc">+</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> GlobalAverage,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>GlobalAverage))<span class="sc">+</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Raw Mean Spend in USD for top 6 Spenders with Global Average Overlay"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Final-Project-_-JulianCastoro_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="animations" class="level2">
<h2 class="anchored" data-anchor-id="animations">Animations</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># animationWIP&lt;-combinedData%&gt;%</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(Country,viewOfSpend,Year)%&gt;%</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_wider(names_from = viewOfSpend,values_from = Spend)</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(animationWIP, aes(x=`Year`,y=`MilitarySpend_currentUSD`, color = Country,size= MilitarySpend_ShareofGDP))+</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point(alpha = 0.6,)+</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_radius(limits = c(0, NA), range = c(2, 12)) +</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   facet_wrap(vars(Region),scales = "free_y")+</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = 'Year: {frame_time}', x = 'Share of Gov Spend', y= 'raw USD')+</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position = "none")</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="co"># myAnimation&lt;- ggplot(animationWIP, aes(x=`Year`,y=`MilitarySpend_currentUSD`, color = Country,size= MilitarySpend_ShareofGDP))+</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point(alpha = 0.6,)+</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_radius(limits = c(0, NA), range = c(2, 12)) +</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   facet_wrap(vars(Region),scales = "free_y")+</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = 'Year: {frame_time}', x = 'Year', y= 'raw USD')+</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position = "none")+</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   transition_time(`Year`)+</span></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   ease_aes('linear')</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a><span class="co"># animate(myAnimation,duration = 15,fps = 20,width=600,height = 600, renderer = gifski_renderer())</span></span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a><span class="co"># anim_save("GovSpend_VS_RawUSD.gif")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># world_map&lt;-map_data("world")%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(! long&gt;180)</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co"># gsub("USA","United states of America",world_map)</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co"># view(world_map)</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co"># dataForMap&lt;- combinedData %&gt;%</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(viewOfSpend == "MilitarySpend_currentUSD")%&gt;%</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   rename(region=Country)</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="co"># view(dataForMap)</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="co"># worldMapCountries&lt;-world_map%&gt;%</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   distinct(region)</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="co"># mapAnimationData&lt;-left_join(world_map,dataForMap)%&gt;%</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(viewOfSpend=="MilitarySpend_currentUSD")</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a><span class="co"># test&lt;-mapAnimationData%&gt;%</span></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(long,lat,region)%&gt;%</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarize(mean = mean(Spend, na.rm=TRUE))</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="co"># test%&gt;%</span></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(fill=mean, map_id=region))+</span></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_map(map=world_map)</span></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a><span class="co"># test %&gt;% </span></span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(map_id = region,fill=mean)) +</span></span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_map(map = world_map) +</span></span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a><span class="co">#   expand_limits(x = world_map$long, y = world_map$lat)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/601_Fall_2022" data-repo-id="R_kgDOH564Gw" data-category="Announcements" data-category-id="DIC_kwDOH564G84CRdBB" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb62" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Global Military Spending - An Analysis"</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "WIP Final Project"</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Julian Castoro"</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r Sys.Date()`"</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> </span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="co">  markdown: </span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a><span class="co">    wrap: 72</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="an">tags:</span><span class="co"> </span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a><span class="co">  - Julian Castoro</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a><span class="co">  - Final Project</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a><span class="co">#output: NOT DISTILL</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE, message=FALSE}</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>,<span class="at">decimals=</span><span class="dv">2</span>)</span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a><span class="al">![Global Government spending(current USD), Size correlates with Share of GDP](GovSpend_VS_RawUSD.gif)</span></span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-55"><a href="#cb62-55" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data choice overview</span></span>
<span id="cb62-56"><a href="#cb62-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-57"><a href="#cb62-57" aria-hidden="true" tabindex="-1"></a>I initially chose this data set because recent events abroad have</span>
<span id="cb62-58"><a href="#cb62-58" aria-hidden="true" tabindex="-1"></a>certainly escalated a global fear of war and I wanted to see how the</span>
<span id="cb62-59"><a href="#cb62-59" aria-hidden="true" tabindex="-1"></a>tides of military spending ebbed and flowed over the course of recent</span>
<span id="cb62-60"><a href="#cb62-60" aria-hidden="true" tabindex="-1"></a>history. The more I cleaned the data and played around with</span>
<span id="cb62-61"><a href="#cb62-61" aria-hidden="true" tabindex="-1"></a>visualizations, the more questions I had. I am excited to see what sort</span>
<span id="cb62-62"><a href="#cb62-62" aria-hidden="true" tabindex="-1"></a>of trends come from analyzing this data set.</span>
<span id="cb62-63"><a href="#cb62-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-64"><a href="#cb62-64" aria-hidden="true" tabindex="-1"></a>I plan to show how different countries and regions value military</span>
<span id="cb62-65"><a href="#cb62-65" aria-hidden="true" tabindex="-1"></a>spending and how that value changes over the course of time. Ideally I</span>
<span id="cb62-66"><a href="#cb62-66" aria-hidden="true" tabindex="-1"></a>will be able to explain patterns in what I see with global or locally</span>
<span id="cb62-67"><a href="#cb62-67" aria-hidden="true" tabindex="-1"></a>important historic events. How did the US spending change after 9/11 or</span>
<span id="cb62-68"><a href="#cb62-68" aria-hidden="true" tabindex="-1"></a>more recently did we see anyone bolstering their defenses before news</span>
<span id="cb62-69"><a href="#cb62-69" aria-hidden="true" tabindex="-1"></a>broke of the Russian invasion of Ukraine? How did spending change</span>
<span id="cb62-70"><a href="#cb62-70" aria-hidden="true" tabindex="-1"></a>globally after the first and then second world war? While I am not a</span>
<span id="cb62-71"><a href="#cb62-71" aria-hidden="true" tabindex="-1"></a>statistical expert and will not be able to refute a causation vs</span>
<span id="cb62-72"><a href="#cb62-72" aria-hidden="true" tabindex="-1"></a>correlation argument, visualizations of these events and the</span>
<span id="cb62-73"><a href="#cb62-73" aria-hidden="true" tabindex="-1"></a>corresponding spending patterns will still be interesting and hopefully</span>
<span id="cb62-74"><a href="#cb62-74" aria-hidden="true" tabindex="-1"></a>provoking of conversation.</span>
<span id="cb62-75"><a href="#cb62-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-76"><a href="#cb62-76" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data</span></span>
<span id="cb62-77"><a href="#cb62-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-78"><a href="#cb62-78" aria-hidden="true" tabindex="-1"></a><span class="fu">### Description</span></span>
<span id="cb62-79"><a href="#cb62-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-80"><a href="#cb62-80" aria-hidden="true" tabindex="-1"></a>Below is a list of the available sheets in the SIPRI military spending</span>
<span id="cb62-81"><a href="#cb62-81" aria-hidden="true" tabindex="-1"></a>data export. A few of the tabs are the same base information altered to</span>
<span id="cb62-82"><a href="#cb62-82" aria-hidden="true" tabindex="-1"></a>reflect a specific currency or ratio. I am choosing to use the "Current</span>
<span id="cb62-83"><a href="#cb62-83" aria-hidden="true" tabindex="-1"></a>USD" as my source of raw spending numbers as I believe it to be the</span>
<span id="cb62-84"><a href="#cb62-84" aria-hidden="true" tabindex="-1"></a>easiest to understand and relate to. I will also be using "share of GDP"</span>
<span id="cb62-85"><a href="#cb62-85" aria-hidden="true" tabindex="-1"></a>as well as "Share of Govt. spending" to provide context around a nations</span>
<span id="cb62-86"><a href="#cb62-86" aria-hidden="true" tabindex="-1"></a>spending compared to their population they intend on defending as well</span>
<span id="cb62-87"><a href="#cb62-87" aria-hidden="true" tabindex="-1"></a>as compared to overall spending. The Constant (2020) USD values are all in Millions. </span>
<span id="cb62-88"><a href="#cb62-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-89"><a href="#cb62-89" aria-hidden="true" tabindex="-1"></a>There will be NA's throughout the dataset which represent the fact that the data was unavailable at that time. This could mean that the country did not exist in that year or they were unwilling to share their military spending information with SIPRI and so the NAs have been left in to reflect that fact. Data exists for at least one country from 1949 to 2021. There are 173 total countries in the database with the full list as well as some additional information in the appendix.</span>
<span id="cb62-90"><a href="#cb62-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-91"><a href="#cb62-91" aria-hidden="true" tabindex="-1"></a>"Gross domestic product (GDP) is the total monetary or market value of</span>
<span id="cb62-92"><a href="#cb62-92" aria-hidden="true" tabindex="-1"></a>all the finished goods and services produced within a country's borders</span>
<span id="cb62-93"><a href="#cb62-93" aria-hidden="true" tabindex="-1"></a>in a specific time period." - Investopedia</span>
<span id="cb62-94"><a href="#cb62-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-97"><a href="#cb62-97" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-98"><a href="#cb62-98" aria-hidden="true" tabindex="-1"></a>sheets <span class="ot">&lt;-</span> <span class="fu">excel_sheets</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>)</span>
<span id="cb62-99"><a href="#cb62-99" aria-hidden="true" tabindex="-1"></a>sheets</span>
<span id="cb62-100"><a href="#cb62-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-101"><a href="#cb62-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-102"><a href="#cb62-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-103"><a href="#cb62-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-104"><a href="#cb62-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-105"><a href="#cb62-105" aria-hidden="true" tabindex="-1"></a><span class="fu">### Source</span></span>
<span id="cb62-106"><a href="#cb62-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-107"><a href="#cb62-107" aria-hidden="true" tabindex="-1"></a>The Military spending information I am analyzing comes from **SIPRI**,</span>
<span id="cb62-108"><a href="#cb62-108" aria-hidden="true" tabindex="-1"></a>the **S**tockholm **I**nternational **P**eace **R**esearch</span>
<span id="cb62-109"><a href="#cb62-109" aria-hidden="true" tabindex="-1"></a>**I**nstitute. SIPRI was established in 1966 for the purpose of</span>
<span id="cb62-110"><a href="#cb62-110" aria-hidden="true" tabindex="-1"></a>"research into conflict, armaments, arms control and disarmament". The</span>
<span id="cb62-111"><a href="#cb62-111" aria-hidden="true" tabindex="-1"></a>organization is funded by the Swedish government however it regularly</span>
<span id="cb62-112"><a href="#cb62-112" aria-hidden="true" tabindex="-1"></a>works internationally with research centers around the globe. SIPRI</span>
<span id="cb62-113"><a href="#cb62-113" aria-hidden="true" tabindex="-1"></a>collected this particular data set from the official reports of each of</span>
<span id="cb62-114"><a href="#cb62-114" aria-hidden="true" tabindex="-1"></a>the included governments in the form of official publications such as</span>
<span id="cb62-115"><a href="#cb62-115" aria-hidden="true" tabindex="-1"></a>public budgets.</span>
<span id="cb62-116"><a href="#cb62-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-117"><a href="#cb62-117" aria-hidden="true" tabindex="-1"></a>Here is a peek at what the raw information looks like.</span>
<span id="cb62-118"><a href="#cb62-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-119"><a href="#cb62-119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE,R.options= (tibble.max_extra_cols=0)}</span></span>
<span id="cb62-120"><a href="#cb62-120" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb62-121"><a href="#cb62-121" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb62-122"><a href="#cb62-122" aria-hidden="true" tabindex="-1"></a>rawrawData_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">9</span>])</span>
<span id="cb62-123"><a href="#cb62-123" aria-hidden="true" tabindex="-1"></a><span class="co">#knitr::kable(head(rawrawData_ShareOfGovSpend,10),"simple")</span></span>
<span id="cb62-124"><a href="#cb62-124" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rawrawData_ShareOfGovSpend,<span class="dv">10</span>)</span>
<span id="cb62-125"><a href="#cb62-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-126"><a href="#cb62-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-127"><a href="#cb62-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-128"><a href="#cb62-128" aria-hidden="true" tabindex="-1"></a><span class="fu"># Input and Cleaning</span></span>
<span id="cb62-129"><a href="#cb62-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-130"><a href="#cb62-130" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reading in raw information</span></span>
<span id="cb62-131"><a href="#cb62-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-132"><a href="#cb62-132" aria-hidden="true" tabindex="-1"></a>The data provided by the Stockholm International Peace Research</span>
<span id="cb62-133"><a href="#cb62-133" aria-hidden="true" tabindex="-1"></a>Institute(SIPRI) was separated into multiple tabs in one excel .xlsx</span>
<span id="cb62-134"><a href="#cb62-134" aria-hidden="true" tabindex="-1"></a>file.</span>
<span id="cb62-135"><a href="#cb62-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-136"><a href="#cb62-136" aria-hidden="true" tabindex="-1"></a>In order to begin working I imported the tabs I planned to utilize,</span>
<span id="cb62-137"><a href="#cb62-137" aria-hidden="true" tabindex="-1"></a>skipping over some of the notes and title rows at the start of each tab.</span>
<span id="cb62-138"><a href="#cb62-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-141"><a href="#cb62-141" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-142"><a href="#cb62-142" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">6</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb62-143"><a href="#cb62-143" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">7</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb62-144"><a href="#cb62-144" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">9</span>],<span class="at">skip=</span><span class="dv">7</span>)</span>
<span id="cb62-145"><a href="#cb62-145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-146"><a href="#cb62-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-147"><a href="#cb62-147" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-148"><a href="#cb62-148" aria-hidden="true" tabindex="-1"></a><span class="co"># output</span></span>
<span id="cb62-149"><a href="#cb62-149" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_CurrentUSD)</span></span>
<span id="cb62-150"><a href="#cb62-150" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGDP)</span></span>
<span id="cb62-151"><a href="#cb62-151" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGovSpend)</span></span>
<span id="cb62-152"><a href="#cb62-152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-153"><a href="#cb62-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-154"><a href="#cb62-154" aria-hidden="true" tabindex="-1"></a>Next I delete the first row of NA as well as the Notes column for each</span>
<span id="cb62-155"><a href="#cb62-155" aria-hidden="true" tabindex="-1"></a>tibble.</span>
<span id="cb62-156"><a href="#cb62-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-159"><a href="#cb62-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-160"><a href="#cb62-160" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD[<span class="sc">-</span><span class="dv">1</span>,]  <span class="sc">%&gt;%</span></span>
<span id="cb62-161"><a href="#cb62-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb62-162"><a href="#cb62-162" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> rawData_ShareOfGDP[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb62-163"><a href="#cb62-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb62-164"><a href="#cb62-164" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> rawData_ShareOfGovSpend[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb62-165"><a href="#cb62-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">:-</span><span class="dv">3</span>)</span>
<span id="cb62-166"><a href="#cb62-166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-167"><a href="#cb62-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-168"><a href="#cb62-168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-169"><a href="#cb62-169" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_CurrentUSD)</span></span>
<span id="cb62-170"><a href="#cb62-170" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGDP)</span></span>
<span id="cb62-171"><a href="#cb62-171" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGovSpend)  </span></span>
<span id="cb62-172"><a href="#cb62-172" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-173"><a href="#cb62-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-174"><a href="#cb62-174" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tidying Data</span></span>
<span id="cb62-175"><a href="#cb62-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-176"><a href="#cb62-176" aria-hidden="true" tabindex="-1"></a>Before pivoting my data I wanted to add a column for region. I chose to</span>
<span id="cb62-177"><a href="#cb62-177" aria-hidden="true" tabindex="-1"></a>do this with an algorithm as an exercise in iteration however it would</span>
<span id="cb62-178"><a href="#cb62-178" aria-hidden="true" tabindex="-1"></a>have been more practical to just hard code this column.</span>
<span id="cb62-179"><a href="#cb62-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-180"><a href="#cb62-180" aria-hidden="true" tabindex="-1"></a>The list of countries where there are NA's for every year:</span>
<span id="cb62-181"><a href="#cb62-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-184"><a href="#cb62-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-185"><a href="#cb62-185" aria-hidden="true" tabindex="-1"></a>Regions <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-186"><a href="#cb62-186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">1949</span><span class="st">`</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-187"><a href="#cb62-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country)</span>
<span id="cb62-188"><a href="#cb62-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-189"><a href="#cb62-189" aria-hidden="true" tabindex="-1"></a>Regions</span>
<span id="cb62-190"><a href="#cb62-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-191"><a href="#cb62-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-192"><a href="#cb62-192" aria-hidden="true" tabindex="-1"></a>You will notice that some of these are continents and sub-continents, I</span>
<span id="cb62-193"><a href="#cb62-193" aria-hidden="true" tabindex="-1"></a>wanted to break these into a <span class="in">`Region`</span> field. The pattern I saw and chose</span>
<span id="cb62-194"><a href="#cb62-194" aria-hidden="true" tabindex="-1"></a>to exploit was the fact that the overarching category would always be</span>
<span id="cb62-195"><a href="#cb62-195" aria-hidden="true" tabindex="-1"></a>followed with a more specific category such as the **Africa** followed</span>
<span id="cb62-196"><a href="#cb62-196" aria-hidden="true" tabindex="-1"></a>by **North Africa** values (see earlier print outs to see raw</span>
<span id="cb62-197"><a href="#cb62-197" aria-hidden="true" tabindex="-1"></a>information).</span>
<span id="cb62-198"><a href="#cb62-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-199"><a href="#cb62-199" aria-hidden="true" tabindex="-1"></a>I then added an empty vector into the tibble and populated it according</span>
<span id="cb62-200"><a href="#cb62-200" aria-hidden="true" tabindex="-1"></a>to the Country column using the pattern described above.</span>
<span id="cb62-201"><a href="#cb62-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-202"><a href="#cb62-202" aria-hidden="true" tabindex="-1"></a>Once I had left flags in the region column dictating where each region</span>
<span id="cb62-203"><a href="#cb62-203" aria-hidden="true" tabindex="-1"></a>was starting I could use <span class="in">`fill(Region)`</span> in order to populate the rest of</span>
<span id="cb62-204"><a href="#cb62-204" aria-hidden="true" tabindex="-1"></a>the column.</span>
<span id="cb62-205"><a href="#cb62-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-208"><a href="#cb62-208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-209"><a href="#cb62-209" aria-hidden="true" tabindex="-1"></a>emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">length</span>(rawData_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>)))<span class="do">## doing as numeric here as a hacky way to fill this with NA's, any better way?</span></span>
<span id="cb62-210"><a href="#cb62-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-211"><a href="#cb62-211" aria-hidden="true" tabindex="-1"></a><span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb62-212"><a href="#cb62-212" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-213"><a href="#cb62-213" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Region =</span>emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb62-214"><a href="#cb62-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-215"><a href="#cb62-215" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb62-216"><a href="#cb62-216" aria-hidden="true" tabindex="-1"></a>  <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb62-217"><a href="#cb62-217" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(mutated_CurrentUSD<span class="sc">$</span>Country) ){</span>
<span id="cb62-218"><a href="#cb62-218" aria-hidden="true" tabindex="-1"></a>   <span class="co">#if 2 nas in a row then do something</span></span>
<span id="cb62-219"><a href="#cb62-219" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i<span class="sc">+</span><span class="dv">1</span>]) ){</span>
<span id="cb62-220"><a href="#cb62-220" aria-hidden="true" tabindex="-1"></a>    mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>] <span class="co">#this works because when referencing an index outside of the vector R will return NA - Great to know.</span></span>
<span id="cb62-221"><a href="#cb62-221" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-222"><a href="#cb62-222" aria-hidden="true" tabindex="-1"></a>  <span class="co">#if the row is a region</span></span>
<span id="cb62-223"><a href="#cb62-223" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) ){</span>
<span id="cb62-224"><a href="#cb62-224" aria-hidden="true" tabindex="-1"></a>     mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i]</span>
<span id="cb62-225"><a href="#cb62-225" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-226"><a href="#cb62-226" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-227"><a href="#cb62-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-228"><a href="#cb62-228" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> mutated_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-229"><a href="#cb62-229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(Region)</span>
<span id="cb62-230"><a href="#cb62-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-231"><a href="#cb62-231" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mutated_CurrentUSD)</span>
<span id="cb62-232"><a href="#cb62-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-233"><a href="#cb62-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-234"><a href="#cb62-234" aria-hidden="true" tabindex="-1"></a>Now that I had my proof of concept for cleaning one of the sheets, in a</span>
<span id="cb62-235"><a href="#cb62-235" aria-hidden="true" tabindex="-1"></a>format I wanted, it was time to clean the other sheets as well. I could</span>
<span id="cb62-236"><a href="#cb62-236" aria-hidden="true" tabindex="-1"></a>have taken the above code and modified it to work for each of the</span>
<span id="cb62-237"><a href="#cb62-237" aria-hidden="true" tabindex="-1"></a>other tabs individually however I took the opportunity to practice with</span>
<span id="cb62-238"><a href="#cb62-238" aria-hidden="true" tabindex="-1"></a>functions and created the below function to clean any of the tabs once</span>
<span id="cb62-239"><a href="#cb62-239" aria-hidden="true" tabindex="-1"></a>they were loaded in and lightly pre-processed.</span>
<span id="cb62-240"><a href="#cb62-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-241"><a href="#cb62-241" aria-hidden="true" tabindex="-1"></a><span class="fu">## Clean and format function</span></span>
<span id="cb62-242"><a href="#cb62-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-245"><a href="#cb62-245" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-246"><a href="#cb62-246" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a function to clean the other sheets</span></span>
<span id="cb62-247"><a href="#cb62-247" aria-hidden="true" tabindex="-1"></a><span class="do">##Input: a partially cleaned tibble, must have been read in and had excess rows trimmed</span></span>
<span id="cb62-248"><a href="#cb62-248" aria-hidden="true" tabindex="-1"></a><span class="do">##output: tibble with regions correctly labeled and umbrella region categories i.e Africa above south Africa removed</span></span>
<span id="cb62-249"><a href="#cb62-249" aria-hidden="true" tabindex="-1"></a><span class="do">##Note: All sub categories contained the main category name in them, will use regex to create groupings in the future.</span></span>
<span id="cb62-250"><a href="#cb62-250" aria-hidden="true" tabindex="-1"></a>CleanData <span class="ot">&lt;-</span> <span class="cf">function</span>(inSheet){</span>
<span id="cb62-251"><a href="#cb62-251" aria-hidden="true" tabindex="-1"></a>  emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">nrow</span>(<span class="fu">select</span>(inSheet,<span class="dv">2</span>))))</span>
<span id="cb62-252"><a href="#cb62-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-253"><a href="#cb62-253" aria-hidden="true" tabindex="-1"></a>  <span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb62-254"><a href="#cb62-254" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> inSheet <span class="sc">%&gt;%</span></span>
<span id="cb62-255"><a href="#cb62-255" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Region =</span> emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb62-256"><a href="#cb62-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-257"><a href="#cb62-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-258"><a href="#cb62-258" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb62-259"><a href="#cb62-259" aria-hidden="true" tabindex="-1"></a>    <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb62-260"><a href="#cb62-260" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(output<span class="sc">$</span>Country)){</span>
<span id="cb62-261"><a href="#cb62-261" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-262"><a href="#cb62-262" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(output[[(i<span class="sc">+</span><span class="dv">1</span>),<span class="dv">3</span>]]))</span>
<span id="cb62-263"><a href="#cb62-263" aria-hidden="true" tabindex="-1"></a>      output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>]</span>
<span id="cb62-264"><a href="#cb62-264" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-265"><a href="#cb62-265" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]))</span>
<span id="cb62-266"><a href="#cb62-266" aria-hidden="true" tabindex="-1"></a>       output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i]</span>
<span id="cb62-267"><a href="#cb62-267" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-268"><a href="#cb62-268" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-269"><a href="#cb62-269" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb62-270"><a href="#cb62-270" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fill</span>(Region)</span>
<span id="cb62-271"><a href="#cb62-271" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-272"><a href="#cb62-272" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-273"><a href="#cb62-273" aria-hidden="true" tabindex="-1"></a>  <span class="co"># removing header rows</span></span>
<span id="cb62-274"><a href="#cb62-274" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb62-275"><a href="#cb62-275" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(output[[<span class="dv">3</span>]]))</span>
<span id="cb62-276"><a href="#cb62-276" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-277"><a href="#cb62-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-278"><a href="#cb62-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-279"><a href="#cb62-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-280"><a href="#cb62-280" aria-hidden="true" tabindex="-1"></a>Below I call the function on each of the tibbles loaded in earlier. For</span>
<span id="cb62-281"><a href="#cb62-281" aria-hidden="true" tabindex="-1"></a>the sake of space I will only show one tab being cleaned.</span>
<span id="cb62-282"><a href="#cb62-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-283"><a href="#cb62-283" aria-hidden="true" tabindex="-1"></a>Before:</span>
<span id="cb62-284"><a href="#cb62-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-285"><a href="#cb62-285" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-286"><a href="#cb62-286" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_CurrentUSD)</span></span>
<span id="cb62-287"><a href="#cb62-287" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGDP)</span></span>
<span id="cb62-288"><a href="#cb62-288" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rawData_ShareOfGovSpend)</span>
<span id="cb62-289"><a href="#cb62-289" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-290"><a href="#cb62-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-293"><a href="#cb62-293" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-294"><a href="#cb62-294" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_CurrentUSD)</span>
<span id="cb62-295"><a href="#cb62-295" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGovSpend)</span>
<span id="cb62-296"><a href="#cb62-296" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGDP)</span>
<span id="cb62-297"><a href="#cb62-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-298"><a href="#cb62-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-299"><a href="#cb62-299" aria-hidden="true" tabindex="-1"></a>After:</span>
<span id="cb62-300"><a href="#cb62-300" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-301"><a href="#cb62-301" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_currentUSD)</span></span>
<span id="cb62-302"><a href="#cb62-302" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_ShareOfGovSpend)</span></span>
<span id="cb62-303"><a href="#cb62-303" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb62-304"><a href="#cb62-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-305"><a href="#cb62-305" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-306"><a href="#cb62-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-307"><a href="#cb62-307" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pivoting and Restructuring</span></span>
<span id="cb62-308"><a href="#cb62-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-309"><a href="#cb62-309" aria-hidden="true" tabindex="-1"></a><span class="fu">### Pivot and Notation Changes</span></span>
<span id="cb62-310"><a href="#cb62-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-311"><a href="#cb62-311" aria-hidden="true" tabindex="-1"></a>Next I pivot the years, it should be noted that both the pivoting and</span>
<span id="cb62-312"><a href="#cb62-312" aria-hidden="true" tabindex="-1"></a>Converting of notation could be handled by the clean function above, i</span>
<span id="cb62-313"><a href="#cb62-313" aria-hidden="true" tabindex="-1"></a>kept the steps separate so that I could show the progression of the</span>
<span id="cb62-314"><a href="#cb62-314" aria-hidden="true" tabindex="-1"></a>dataframe.</span>
<span id="cb62-315"><a href="#cb62-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-316"><a href="#cb62-316" aria-hidden="true" tabindex="-1"></a>I must also handle the xxx and ... notations. From the information page</span>
<span id="cb62-317"><a href="#cb62-317" aria-hidden="true" tabindex="-1"></a>of my data set I can see that the notation is described as follows:</span>
<span id="cb62-318"><a href="#cb62-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-319"><a href="#cb62-319" aria-hidden="true" tabindex="-1"></a>| Raw Notation | Meaning                                                                                 |</span>
<span id="cb62-320"><a href="#cb62-320" aria-hidden="true" tabindex="-1"></a>|------------------------------------|------------------------------------|</span>
<span id="cb62-321"><a href="#cb62-321" aria-hidden="true" tabindex="-1"></a>| ...          | Data unavailable                                                                        |</span>
<span id="cb62-322"><a href="#cb62-322" aria-hidden="true" tabindex="-1"></a>| xxx          | Country did not exist or was not independent during all or part of the year in question |</span>
<span id="cb62-323"><a href="#cb62-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-324"><a href="#cb62-324" aria-hidden="true" tabindex="-1"></a>For now I think I will just keep both as NA but will save this form of</span>
<span id="cb62-325"><a href="#cb62-325" aria-hidden="true" tabindex="-1"></a>the information for future use.</span>
<span id="cb62-326"><a href="#cb62-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-327"><a href="#cb62-327" aria-hidden="true" tabindex="-1"></a>After pivot and notation changes:</span>
<span id="cb62-328"><a href="#cb62-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-331"><a href="#cb62-331" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-332"><a href="#cb62-332" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> Cleaned_currentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-333"><a href="#cb62-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_currentUSD),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-334"><a href="#cb62-334" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-335"><a href="#cb62-335" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb62-336"><a href="#cb62-336" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-337"><a href="#cb62-337" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> Cleaned_ShareOfGovSpend <span class="sc">%&gt;%</span></span>
<span id="cb62-338"><a href="#cb62-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGovSpend),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-339"><a href="#cb62-339" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-340"><a href="#cb62-340" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb62-341"><a href="#cb62-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-342"><a href="#cb62-342" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> Cleaned_ShareOfGDP <span class="sc">%&gt;%</span></span>
<span id="cb62-343"><a href="#cb62-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGDP),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-344"><a href="#cb62-344" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-345"><a href="#cb62-345" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb62-346"><a href="#cb62-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-347"><a href="#cb62-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-348"><a href="#cb62-348" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_currentUSD)</span>
<span id="cb62-349"><a href="#cb62-349" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGovSpend)</span>
<span id="cb62-350"><a href="#cb62-350" aria-hidden="true" tabindex="-1"></a>df3<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb62-351"><a href="#cb62-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-352"><a href="#cb62-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-353"><a href="#cb62-353" aria-hidden="true" tabindex="-1"></a><span class="co">#df1</span></span>
<span id="cb62-354"><a href="#cb62-354" aria-hidden="true" tabindex="-1"></a><span class="co">#df2</span></span>
<span id="cb62-355"><a href="#cb62-355" aria-hidden="true" tabindex="-1"></a><span class="co"># share of GDP</span></span>
<span id="cb62-356"><a href="#cb62-356" aria-hidden="true" tabindex="-1"></a><span class="co">#df3</span></span>
<span id="cb62-357"><a href="#cb62-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-358"><a href="#cb62-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-359"><a href="#cb62-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-360"><a href="#cb62-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-361"><a href="#cb62-361" aria-hidden="true" tabindex="-1"></a><span class="fu">### Converting Column Types</span></span>
<span id="cb62-362"><a href="#cb62-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-363"><a href="#cb62-363" aria-hidden="true" tabindex="-1"></a>Finally I will convert the column types to their correct representation.</span>
<span id="cb62-364"><a href="#cb62-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-367"><a href="#cb62-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-368"><a href="#cb62-368" aria-hidden="true" tabindex="-1"></a><span class="co">#Year to Number</span></span>
<span id="cb62-369"><a href="#cb62-369" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_currentUSD<span class="sc">$</span>Year)</span>
<span id="cb62-370"><a href="#cb62-370" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>Year)</span>
<span id="cb62-371"><a href="#cb62-371" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGDP<span class="sc">$</span>Year)</span>
<span id="cb62-372"><a href="#cb62-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-373"><a href="#cb62-373" aria-hidden="true" tabindex="-1"></a><span class="co"># value to double</span></span>
<span id="cb62-374"><a href="#cb62-374" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_currentUSD<span class="sc">$</span>value)</span>
<span id="cb62-375"><a href="#cb62-375" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>value)</span>
<span id="cb62-376"><a href="#cb62-376" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGDP<span class="sc">$</span>value)</span>
<span id="cb62-377"><a href="#cb62-377" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-378"><a href="#cb62-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-379"><a href="#cb62-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-380"><a href="#cb62-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-381"><a href="#cb62-381" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-382"><a href="#cb62-382" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> Cleaned_currentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-383"><a href="#cb62-383" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">MilitarySpend_currentUSD=</span>value)</span>
<span id="cb62-384"><a href="#cb62-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-385"><a href="#cb62-385" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> Cleaned_ShareOfGovSpend<span class="sc">%&gt;%</span></span>
<span id="cb62-386"><a href="#cb62-386" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">MilitarySpend_ShareofGovSpend=</span>value)</span>
<span id="cb62-387"><a href="#cb62-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-388"><a href="#cb62-388" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> Cleaned_ShareOfGDP<span class="sc">%&gt;%</span></span>
<span id="cb62-389"><a href="#cb62-389" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">MilitarySpend_ShareofGDP=</span>value)</span>
<span id="cb62-390"><a href="#cb62-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-391"><a href="#cb62-391" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-392"><a href="#cb62-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-393"><a href="#cb62-393" aria-hidden="true" tabindex="-1"></a><span class="fu">### Joining of the Different Tabs</span></span>
<span id="cb62-394"><a href="#cb62-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-395"><a href="#cb62-395" aria-hidden="true" tabindex="-1"></a>Here we do a full join to maintain data from all the different tabs. The years when share of Gov spend are unavailable will then show NA as intended.</span>
<span id="cb62-396"><a href="#cb62-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-399"><a href="#cb62-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-400"><a href="#cb62-400" aria-hidden="true" tabindex="-1"></a>MilitarySpend<span class="ot">&lt;-</span> <span class="fu">full_join</span>(Cleaned_currentUSD,Cleaned_ShareOfGovSpend,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb62-401"><a href="#cb62-401" aria-hidden="true" tabindex="-1"></a>MilitarySpend <span class="ot">&lt;-</span> <span class="fu">full_join</span>(MilitarySpend,Cleaned_ShareOfGDP,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb62-402"><a href="#cb62-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-403"><a href="#cb62-403" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(MilitarySpend)</span>
<span id="cb62-404"><a href="#cb62-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-405"><a href="#cb62-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-406"><a href="#cb62-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-407"><a href="#cb62-407" aria-hidden="true" tabindex="-1"></a><span class="fu"># Descriptive stats</span></span>
<span id="cb62-408"><a href="#cb62-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-409"><a href="#cb62-409" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pivoting</span></span>
<span id="cb62-410"><a href="#cb62-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-411"><a href="#cb62-411" aria-hidden="true" tabindex="-1"></a>Mean, Median and Standard Deviation for each of the tabs.</span>
<span id="cb62-412"><a href="#cb62-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-413"><a href="#cb62-413" aria-hidden="true" tabindex="-1"></a>First I wanted to get an idea of what my data looks like for each of the</span>
<span id="cb62-414"><a href="#cb62-414" aria-hidden="true" tabindex="-1"></a>countries individually. In order to see this I grouped on country name</span>
<span id="cb62-415"><a href="#cb62-415" aria-hidden="true" tabindex="-1"></a>and the types of data we have.</span>
<span id="cb62-416"><a href="#cb62-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-417"><a href="#cb62-417" aria-hidden="true" tabindex="-1"></a>In order to get that done I need to pivot my data again.</span>
<span id="cb62-418"><a href="#cb62-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-421"><a href="#cb62-421" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-422"><a href="#cb62-422" aria-hidden="true" tabindex="-1"></a>combinedData <span class="ot">&lt;-</span>MilitarySpend <span class="sc">%&gt;%</span></span>
<span id="cb62-423"><a href="#cb62-423" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(MilitarySpend_currentUSD,MilitarySpend_ShareofGovSpend,MilitarySpend_ShareofGDP),<span class="at">names_to =</span> <span class="st">"viewOfSpend"</span>,<span class="at">values_to =</span> <span class="st">"Spend"</span>)</span>
<span id="cb62-424"><a href="#cb62-424" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(combinedData)</span>
<span id="cb62-425"><a href="#cb62-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-426"><a href="#cb62-426" aria-hidden="true" tabindex="-1"></a>combinedData<span class="ot">&lt;-</span><span class="fu">na.omit</span>(combinedData)</span>
<span id="cb62-427"><a href="#cb62-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-428"><a href="#cb62-428" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-429"><a href="#cb62-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-430"><a href="#cb62-430" aria-hidden="true" tabindex="-1"></a>Total number of countries analyzed:</span>
<span id="cb62-431"><a href="#cb62-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-432"><a href="#cb62-432" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-433"><a href="#cb62-433" aria-hidden="true" tabindex="-1"></a>totNumCountries<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-434"><a href="#cb62-434" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Country)<span class="sc">%&gt;%</span></span>
<span id="cb62-435"><a href="#cb62-435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span>
<span id="cb62-436"><a href="#cb62-436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-437"><a href="#cb62-437" aria-hidden="true" tabindex="-1"></a>List of Countries:</span>
<span id="cb62-438"><a href="#cb62-438" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-439"><a href="#cb62-439" aria-hidden="true" tabindex="-1"></a>ListOfCountries<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-440"><a href="#cb62-440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Country,Region)<span class="sc">%&gt;%</span></span>
<span id="cb62-441"><a href="#cb62-441" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Country)</span>
<span id="cb62-442"><a href="#cb62-442" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-443"><a href="#cb62-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-444"><a href="#cb62-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-445"><a href="#cb62-445" aria-hidden="true" tabindex="-1"></a>Number of countries by region:</span>
<span id="cb62-446"><a href="#cb62-446" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-447"><a href="#cb62-447" aria-hidden="true" tabindex="-1"></a>NumCountriesByRegion<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-448"><a href="#cb62-448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region)<span class="sc">%&gt;%</span></span>
<span id="cb62-449"><a href="#cb62-449" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">numberCountries =</span> <span class="fu">n_distinct</span>(Country))<span class="sc">%&gt;%</span></span>
<span id="cb62-450"><a href="#cb62-450" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(numberCountries))</span>
<span id="cb62-451"><a href="#cb62-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-452"><a href="#cb62-452" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-453"><a href="#cb62-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-454"><a href="#cb62-454" aria-hidden="true" tabindex="-1"></a><span class="fu">## Statistics by region</span></span>
<span id="cb62-455"><a href="#cb62-455" aria-hidden="true" tabindex="-1"></a>Now that I have all of my data in a malleable state I will do some initial statistics on each tab of the initial dataset to give asome insight to what patterns or outliers may exist.</span>
<span id="cb62-456"><a href="#cb62-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-457"><a href="#cb62-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-458"><a href="#cb62-458" aria-hidden="true" tabindex="-1"></a><span class="fu">### MilitarySpend_currentUSD</span></span>
<span id="cb62-459"><a href="#cb62-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-460"><a href="#cb62-460" aria-hidden="true" tabindex="-1"></a>I will be using the current USD data for my analysis of major world events so I will not dive deeper at this point.</span>
<span id="cb62-461"><a href="#cb62-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-464"><a href="#cb62-464" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-465"><a href="#cb62-465" aria-hidden="true" tabindex="-1"></a>byRegionStats_USD<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-466"><a href="#cb62-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb62-467"><a href="#cb62-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb62-468"><a href="#cb62-468" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb62-469"><a href="#cb62-469" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">min</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb62-470"><a href="#cb62-470" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-471"><a href="#cb62-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb62-472"><a href="#cb62-472" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)</span>
<span id="cb62-473"><a href="#cb62-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-474"><a href="#cb62-474" aria-hidden="true" tabindex="-1"></a>byRegionStats_USD</span>
<span id="cb62-475"><a href="#cb62-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-476"><a href="#cb62-476" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-477"><a href="#cb62-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-478"><a href="#cb62-478" aria-hidden="true" tabindex="-1"></a><span class="fu">### MilitarySpend_ShareOfGDP</span></span>
<span id="cb62-479"><a href="#cb62-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-480"><a href="#cb62-480" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE, message=FALSE}</span></span>
<span id="cb62-481"><a href="#cb62-481" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-482"><a href="#cb62-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb62-483"><a href="#cb62-483" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb62-484"><a href="#cb62-484" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb62-485"><a href="#cb62-485" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">min</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb62-486"><a href="#cb62-486" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-487"><a href="#cb62-487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb62-488"><a href="#cb62-488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGDP"</span>)</span>
<span id="cb62-489"><a href="#cb62-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-490"><a href="#cb62-490" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP</span>
<span id="cb62-491"><a href="#cb62-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-492"><a href="#cb62-492" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-493"><a href="#cb62-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-494"><a href="#cb62-494" aria-hidden="true" tabindex="-1"></a>After sorting by mean share of GDP spend I see that the middle east has the highest by quite a large margin. This is odd because usally the US(North America), has the highest military spending. A max of 1.17 for GDP is also stageringly high when compared to the other regions. This prompts further investigation. A violin plot below gives a visualization of this distribution.</span>
<span id="cb62-495"><a href="#cb62-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-496"><a href="#cb62-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-499"><a href="#cb62-499" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-500"><a href="#cb62-500" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-501"><a href="#cb62-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-502"><a href="#cb62-502" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGDP"</span>)</span>
<span id="cb62-503"><a href="#cb62-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-504"><a href="#cb62-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-505"><a href="#cb62-505" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="sc">$</span>Region<span class="ot">&lt;-</span><span class="fu">as.factor</span>(byRegionStats_GDP<span class="sc">$</span>Region)</span>
<span id="cb62-506"><a href="#cb62-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-507"><a href="#cb62-507" aria-hidden="true" tabindex="-1"></a>violin_gdp<span class="ot">&lt;-</span> <span class="fu">na.omit</span>(byRegionStats_GDP)<span class="sc">%&gt;%</span></span>
<span id="cb62-508"><a href="#cb62-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Region,<span class="at">y=</span>Spend))<span class="sc">+</span></span>
<span id="cb62-509"><a href="#cb62-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()<span class="sc">+</span></span>
<span id="cb62-510"><a href="#cb62-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb62-511"><a href="#cb62-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-512"><a href="#cb62-512" aria-hidden="true" tabindex="-1"></a>violin_gdp</span>
<span id="cb62-513"><a href="#cb62-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-514"><a href="#cb62-514" aria-hidden="true" tabindex="-1"></a><span class="co"># removing NAs here because I cant plot them, I dont want to replace them with other values because it is still of interest when countries do not display their data.</span></span>
<span id="cb62-515"><a href="#cb62-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-516"><a href="#cb62-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-517"><a href="#cb62-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-518"><a href="#cb62-518" aria-hidden="true" tabindex="-1"></a>Upon investigation of the underlying data I see that Kuwait in 1991 is the culprit of the high military spending as percent of GDP number.</span>
<span id="cb62-519"><a href="#cb62-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-522"><a href="#cb62-522" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-523"><a href="#cb62-523" aria-hidden="true" tabindex="-1"></a>byRegionStats_GDP<span class="sc">%&gt;%</span></span>
<span id="cb62-524"><a href="#cb62-524" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region<span class="sc">==</span><span class="st">"Middle East"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-525"><a href="#cb62-525" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Spend))<span class="sc">%&gt;%</span></span>
<span id="cb62-526"><a href="#cb62-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb62-527"><a href="#cb62-527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-528"><a href="#cb62-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-529"><a href="#cb62-529" aria-hidden="true" tabindex="-1"></a>I initially thought this was a typo since there were two 1s in a row and</span>
<span id="cb62-530"><a href="#cb62-530" aria-hidden="true" tabindex="-1"></a>it was such an insanely high spend. A share of GDP of 1.173 means Kuwait</span>
<span id="cb62-531"><a href="#cb62-531" aria-hidden="true" tabindex="-1"></a>spent 117.3% of their GDP in that year. Upon further investigation, this</span>
<span id="cb62-532"><a href="#cb62-532" aria-hidden="true" tabindex="-1"></a>is actually true and it was driven by the Persian Gulf War(aka Gulf</span>
<span id="cb62-533"><a href="#cb62-533" aria-hidden="true" tabindex="-1"></a>War). The Gulf War was a conflict triggered by Iraqs invasion of Kuwait</span>
<span id="cb62-534"><a href="#cb62-534" aria-hidden="true" tabindex="-1"></a>in 1990. This invasion was the first major international crisis since</span>
<span id="cb62-535"><a href="#cb62-535" aria-hidden="true" tabindex="-1"></a>the Cold War and will certainly be a topic I add to the final analysis.</span>
<span id="cb62-536"><a href="#cb62-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-537"><a href="#cb62-537" aria-hidden="true" tabindex="-1"></a>https://www.britannica.com/event/Persian-Gulf-War</span>
<span id="cb62-538"><a href="#cb62-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-539"><a href="#cb62-539" aria-hidden="true" tabindex="-1"></a>Loosely I will plot Iraq, US and Kuwait spend from 1985-1995 to explore</span>
<span id="cb62-540"><a href="#cb62-540" aria-hidden="true" tabindex="-1"></a>this time period.</span>
<span id="cb62-541"><a href="#cb62-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-542"><a href="#cb62-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE}</span></span>
<span id="cb62-543"><a href="#cb62-543" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-544"><a href="#cb62-544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">&gt;=</span> <span class="dv">1985</span> <span class="sc">&amp;</span> Year<span class="sc">&lt;=</span> <span class="dv">1995</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-545"><a href="#cb62-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"United States of America"</span>,<span class="st">"Iraq"</span>,<span class="st">"Kuwait"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-546"><a href="#cb62-546" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">y =</span> Spend, <span class="at">x =</span> Year))<span class="sc">+</span>  </span>
<span id="cb62-547"><a href="#cb62-547" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country),<span class="at">na.rm =</span> <span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb62-548"><a href="#cb62-548" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">viewOfSpend</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)</span>
<span id="cb62-549"><a href="#cb62-549" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-550"><a href="#cb62-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-551"><a href="#cb62-551" aria-hidden="true" tabindex="-1"></a>A new discovery! Iraq chose not to report their spending during the Gulf</span>
<span id="cb62-552"><a href="#cb62-552" aria-hidden="true" tabindex="-1"></a>war. This is most likely due to the fact that SIPRI data collection is funded by the Swedish government who have pretty close ties to the United States. Sweden was one of the first countries to recognize US independence in 1783. Below I highlight reported Iraqi military spending overlaid with markings for the start and end of their reported data. We can see that in the time leading up to the gulf war military spending rose sharpley and even after the war they continued to spend above historical levels.</span>
<span id="cb62-553"><a href="#cb62-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-554"><a href="#cb62-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE}</span></span>
<span id="cb62-555"><a href="#cb62-555" aria-hidden="true" tabindex="-1"></a>startOfNoData<span class="ot">&lt;-</span> <span class="dv">1982</span></span>
<span id="cb62-556"><a href="#cb62-556" aria-hidden="true" tabindex="-1"></a>endofNoData<span class="ot">&lt;-</span> <span class="dv">2003</span></span>
<span id="cb62-557"><a href="#cb62-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-558"><a href="#cb62-558" aria-hidden="true" tabindex="-1"></a>iraqMissingDataPLOT<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-559"><a href="#cb62-559" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Iraq"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-560"><a href="#cb62-560" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>( <span class="at">x =</span> Spend,<span class="at">y =</span> Year))<span class="sc">+</span></span>
<span id="cb62-561"><a href="#cb62-561" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb62-562"><a href="#cb62-562" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">viewOfSpend</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_x"</span>)<span class="sc">+</span></span>
<span id="cb62-563"><a href="#cb62-563" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span><span class="fu">seq</span>(<span class="dv">1949</span>,<span class="dv">2020</span>,<span class="dv">5</span>),<span class="at">breaks =</span><span class="fu">seq</span>(<span class="dv">1949</span>,<span class="dv">2020</span>,<span class="dv">5</span>))</span>
<span id="cb62-564"><a href="#cb62-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-565"><a href="#cb62-565" aria-hidden="true" tabindex="-1"></a>iraqMissingDataPLOT<span class="sc">+</span></span>
<span id="cb62-566"><a href="#cb62-566" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1982</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb62-567"><a href="#cb62-567" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">2003</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb62-568"><a href="#cb62-568" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1985</span>,<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb62-569"><a href="#cb62-569" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1995</span>,<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb62-570"><a href="#cb62-570" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">1982</span>,<span class="at">label=</span><span class="st">"1982"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb62-571"><a href="#cb62-571" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">2003</span>,<span class="at">label=</span><span class="st">"2003"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="fl">1.1</span>,<span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb62-572"><a href="#cb62-572" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">1985</span>,<span class="at">label=</span><span class="st">"Start of Gulf war"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb62-573"><a href="#cb62-573" aria-hidden="true" tabindex="-1"></a><span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">0</span>,<span class="at">y=</span><span class="dv">1995</span>,<span class="at">label=</span><span class="st">"End of Gulf war"</span>,<span class="at">hjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb62-574"><a href="#cb62-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-575"><a href="#cb62-575" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-576"><a href="#cb62-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-577"><a href="#cb62-577" aria-hidden="true" tabindex="-1"></a><span class="fu">### MilitarySpend_ShareofGovSpend</span></span>
<span id="cb62-578"><a href="#cb62-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-581"><a href="#cb62-581" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-582"><a href="#cb62-582" aria-hidden="true" tabindex="-1"></a>byRegionStats_GovSpend<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-583"><a href="#cb62-583" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb62-584"><a href="#cb62-584" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb62-585"><a href="#cb62-585" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb62-586"><a href="#cb62-586" aria-hidden="true" tabindex="-1"></a>            <span class="at">min =</span> <span class="fu">min</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb62-587"><a href="#cb62-587" aria-hidden="true" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-588"><a href="#cb62-588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb62-589"><a href="#cb62-589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGovSpend"</span>)</span>
<span id="cb62-590"><a href="#cb62-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-591"><a href="#cb62-591" aria-hidden="true" tabindex="-1"></a>byRegionStats_GovSpend</span>
<span id="cb62-592"><a href="#cb62-592" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-593"><a href="#cb62-593" aria-hidden="true" tabindex="-1"></a>The share of Gov spend shows an insanely high max of sub-Saharan African spending as well as the Middle East.The Middle east spending has been explained above however below I will investigate the sub-sahara African spending.</span>
<span id="cb62-594"><a href="#cb62-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-597"><a href="#cb62-597" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-598"><a href="#cb62-598" aria-hidden="true" tabindex="-1"></a>violin_ShareOfSpend<span class="ot">&lt;-</span> <span class="fu">na.omit</span>(byRegionStats_GovSpend)<span class="sc">%&gt;%</span></span>
<span id="cb62-599"><a href="#cb62-599" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Region,<span class="at">y=</span>Spend))<span class="sc">+</span></span>
<span id="cb62-600"><a href="#cb62-600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()<span class="sc">+</span></span>
<span id="cb62-601"><a href="#cb62-601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb62-602"><a href="#cb62-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-603"><a href="#cb62-603" aria-hidden="true" tabindex="-1"></a>violin_gdp</span>
<span id="cb62-604"><a href="#cb62-604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-605"><a href="#cb62-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-606"><a href="#cb62-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-607"><a href="#cb62-607" aria-hidden="true" tabindex="-1"></a>Zooming into Zimbabwe's Violin plot we can see that they often have an exteremly high military spending when compared to overall spending. As suggested by <span class="co">[</span><span class="ot">5</span><span class="co">]</span>, Zimbabwe's military spending is highly influenced by internal political turbulence more so than economic factors. It should also be mentioned that their military spending is often determined by SIPRI from estimation and not necessarily accurate, for this reason I wont be looking further into the anomaly.</span>
<span id="cb62-608"><a href="#cb62-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-611"><a href="#cb62-611" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-612"><a href="#cb62-612" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-613"><a href="#cb62-613" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_ShareofGovSpend"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-614"><a href="#cb62-614" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">==</span> <span class="st">"sub-Saharan Africa"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-615"><a href="#cb62-615" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country<span class="sc">==</span><span class="st">"Zimbabwe"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-616"><a href="#cb62-616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Country,<span class="at">y=</span>Spend))<span class="sc">+</span></span>
<span id="cb62-617"><a href="#cb62-617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()<span class="sc">+</span></span>
<span id="cb62-618"><a href="#cb62-618" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb62-619"><a href="#cb62-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-620"><a href="#cb62-620" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-621"><a href="#cb62-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-622"><a href="#cb62-622" aria-hidden="true" tabindex="-1"></a>Now that some introductory statistics have been done to explain the data at first glance, we focus in on the heavy hitters in the military spending space and look into how recent global events have affected their spending habits.</span>
<span id="cb62-623"><a href="#cb62-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-624"><a href="#cb62-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-625"><a href="#cb62-625" aria-hidden="true" tabindex="-1"></a>Top 6 mean spenders</span>
<span id="cb62-628"><a href="#cb62-628" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-629"><a href="#cb62-629" aria-hidden="true" tabindex="-1"></a>top6_mean <span class="ot">&lt;-</span> byRegionStats_USD <span class="sc">%&gt;%</span></span>
<span id="cb62-630"><a href="#cb62-630" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()<span class="sc">%&gt;%</span></span>
<span id="cb62-631"><a href="#cb62-631" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Region)</span>
<span id="cb62-632"><a href="#cb62-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-633"><a href="#cb62-633" aria-hidden="true" tabindex="-1"></a>top6_mean</span>
<span id="cb62-634"><a href="#cb62-634" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-635"><a href="#cb62-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-636"><a href="#cb62-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-637"><a href="#cb62-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-638"><a href="#cb62-638" aria-hidden="true" tabindex="-1"></a>The top 6 spenders stand out not only in their mean spending habits but they continue to spend more and more.</span>
<span id="cb62-641"><a href="#cb62-641" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-642"><a href="#cb62-642" aria-hidden="true" tabindex="-1"></a>statsViz2<span class="ot">&lt;-</span> byRegionStats_USD<span class="sc">%&gt;%</span></span>
<span id="cb62-643"><a href="#cb62-643" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">test =</span> <span class="fu">fct_reorder</span>(Region,<span class="fu">desc</span>(mean)))<span class="sc">%&gt;%</span></span>
<span id="cb62-644"><a href="#cb62-644" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">y =</span> test, <span class="at">x =</span> mean))<span class="sc">+</span>  </span>
<span id="cb62-645"><a href="#cb62-645" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region, <span class="at">alpha=</span><span class="fl">0.9</span>, <span class="at">size=</span>max)) <span class="sc">+</span></span>
<span id="cb62-646"><a href="#cb62-646" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>,<span class="at">color=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb62-647"><a href="#cb62-647" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Certain Regions on average spend more than others"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-648"><a href="#cb62-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-649"><a href="#cb62-649" aria-hidden="true" tabindex="-1"></a>statsViz2</span>
<span id="cb62-650"><a href="#cb62-650" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-651"><a href="#cb62-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-652"><a href="#cb62-652" aria-hidden="true" tabindex="-1"></a><span class="fu">### Top 6 spenders over time</span></span>
<span id="cb62-653"><a href="#cb62-653" aria-hidden="true" tabindex="-1"></a>This data is scaled for each country on the Y axis so that you can see the shape of the spending compared to global averages. I found the below interesting in that it paints the story of the US setting the pace and overall shape of the graph with East Asia playing a bit of catchup, mostly driven by China.</span>
<span id="cb62-654"><a href="#cb62-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-655"><a href="#cb62-655" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE}</span></span>
<span id="cb62-656"><a href="#cb62-656" aria-hidden="true" tabindex="-1"></a>byRegionStats_year_top6<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-657"><a href="#cb62-657" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-658"><a href="#cb62-658" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-659"><a href="#cb62-659" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend <span class="sc">==</span> <span class="st">'MilitarySpend_currentUSD'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-660"><a href="#cb62-660" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">==</span> top6_mean)<span class="sc">%&gt;%</span></span>
<span id="cb62-661"><a href="#cb62-661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb62-662"><a href="#cb62-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-663"><a href="#cb62-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-664"><a href="#cb62-664" aria-hidden="true" tabindex="-1"></a><span class="co"># add global average overlay</span></span>
<span id="cb62-665"><a href="#cb62-665" aria-hidden="true" tabindex="-1"></a>GlobalAverage<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-666"><a href="#cb62-666" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-667"><a href="#cb62-667" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-668"><a href="#cb62-668" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">GlobalAverage =</span> <span class="fu">mean</span>(Spend),<span class="at">GlobalStandardDev =</span> <span class="fu">sd</span>(Spend))</span>
<span id="cb62-669"><a href="#cb62-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-670"><a href="#cb62-670" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6<span class="ot">&lt;-</span> byRegionStats_year_top6<span class="sc">%&gt;%</span></span>
<span id="cb62-671"><a href="#cb62-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb62-672"><a href="#cb62-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb62-673"><a href="#cb62-673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> GlobalAverage,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>GlobalAverage))<span class="sc">+</span></span>
<span id="cb62-674"><a href="#cb62-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb62-675"><a href="#cb62-675" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Raw Mean Spend in USD for top 6 Spenders with Global Average Overlay"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-676"><a href="#cb62-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-677"><a href="#cb62-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-678"><a href="#cb62-678" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6</span>
<span id="cb62-679"><a href="#cb62-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-680"><a href="#cb62-680" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-681"><a href="#cb62-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-682"><a href="#cb62-682" aria-hidden="true" tabindex="-1"></a><span class="fu">### Top 6 spenders over time with GDP raw value overlay</span></span>
<span id="cb62-683"><a href="#cb62-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-684"><a href="#cb62-684" aria-hidden="true" tabindex="-1"></a>In order to show the raw values of military spend and GDP for the top 6 spenders I back calculate the true GDP spend values from the percentage of military spend. This gives an idea of how the relationship of money spent on military causes and domestic production is shaped. We can see that for the most part raw GDP spend increases steadily, while we see more dramatic swings in military spending. An interesting point of note however is the increase in military spending in Eastern Europe and the Middle East associated with a dip in the regions GDP. If I were to continue to expand the report this would be an area of investigation. </span>
<span id="cb62-685"><a href="#cb62-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-686"><a href="#cb62-686" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE}</span></span>
<span id="cb62-687"><a href="#cb62-687" aria-hidden="true" tabindex="-1"></a>byRegionStats_year_top6_GDP<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-688"><a href="#cb62-688" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">%in%</span> top6_mean)<span class="sc">%&gt;%</span></span>
<span id="cb62-689"><a href="#cb62-689" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> viewOfSpend,<span class="at">values_from =</span> Spend)<span class="sc">%&gt;%</span></span>
<span id="cb62-690"><a href="#cb62-690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rawGDP =</span> <span class="st">`</span><span class="at">MilitarySpend_currentUSD</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">MilitarySpend_ShareofGDP</span><span class="st">`</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-691"><a href="#cb62-691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-692"><a href="#cb62-692" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">meanUSD =</span> <span class="fu">mean</span>(MilitarySpend_currentUSD, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">meanGDP =</span><span class="fu">mean</span>(rawGDP,<span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb62-693"><a href="#cb62-693" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-694"><a href="#cb62-694" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-695"><a href="#cb62-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-696"><a href="#cb62-696" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6_GDP<span class="ot">&lt;-</span> byRegionStats_year_top6<span class="sc">%&gt;%</span></span>
<span id="cb62-697"><a href="#cb62-697" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb62-698"><a href="#cb62-698" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region)) <span class="sc">+</span></span>
<span id="cb62-699"><a href="#cb62-699" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> byRegionStats_year_top6_GDP,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>meanGDP))<span class="sc">+</span></span>
<span id="cb62-700"><a href="#cb62-700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb62-701"><a href="#cb62-701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Raw Mean Spend in USD for top 6 Spenders with raw GDP Overlay"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-702"><a href="#cb62-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-703"><a href="#cb62-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-704"><a href="#cb62-704" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6_GDP</span>
<span id="cb62-705"><a href="#cb62-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-706"><a href="#cb62-706" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-707"><a href="#cb62-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-708"><a href="#cb62-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-709"><a href="#cb62-709" aria-hidden="true" tabindex="-1"></a><span class="fu">### Top and bottom 5 spenders</span></span>
<span id="cb62-710"><a href="#cb62-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-713"><a href="#cb62-713" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-714"><a href="#cb62-714" aria-hidden="true" tabindex="-1"></a>topMean<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-715"><a href="#cb62-715" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb62-716"><a href="#cb62-716" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb62-717"><a href="#cb62-717" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-718"><a href="#cb62-718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mean<span class="sc">&gt;=</span><span class="dv">1880</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-719"><a href="#cb62-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb62-720"><a href="#cb62-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-721"><a href="#cb62-721" aria-hidden="true" tabindex="-1"></a>botMean<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-722"><a href="#cb62-722" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,Region,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb62-723"><a href="#cb62-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>),</span>
<span id="cb62-724"><a href="#cb62-724" aria-hidden="true" tabindex="-1"></a>            <span class="at">std =</span> <span class="fu">sd</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-725"><a href="#cb62-725" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mean<span class="sc">&gt;=</span><span class="dv">1880</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-726"><a href="#cb62-726" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean)</span>
<span id="cb62-727"><a href="#cb62-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-728"><a href="#cb62-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-729"><a href="#cb62-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-730"><a href="#cb62-730" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-731"><a href="#cb62-731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Afghanistan"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-732"><a href="#cb62-732" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()<span class="sc">%&gt;%</span></span>
<span id="cb62-733"><a href="#cb62-733" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(Spend)</span>
<span id="cb62-734"><a href="#cb62-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-735"><a href="#cb62-735" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-736"><a href="#cb62-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-737"><a href="#cb62-737" aria-hidden="true" tabindex="-1"></a>Top 5 spenders on average:</span>
<span id="cb62-738"><a href="#cb62-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-739"><a href="#cb62-739" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-740"><a href="#cb62-740" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(topMean)</span>
<span id="cb62-741"><a href="#cb62-741" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-742"><a href="#cb62-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-743"><a href="#cb62-743" aria-hidden="true" tabindex="-1"></a>Bottom 5 spenders on average:</span>
<span id="cb62-744"><a href="#cb62-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-745"><a href="#cb62-745" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-746"><a href="#cb62-746" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(botMean)</span>
<span id="cb62-747"><a href="#cb62-747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-748"><a href="#cb62-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-749"><a href="#cb62-749" aria-hidden="true" tabindex="-1"></a><span class="fu">## Top spenders by Country</span></span>
<span id="cb62-750"><a href="#cb62-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-751"><a href="#cb62-751" aria-hidden="true" tabindex="-1"></a>In the following analysis I will be looking at significant events which</span>
<span id="cb62-752"><a href="#cb62-752" aria-hidden="true" tabindex="-1"></a>impacted some if not all of the world. For the sake of clarity I will</span>
<span id="cb62-753"><a href="#cb62-753" aria-hidden="true" tabindex="-1"></a>only be focusing on a select group of individual countries which are</span>
<span id="cb62-754"><a href="#cb62-754" aria-hidden="true" tabindex="-1"></a>not directly involved. The top 10 countries which stand out as</span>
<span id="cb62-755"><a href="#cb62-755" aria-hidden="true" tabindex="-1"></a>significant spenders in the last 10 years will be the ones focused on.</span>
<span id="cb62-756"><a href="#cb62-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-759"><a href="#cb62-759" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-760"><a href="#cb62-760" aria-hidden="true" tabindex="-1"></a><span class="co"># getting top 10 mean spenders in last 10 years</span></span>
<span id="cb62-761"><a href="#cb62-761" aria-hidden="true" tabindex="-1"></a>topMeanCountries<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-762"><a href="#cb62-762" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,viewOfSpend)<span class="sc">%&gt;%</span></span>
<span id="cb62-763"><a href="#cb62-763" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year<span class="sc">&gt;=</span><span class="dv">2012</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-764"><a href="#cb62-764" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-765"><a href="#cb62-765" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>,<span class="at">sigfig=</span><span class="dv">1</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-766"><a href="#cb62-766" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))<span class="sc">%&gt;%</span></span>
<span id="cb62-767"><a href="#cb62-767" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb62-768"><a href="#cb62-768" aria-hidden="true" tabindex="-1"></a>topMeanCountriesVec<span class="ot">&lt;-</span>topMeanCountries<span class="sc">$</span>Country</span>
<span id="cb62-769"><a href="#cb62-769" aria-hidden="true" tabindex="-1"></a>topMeanCountriesVec</span>
<span id="cb62-770"><a href="#cb62-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-771"><a href="#cb62-771" aria-hidden="true" tabindex="-1"></a><span class="co"># Raw data for these 10 countries</span></span>
<span id="cb62-772"><a href="#cb62-772" aria-hidden="true" tabindex="-1"></a>top10SpendCountriesbyYear<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-773"><a href="#cb62-773" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-774"><a href="#cb62-774" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-775"><a href="#cb62-775" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> topMeanCountriesVec)</span>
<span id="cb62-776"><a href="#cb62-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-777"><a href="#cb62-777" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-778"><a href="#cb62-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-781"><a href="#cb62-781" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-782"><a href="#cb62-782" aria-hidden="true" tabindex="-1"></a>grouped<span class="ot">&lt;-</span>top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb62-783"><a href="#cb62-783" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">%&gt;%</span></span>
<span id="cb62-784"><a href="#cb62-784" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Country)</span>
<span id="cb62-785"><a href="#cb62-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-786"><a href="#cb62-786" aria-hidden="true" tabindex="-1"></a>top10CountryTibbles<span class="ot">&lt;-</span>grouped<span class="sc">%&gt;%</span></span>
<span id="cb62-787"><a href="#cb62-787" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(Country)</span>
<span id="cb62-788"><a href="#cb62-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-789"><a href="#cb62-789" aria-hidden="true" tabindex="-1"></a><span class="co"># Using PURR here! Pretty powerful.</span></span>
<span id="cb62-790"><a href="#cb62-790" aria-hidden="true" tabindex="-1"></a>  <span class="co"># result is list of tibbles which have been processed to contain YoY spend increases</span></span>
<span id="cb62-791"><a href="#cb62-791" aria-hidden="true" tabindex="-1"></a>top10CountryTibblesYoY<span class="ot">&lt;-</span> <span class="fu">map</span>(top10CountryTibbles,<span class="sc">~</span> .x <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">percentChangeYoY =</span> ((Spend <span class="sc">-</span> <span class="fu">lag</span>(Spend))<span class="sc">/</span>Spend)<span class="sc">*</span><span class="dv">100</span>))</span>
<span id="cb62-792"><a href="#cb62-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-793"><a href="#cb62-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-794"><a href="#cb62-794" aria-hidden="true" tabindex="-1"></a><span class="co"># I then stack these DF on top of eachother to create one single DF to interact with.</span></span>
<span id="cb62-795"><a href="#cb62-795" aria-hidden="true" tabindex="-1"></a>top10CountryYoY<span class="ot">&lt;-</span><span class="fu">bind_rows</span>(top10CountryTibblesYoY)</span>
<span id="cb62-796"><a href="#cb62-796" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb62-797"><a href="#cb62-797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-798"><a href="#cb62-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-799"><a href="#cb62-799" aria-hidden="true" tabindex="-1"></a>Plots detailing YoY(Year over Year) spending for each of the top 10 spenders. Green and green line segments indicate that year having an increase or decrease in spending respectively. From this visualization we can see more often than not the spending of most nations is increasing. Germany, France, Japan, and the UK stand out as those who do the most jumping back and forth between spending more or less YoY.</span>
<span id="cb62-800"><a href="#cb62-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-801"><a href="#cb62-801" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE}</span></span>
<span id="cb62-802"><a href="#cb62-802" aria-hidden="true" tabindex="-1"></a>rect_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(  <span class="at">xmin=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">1990</span>),</span>
<span id="cb62-803"><a href="#cb62-803" aria-hidden="true" tabindex="-1"></a>                          <span class="at">xmax=</span><span class="fu">c</span>(<span class="dv">2020</span>,<span class="dv">2020</span>),</span>
<span id="cb62-804"><a href="#cb62-804" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">100</span>,<span class="dv">0</span>),</span>
<span id="cb62-805"><a href="#cb62-805" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymax=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20</span>),</span>
<span id="cb62-806"><a href="#cb62-806" aria-hidden="true" tabindex="-1"></a>                          <span class="at">col=</span><span class="fu">c</span>(<span class="st">"green"</span>,<span class="st">"red"</span>))</span>
<span id="cb62-807"><a href="#cb62-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-808"><a href="#cb62-808" aria-hidden="true" tabindex="-1"></a>PercentChangeTop10Countries<span class="ot">&lt;-</span>top10CountryYoY<span class="sc">%&gt;%</span></span>
<span id="cb62-809"><a href="#cb62-809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year<span class="sc">&gt;=</span><span class="dv">1992</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-810"><a href="#cb62-810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posOrNeg =</span> <span class="fu">case_when</span>(</span>
<span id="cb62-811"><a href="#cb62-811" aria-hidden="true" tabindex="-1"></a>    percentChangeYoY<span class="sc">&gt;</span><span class="dv">0</span> <span class="sc">~</span> <span class="st">"Positive"</span>,</span>
<span id="cb62-812"><a href="#cb62-812" aria-hidden="true" tabindex="-1"></a>    percentChangeYoY<span class="sc">&lt;</span><span class="dv">0</span> <span class="sc">~</span> <span class="st">"Negative"</span></span>
<span id="cb62-813"><a href="#cb62-813" aria-hidden="true" tabindex="-1"></a>  ))<span class="sc">%&gt;%</span></span>
<span id="cb62-814"><a href="#cb62-814" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb62-815"><a href="#cb62-815" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> percentChangeYoY,<span class="at">color =</span> <span class="fu">as.factor</span>(posOrNeg)))<span class="sc">+</span></span>
<span id="cb62-816"><a href="#cb62-816" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(Country),<span class="at">scale=</span><span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb62-817"><a href="#cb62-817" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb62-818"><a href="#cb62-818" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">group=</span><span class="cn">NA</span>)<span class="sc">+</span><span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"YoY Positive or negative spend"</span>))</span>
<span id="cb62-819"><a href="#cb62-819" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-820"><a href="#cb62-820" aria-hidden="true" tabindex="-1"></a>PercentChangeTop10Countries</span>
<span id="cb62-821"><a href="#cb62-821" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-822"><a href="#cb62-822" aria-hidden="true" tabindex="-1"></a>To give some perspective on just how much the US and now recently China spends on their military I have left the following vizualization of the top 10 spenders unscaled.</span>
<span id="cb62-823"><a href="#cb62-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-826"><a href="#cb62-826" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-827"><a href="#cb62-827" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="ot">&lt;-</span> top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb62-828"><a href="#cb62-828" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb62-829"><a href="#cb62-829" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>,)) <span class="sc">+</span></span>
<span id="cb62-830"><a href="#cb62-830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-831"><a href="#cb62-831" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb62-832"><a href="#cb62-832" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"East asia and NA dominate raw spend"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-833"><a href="#cb62-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-834"><a href="#cb62-834" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="sc">+</span></span>
<span id="cb62-835"><a href="#cb62-835" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb62-836"><a href="#cb62-836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb62-837"><a href="#cb62-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-838"><a href="#cb62-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-839"><a href="#cb62-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-840"><a href="#cb62-840" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-841"><a href="#cb62-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-842"><a href="#cb62-842" aria-hidden="true" tabindex="-1"></a><span class="fu"># 9/11 analysis</span></span>
<span id="cb62-843"><a href="#cb62-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-844"><a href="#cb62-844" aria-hidden="true" tabindex="-1"></a>The first major global event I want to intentionally focus in on is the September 11th, 2001 attack on the World Trade Center in New York City. This terrorist attack on the United States left the world stunned and had lasting effects on global military spending.</span>
<span id="cb62-845"><a href="#cb62-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-846"><a href="#cb62-846" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;center&gt;</span></span>
<span id="cb62-847"><a href="#cb62-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-848"><a href="#cb62-848" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="al">![9/11 Memorial Lights](MemorialImage.jpg)</span><span class="co">](https://www.911memorial.org/visit/memorial/names-911-memorial)</span></span>
<span id="cb62-849"><a href="#cb62-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-850"><a href="#cb62-850" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;center&gt;</span></span>
<span id="cb62-851"><a href="#cb62-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-852"><a href="#cb62-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-853"><a href="#cb62-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-854"><a href="#cb62-854" aria-hidden="true" tabindex="-1"></a>Timeline</span>
<span id="cb62-855"><a href="#cb62-855" aria-hidden="true" tabindex="-1"></a>1998 - Bill Clinton warned bin laden preparing to hijack US</span>
<span id="cb62-856"><a href="#cb62-856" aria-hidden="true" tabindex="-1"></a>aircraft</span>
<span id="cb62-857"><a href="#cb62-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-858"><a href="#cb62-858" aria-hidden="true" tabindex="-1"></a>1999 - Germany intercepts intel about plane crash</span>
<span id="cb62-859"><a href="#cb62-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-860"><a href="#cb62-860" aria-hidden="true" tabindex="-1"></a>2001 sept- Attack occurs oct-US attack on Afghanistan starts(end in</span>
<span id="cb62-861"><a href="#cb62-861" aria-hidden="true" tabindex="-1"></a>2021)</span>
<span id="cb62-862"><a href="#cb62-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-863"><a href="#cb62-863" aria-hidden="true" tabindex="-1"></a>Parties Involved</span>
<span id="cb62-864"><a href="#cb62-864" aria-hidden="true" tabindex="-1"></a>  Al-Qaeda </span>
<span id="cb62-865"><a href="#cb62-865" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Saudi Arabia </span>
<span id="cb62-866"><a href="#cb62-866" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Kuwait</span>
<span id="cb62-867"><a href="#cb62-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-868"><a href="#cb62-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-869"><a href="#cb62-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-870"><a href="#cb62-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-871"><a href="#cb62-871" aria-hidden="true" tabindex="-1"></a>Look at US spending before and after</span>
<span id="cb62-874"><a href="#cb62-874" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-875"><a href="#cb62-875" aria-hidden="true" tabindex="-1"></a>timeLine<span class="ot">&lt;-</span></span>
<span id="cb62-876"><a href="#cb62-876" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb62-877"><a href="#cb62-877" aria-hidden="true" tabindex="-1"></a>    <span class="at">xintercept=</span> <span class="fu">c</span>(<span class="dv">1988</span>,<span class="dv">2001</span>),</span>
<span id="cb62-878"><a href="#cb62-878" aria-hidden="true" tabindex="-1"></a>    <span class="at">Key_Events =</span> <span class="fu">c</span>(<span class="st">"US warned of possible airplane hijack"</span>,<span class="st">"2001 attack on United States"</span>),</span>
<span id="cb62-879"><a href="#cb62-879" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">c</span>(<span class="st">"black"</span>,<span class="st">"red"</span>),</span>
<span id="cb62-880"><a href="#cb62-880" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb62-881"><a href="#cb62-881" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-882"><a href="#cb62-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-883"><a href="#cb62-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-884"><a href="#cb62-884" aria-hidden="true" tabindex="-1"></a>US911<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-885"><a href="#cb62-885" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-886"><a href="#cb62-886" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">'United States of America'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-887"><a href="#cb62-887" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-888"><a href="#cb62-888" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb62-889"><a href="#cb62-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-890"><a href="#cb62-890" aria-hidden="true" tabindex="-1"></a> us911Plot<span class="ot">&lt;-</span> US911<span class="sc">%&gt;%</span></span>
<span id="cb62-891"><a href="#cb62-891" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb62-892"><a href="#cb62-892" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb62-893"><a href="#cb62-893" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">data=</span> timeLine,<span class="fu">aes</span>(<span class="at">xintercept=</span>xintercept,<span class="at">color=</span>Key_Events))<span class="sc">+</span></span>
<span id="cb62-894"><a href="#cb62-894" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Key Events"</span>)<span class="sc">+</span></span>
<span id="cb62-895"><a href="#cb62-895" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> timeLine<span class="sc">$</span>color)<span class="sc">+</span></span>
<span id="cb62-896"><a href="#cb62-896" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">viewOfSpend</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb62-897"><a href="#cb62-897" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"United States Military response to 9/11"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)<span class="sc">+</span></span>
<span id="cb62-898"><a href="#cb62-898" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb62-899"><a href="#cb62-899" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb62-900"><a href="#cb62-900" aria-hidden="true" tabindex="-1"></a>us911Plot</span>
<span id="cb62-901"><a href="#cb62-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-902"><a href="#cb62-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-903"><a href="#cb62-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-904"><a href="#cb62-904" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-905"><a href="#cb62-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-906"><a href="#cb62-906" aria-hidden="true" tabindex="-1"></a>It looks like the event of 9/11 had a pretty significant impact on US</span>
<span id="cb62-907"><a href="#cb62-907" aria-hidden="true" tabindex="-1"></a>spending. While initially it looks like spending just continues to rise</span>
<span id="cb62-908"><a href="#cb62-908" aria-hidden="true" tabindex="-1"></a>when looking at the raw USD spending, it is refreshing to see the share</span>
<span id="cb62-909"><a href="#cb62-909" aria-hidden="true" tabindex="-1"></a>of Gov spend has trended down in recent years as money is being spent</span>
<span id="cb62-910"><a href="#cb62-910" aria-hidden="true" tabindex="-1"></a>elsewhere. Another interesting observation is that there was a slight</span>
<span id="cb62-911"><a href="#cb62-911" aria-hidden="true" tabindex="-1"></a>upward trend in spending prior to the attack in 2001 however the</span>
<span id="cb62-912"><a href="#cb62-912" aria-hidden="true" tabindex="-1"></a>spending increase was mostly reactionary.</span>
<span id="cb62-913"><a href="#cb62-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-916"><a href="#cb62-916" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-917"><a href="#cb62-917" aria-hidden="true" tabindex="-1"></a>us911Plot<span class="sc">+</span></span>
<span id="cb62-918"><a href="#cb62-918" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">2010</span>)))</span>
<span id="cb62-919"><a href="#cb62-919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-920"><a href="#cb62-920" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-921"><a href="#cb62-921" aria-hidden="true" tabindex="-1"></a>If we look at Spending for the other top 10 Spending countries we see that their spending increased along with the United States.</span>
<span id="cb62-924"><a href="#cb62-924" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-925"><a href="#cb62-925" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="ot">&lt;-</span> top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb62-926"><a href="#cb62-926" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb62-927"><a href="#cb62-927" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb62-928"><a href="#cb62-928" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-929"><a href="#cb62-929" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb62-930"><a href="#cb62-930" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Top 10 spending Nations reacted to 2001 attack on the World Trade Center"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-931"><a href="#cb62-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-932"><a href="#cb62-932" aria-hidden="true" tabindex="-1"></a>top10Countries<span class="sc">+</span></span>
<span id="cb62-933"><a href="#cb62-933" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2001</span>,<span class="at">color=</span><span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb62-934"><a href="#cb62-934" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb62-935"><a href="#cb62-935" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)<span class="sc">+</span></span>
<span id="cb62-936"><a href="#cb62-936" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">2010</span>)))</span>
<span id="cb62-937"><a href="#cb62-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-938"><a href="#cb62-938" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-939"><a href="#cb62-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-940"><a href="#cb62-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-941"><a href="#cb62-941" aria-hidden="true" tabindex="-1"></a><span class="fu"># Ukraine war analysis</span></span>
<span id="cb62-942"><a href="#cb62-942" aria-hidden="true" tabindex="-1"></a>Due to the recency of the Russo-Ukrainian War I will only be able to provide an analysis of the time period building up to the invasion of Ukraine. In order to get an idea of if and how different regions, and their respective countries, prepared for the invasion I overlay the top 10 spenders with key dates.</span>
<span id="cb62-943"><a href="#cb62-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-946"><a href="#cb62-946" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-947"><a href="#cb62-947" aria-hidden="true" tabindex="-1"></a>top10CountriesUkraineWar<span class="ot">&lt;-</span> top10SpendCountriesbyYear<span class="sc">%&gt;%</span></span>
<span id="cb62-948"><a href="#cb62-948" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb62-949"><a href="#cb62-949" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb62-950"><a href="#cb62-950" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-951"><a href="#cb62-951" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb62-952"><a href="#cb62-952" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Top 10 spending Nations prepared for 2022 invasion of Ukraine"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-953"><a href="#cb62-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-954"><a href="#cb62-954" aria-hidden="true" tabindex="-1"></a>top10CountriesUkraineWar<span class="sc">+</span></span>
<span id="cb62-955"><a href="#cb62-955" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>,<span class="at">color=</span><span class="st">'black'</span>)<span class="sc">+</span></span>
<span id="cb62-956"><a href="#cb62-956" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2015</span>,<span class="at">color=</span><span class="st">'black'</span>)<span class="sc">+</span><span class="co"># war in the donbas</span></span>
<span id="cb62-957"><a href="#cb62-957" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb62-958"><a href="#cb62-958" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)<span class="sc">+</span></span>
<span id="cb62-959"><a href="#cb62-959" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">2010</span>,<span class="dv">2020</span>)))</span>
<span id="cb62-960"><a href="#cb62-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-961"><a href="#cb62-961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-962"><a href="#cb62-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-963"><a href="#cb62-963" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-964"><a href="#cb62-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-965"><a href="#cb62-965" aria-hidden="true" tabindex="-1"></a>From the above we can somewhat see a trend in increased spending from the top 10 spenders. Next we investigate the Nations geographically surrounding Russia. Upon Putin's first election, spending grew and then come his re-election spending increased at an expedited rate in Central and Eastern Europe.</span>
<span id="cb62-966"><a href="#cb62-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-969"><a href="#cb62-969" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-970"><a href="#cb62-970" aria-hidden="true" tabindex="-1"></a>ukrainePlot<span class="ot">&lt;-</span> combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-971"><a href="#cb62-971" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-972"><a href="#cb62-972" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Eastern Europe"</span>,<span class="st">"Central Europe"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-973"><a href="#cb62-973" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country<span class="sc">!=</span><span class="st">"Russia"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-974"><a href="#cb62-974" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year<span class="sc">&gt;=</span><span class="dv">1995</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-975"><a href="#cb62-975" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-976"><a href="#cb62-976" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Spend=</span><span class="fu">mean</span>(Spend))<span class="sc">%&gt;%</span></span>
<span id="cb62-977"><a href="#cb62-977" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb62-978"><a href="#cb62-978" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb62-979"><a href="#cb62-979" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-980"><a href="#cb62-980" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb62-981"><a href="#cb62-981" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Russian Bordering Nations responded to Putin election and invasion"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-982"><a href="#cb62-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-983"><a href="#cb62-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-984"><a href="#cb62-984" aria-hidden="true" tabindex="-1"></a>UkrainePlot<span class="sc">+</span></span>
<span id="cb62-985"><a href="#cb62-985" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span><span class="co"># official invasion</span></span>
<span id="cb62-986"><a href="#cb62-986" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2020</span>,<span class="at">y=</span><span class="dv">500</span>,<span class="at">label=</span><span class="st">"Invasion of Ukraine"</span>,<span class="at">hjust=</span><span class="fl">0.5</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb62-987"><a href="#cb62-987" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2015</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span><span class="co"># war in the donbas</span></span>
<span id="cb62-988"><a href="#cb62-988" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2015</span>,<span class="at">y=</span><span class="dv">500</span>,<span class="at">label=</span><span class="st">"War in the Donbas"</span>,<span class="at">hjust=</span><span class="fl">0.5</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb62-989"><a href="#cb62-989" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2004</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span> <span class="co"># putin first election</span></span>
<span id="cb62-990"><a href="#cb62-990" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2004</span>,<span class="at">y=</span><span class="dv">1500</span>,<span class="at">label=</span><span class="st">"Putin re-elected"</span>,<span class="at">hjust=</span><span class="fl">0.7</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb62-991"><a href="#cb62-991" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2000</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span> <span class="co"># putin Wins presidential election securing second term</span></span>
<span id="cb62-992"><a href="#cb62-992" aria-hidden="true" tabindex="-1"></a>        <span class="fu">annotate</span>(<span class="st">"text"</span>,<span class="at">x=</span><span class="dv">2000</span>,<span class="at">y=</span><span class="dv">1500</span>,<span class="at">label=</span><span class="st">"Putin wins first election"</span>,<span class="at">hjust=</span><span class="fl">0.7</span>,<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.1</span>,<span class="at">color=</span><span class="st">"black"</span>,<span class="at">angle=</span><span class="st">'90'</span>,<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb62-993"><a href="#cb62-993" aria-hidden="true" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb62-994"><a href="#cb62-994" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)</span>
<span id="cb62-995"><a href="#cb62-995" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-996"><a href="#cb62-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-997"><a href="#cb62-997" aria-hidden="true" tabindex="-1"></a>Nations surrounding Ukraine and Russia had some of the most defined reactions to Putins re-election and the war in the Donbas. Vertical lines represetnt the same events as in the last vizualization.</span>
<span id="cb62-1000"><a href="#cb62-1000" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1001"><a href="#cb62-1001" aria-hidden="true" tabindex="-1"></a>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-1002"><a href="#cb62-1002" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-1003"><a href="#cb62-1003" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Russia"</span>,<span class="st">"Ukraine"</span>,<span class="st">"Poland"</span>,<span class="st">"Belarus"</span>,<span class="st">"Moldova"</span>,<span class="st">"Kazakhstan"</span>,<span class="st">"Romania"</span>,<span class="st">"Slovakia"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-1004"><a href="#cb62-1004" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Spend))<span class="sc">+</span>  </span>
<span id="cb62-1005"><a href="#cb62-1005" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country, <span class="at">alpha=</span><span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb62-1006"><a href="#cb62-1006" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb62-1007"><a href="#cb62-1007" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">alpha=</span><span class="st">"none"</span>)<span class="sc">+</span></span>
<span id="cb62-1008"><a href="#cb62-1008" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"How Top 10 spending Nations prepared for 2022 invasion of Ukraine"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)<span class="sc">+</span></span>
<span id="cb62-1009"><a href="#cb62-1009" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2020</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span><span class="co"># official invasion</span></span>
<span id="cb62-1010"><a href="#cb62-1010" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2015</span>,<span class="at">color=</span><span class="st">'red'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span><span class="co"># war in the donbas</span></span>
<span id="cb62-1011"><a href="#cb62-1011" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2004</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"solid"</span>)<span class="sc">+</span> <span class="co"># putin first election</span></span>
<span id="cb62-1012"><a href="#cb62-1012" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">2000</span>,<span class="at">color=</span><span class="st">'black'</span>,<span class="at">linetype=</span><span class="st">"dashed"</span>)<span class="sc">+</span> <span class="co"># putin Wins presidential election securing second term</span></span>
<span id="cb62-1013"><a href="#cb62-1013" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Country</span><span class="st">`</span>),<span class="at">scales =</span> <span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb62-1014"><a href="#cb62-1014" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x=</span><span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">60</span>,<span class="at">hjust=</span><span class="dv">1</span>),<span class="at">legend.position =</span> <span class="st">"None"</span>)<span class="sc">+</span></span>
<span id="cb62-1015"><a href="#cb62-1015" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>((<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">1990</span>,<span class="dv">2020</span>)))</span>
<span id="cb62-1016"><a href="#cb62-1016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1017"><a href="#cb62-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1018"><a href="#cb62-1018" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1019"><a href="#cb62-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1020"><a href="#cb62-1020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1021"><a href="#cb62-1021" aria-hidden="true" tabindex="-1"></a><span class="fu"># Global USD Military spending through all available years</span></span>
<span id="cb62-1022"><a href="#cb62-1022" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1025"><a href="#cb62-1025" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1026"><a href="#cb62-1026" aria-hidden="true" tabindex="-1"></a><span class="co"># might facet this out for all the tabs??</span></span>
<span id="cb62-1027"><a href="#cb62-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1028"><a href="#cb62-1028" aria-hidden="true" tabindex="-1"></a>GlobalReviewPlot<span class="ot">&lt;-</span> GlobalAverage<span class="sc">%&gt;%</span></span>
<span id="cb62-1029"><a href="#cb62-1029" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb62-1030"><a href="#cb62-1030" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> GlobalAverage,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>GlobalAverage),<span class="at">size=</span><span class="fl">1.5</span>)</span>
<span id="cb62-1031"><a href="#cb62-1031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1032"><a href="#cb62-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1033"><a href="#cb62-1033" aria-hidden="true" tabindex="-1"></a><span class="co"># annotations</span></span>
<span id="cb62-1034"><a href="#cb62-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1035"><a href="#cb62-1035" aria-hidden="true" tabindex="-1"></a>GlobalReviewPlot</span>
<span id="cb62-1036"><a href="#cb62-1036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1037"><a href="#cb62-1037" aria-hidden="true" tabindex="-1"></a><span class="co"># +</span></span>
<span id="cb62-1038"><a href="#cb62-1038" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_vline(xintercept = 2001,color="red")+#9/11</span></span>
<span id="cb62-1039"><a href="#cb62-1039" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_vline(xintercept = 2020,color="red")+#covid declared a pandemic march 11 2020</span></span>
<span id="cb62-1040"><a href="#cb62-1040" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_vline(xintercept = 2021,color="red")</span></span>
<span id="cb62-1041"><a href="#cb62-1041" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title="Average Global spending in USD")</span></span>
<span id="cb62-1042"><a href="#cb62-1042" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1043"><a href="#cb62-1043" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1044"><a href="#cb62-1044" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1045"><a href="#cb62-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1048"><a href="#cb62-1048" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1049"><a href="#cb62-1049" aria-hidden="true" tabindex="-1"></a>GlobalReviewPlot<span class="sc">+</span></span>
<span id="cb62-1050"><a href="#cb62-1050" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>GlobalAverage,<span class="fu">aes</span>(<span class="at">y=</span>GlobalAverage,<span class="at">ymin=</span>GlobalAverage<span class="sc">-</span>GlobalStandardDev,<span class="at">ymax=</span>GlobalAverage<span class="sc">+</span>GlobalStandardDev,<span class="at">x=</span>Year),<span class="at">alpha=</span><span class="fl">0.2</span>)</span>
<span id="cb62-1051"><a href="#cb62-1051" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1052"><a href="#cb62-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1053"><a href="#cb62-1053" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion</span></span>
<span id="cb62-1054"><a href="#cb62-1054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1055"><a href="#cb62-1055" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; "Every gun that is made, every warship launched, every rocket fired</span></span>
<span id="cb62-1056"><a href="#cb62-1056" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; signifies in the final sense, a theft from those who hunger and are</span></span>
<span id="cb62-1057"><a href="#cb62-1057" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; not fed, those who are cold and are not clothed. </span><span class="sc">\&gt;</span><span class="at"> </span><span class="sc">\&gt;</span><span class="at"> This world in</span></span>
<span id="cb62-1058"><a href="#cb62-1058" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; arms is not spending money alone. It is spending the sweat of its</span></span>
<span id="cb62-1059"><a href="#cb62-1059" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; laborers, the genius of its scientists, the hopes of its children.</span></span>
<span id="cb62-1060"><a href="#cb62-1060" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; This is not a way of life at all in any </span><span class="sc">\&gt;</span><span class="at"> true sense. Under the</span></span>
<span id="cb62-1061"><a href="#cb62-1061" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; clouds of war, it is humanity hanging on a cross of iron."</span></span>
<span id="cb62-1062"><a href="#cb62-1062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1063"><a href="#cb62-1063" aria-hidden="true" tabindex="-1"></a>Dwight D. Eisenhower</span>
<span id="cb62-1064"><a href="#cb62-1064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1065"><a href="#cb62-1065" aria-hidden="true" tabindex="-1"></a>After reviewing the data at a high level and diving deeper into spending surrounding 9/11 and the Russo-Ukraine war I have found a few facts have held true through the years. Powerful country Military spending rises like ships in high tide, when one goes up, they all do. In the years leading up to an altercation the nations involved often increased spending both in raw USD as well as percentage of their government spend and GDP. In the future I would like to spend some more time analyzing the tabs other than USD spend and look a little bit more at the times of peace and how countries would prioritize spending that time period. I had a lot of fun with this project and can say now that I am competent with R even when starting with zero experience beforehand. </span>
<span id="cb62-1066"><a href="#cb62-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1067"><a href="#cb62-1067" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1068"><a href="#cb62-1068" aria-hidden="true" tabindex="-1"></a><span class="fu"># Citations</span></span>
<span id="cb62-1069"><a href="#cb62-1069" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">1</span><span class="co">]</span></span>
<span id="cb62-1070"><a href="#cb62-1070" aria-hidden="true" tabindex="-1"></a>https://www.goodreads.com/quotes/tag/military-budget#:\~:text=%E2%80%9CEvery%20gun%20that%20is%20made,is%20not%20spending%20money%20alone.</span>
<span id="cb62-1071"><a href="#cb62-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1072"><a href="#cb62-1072" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">2</span><span class="co">]</span></span>
<span id="cb62-1073"><a href="#cb62-1073" aria-hidden="true" tabindex="-1"></a>https://www.sipri.org/about</span>
<span id="cb62-1074"><a href="#cb62-1074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1075"><a href="#cb62-1075" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">3</span><span class="co">]</span></span>
<span id="cb62-1076"><a href="#cb62-1076" aria-hidden="true" tabindex="-1"></a>R Core Team (2017). R: A language and environment for statistical</span>
<span id="cb62-1077"><a href="#cb62-1077" aria-hidden="true" tabindex="-1"></a>computing. R Foundation for Statistical Computing, Vienna, Austria. URL</span>
<span id="cb62-1078"><a href="#cb62-1078" aria-hidden="true" tabindex="-1"></a>https://www.R-project.org/.</span>
<span id="cb62-1079"><a href="#cb62-1079" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1080"><a href="#cb62-1080" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">4</span><span class="co">]</span></span>
<span id="cb62-1081"><a href="#cb62-1081" aria-hidden="true" tabindex="-1"></a>Wickham, H., &amp; Grolemund, G. (2016). R for data science: Visualize,</span>
<span id="cb62-1082"><a href="#cb62-1082" aria-hidden="true" tabindex="-1"></a>model, transform, tidy, and import data. OReilly Media.</span>
<span id="cb62-1083"><a href="#cb62-1083" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1084"><a href="#cb62-1084" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">5</span><span class="co">]</span></span>
<span id="cb62-1085"><a href="#cb62-1085" aria-hidden="true" tabindex="-1"></a>Tambudzai, Z. (2011). Determinants of military expenditure in Zimbabwe. The Economics of Peace and Security Journal, 6(2). doi:http://dx.doi.org/10.15355/epsj.6.2.41</span>
<span id="cb62-1086"><a href="#cb62-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1087"><a href="#cb62-1087" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">6</span><span class="co">]</span></span>
<span id="cb62-1088"><a href="#cb62-1088" aria-hidden="true" tabindex="-1"></a>https://www.investopedia.com/terms/g/gdp.asp</span>
<span id="cb62-1089"><a href="#cb62-1089" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1090"><a href="#cb62-1090" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">7</span><span class="co">]</span></span>
<span id="cb62-1091"><a href="#cb62-1091" aria-hidden="true" tabindex="-1"></a>Centers for Disease Control and Prevention. (2022, August 16). CDC Museum Covid-19 Timeline. Centers for Disease Control and Prevention. Retrieved December 7, 2022, from https://www.cdc.gov/museum/timeline/covid19.html </span>
<span id="cb62-1092"><a href="#cb62-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1093"><a href="#cb62-1093" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">8</span><span class="co">]</span> https://www.istockphoto.com/photo/9-11-memorial-beams-with-statue-of-liberty-and-lower-manhattan-gm1271263089-373908152</span>
<span id="cb62-1094"><a href="#cb62-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1095"><a href="#cb62-1095" aria-hidden="true" tabindex="-1"></a><span class="fu"># Appendix</span></span>
<span id="cb62-1096"><a href="#cb62-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1097"><a href="#cb62-1097" aria-hidden="true" tabindex="-1"></a>Full descriptions of source sheet tabs as provided by SIPRI:</span>
<span id="cb62-1098"><a href="#cb62-1098" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Introduction</span>
<span id="cb62-1099"><a href="#cb62-1099" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Estimates of world, regional and sub-regional totals in</span>
<span id="cb62-1100"><a href="#cb62-1100" aria-hidden="true" tabindex="-1"></a>    constant (2019) US\$ (billions).</span>
<span id="cb62-1101"><a href="#cb62-1101" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Data for military expenditure by country in current price local</span>
<span id="cb62-1102"><a href="#cb62-1102" aria-hidden="true" tabindex="-1"></a>    currency, presented according to each country's financial year.</span>
<span id="cb62-1103"><a href="#cb62-1103" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Data for military expenditure by country in current price local</span>
<span id="cb62-1104"><a href="#cb62-1104" aria-hidden="true" tabindex="-1"></a>    currency, presented according to calendar year.</span>
<span id="cb62-1105"><a href="#cb62-1105" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Data for military expenditure by country in constant price (2019)</span>
<span id="cb62-1106"><a href="#cb62-1106" aria-hidden="true" tabindex="-1"></a>    US\$ (millions), presented according to calendar year, and in</span>
<span id="cb62-1107"><a href="#cb62-1107" aria-hidden="true" tabindex="-1"></a>    current US\$m. for 2020.</span>
<span id="cb62-1108"><a href="#cb62-1108" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>Data for military expenditure by country in current US\$ (millions),</span>
<span id="cb62-1109"><a href="#cb62-1109" aria-hidden="true" tabindex="-1"></a>    presented according to calendar year.</span>
<span id="cb62-1110"><a href="#cb62-1110" aria-hidden="true" tabindex="-1"></a><span class="ss">7.  </span>Data for military expenditure by country as a share of GDP,</span>
<span id="cb62-1111"><a href="#cb62-1111" aria-hidden="true" tabindex="-1"></a>    presented according to calendar year.</span>
<span id="cb62-1112"><a href="#cb62-1112" aria-hidden="true" tabindex="-1"></a><span class="ss">8.  </span>Data for military expenditure per capita, in current US\$, presented</span>
<span id="cb62-1113"><a href="#cb62-1113" aria-hidden="true" tabindex="-1"></a>    according to calender year. (1988-2020 only)</span>
<span id="cb62-1114"><a href="#cb62-1114" aria-hidden="true" tabindex="-1"></a><span class="ss">9.  </span>Data for military expenditure as a percentage of general government</span>
<span id="cb62-1115"><a href="#cb62-1115" aria-hidden="true" tabindex="-1"></a>    expenditure. (1988-2020 only)</span>
<span id="cb62-1116"><a href="#cb62-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1117"><a href="#cb62-1117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1118"><a href="#cb62-1118" aria-hidden="true" tabindex="-1"></a>Additional Country info:</span>
<span id="cb62-1119"><a href="#cb62-1119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1120"><a href="#cb62-1120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1121"><a href="#cb62-1121" aria-hidden="true" tabindex="-1"></a>totNumCountries</span>
<span id="cb62-1122"><a href="#cb62-1122" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1123"><a href="#cb62-1123" aria-hidden="true" tabindex="-1"></a>List of Countries:</span>
<span id="cb62-1124"><a href="#cb62-1124" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1125"><a href="#cb62-1125" aria-hidden="true" tabindex="-1"></a>ListOfCountries</span>
<span id="cb62-1126"><a href="#cb62-1126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1127"><a href="#cb62-1127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1128"><a href="#cb62-1128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1129"><a href="#cb62-1129" aria-hidden="true" tabindex="-1"></a>Number of countries by region:</span>
<span id="cb62-1130"><a href="#cb62-1130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1131"><a href="#cb62-1131" aria-hidden="true" tabindex="-1"></a>NumCountriesByRegion</span>
<span id="cb62-1132"><a href="#cb62-1132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1133"><a href="#cb62-1133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1134"><a href="#cb62-1134" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cleaning with intermitant steps</span></span>
<span id="cb62-1135"><a href="#cb62-1135" aria-hidden="true" tabindex="-1"></a><span class="fu"># Input and Cleaning</span></span>
<span id="cb62-1136"><a href="#cb62-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1137"><a href="#cb62-1137" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reading in raw information</span></span>
<span id="cb62-1138"><a href="#cb62-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1139"><a href="#cb62-1139" aria-hidden="true" tabindex="-1"></a>The data provided by the Stockholm International Peace Research</span>
<span id="cb62-1140"><a href="#cb62-1140" aria-hidden="true" tabindex="-1"></a>Institute(SIPRI) was separated into multiple tabs in one excel .xlsx</span>
<span id="cb62-1141"><a href="#cb62-1141" aria-hidden="true" tabindex="-1"></a>file.</span>
<span id="cb62-1142"><a href="#cb62-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1143"><a href="#cb62-1143" aria-hidden="true" tabindex="-1"></a>In order to begin working I imported the tabs I planned to utilize,</span>
<span id="cb62-1144"><a href="#cb62-1144" aria-hidden="true" tabindex="-1"></a>skipping over some of the notes and title rows at the start of each tab.</span>
<span id="cb62-1145"><a href="#cb62-1145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1148"><a href="#cb62-1148" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1149"><a href="#cb62-1149" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">6</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb62-1150"><a href="#cb62-1150" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">7</span>],<span class="at">skip=</span><span class="dv">5</span>)</span>
<span id="cb62-1151"><a href="#cb62-1151" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"_data/SIPRI-Milex-data-1949-2021.xlsx"</span>,<span class="at">sheet=</span>sheets[<span class="dv">9</span>],<span class="at">skip=</span><span class="dv">7</span>)</span>
<span id="cb62-1152"><a href="#cb62-1152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1153"><a href="#cb62-1153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1154"><a href="#cb62-1154" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1155"><a href="#cb62-1155" aria-hidden="true" tabindex="-1"></a><span class="co"># output</span></span>
<span id="cb62-1156"><a href="#cb62-1156" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rawData_CurrentUSD)</span>
<span id="cb62-1157"><a href="#cb62-1157" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGDP)</span></span>
<span id="cb62-1158"><a href="#cb62-1158" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGovSpend)</span></span>
<span id="cb62-1159"><a href="#cb62-1159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1160"><a href="#cb62-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1161"><a href="#cb62-1161" aria-hidden="true" tabindex="-1"></a>Next I delete the first row of NA as well as the Notes column for each</span>
<span id="cb62-1162"><a href="#cb62-1162" aria-hidden="true" tabindex="-1"></a>tibble.</span>
<span id="cb62-1163"><a href="#cb62-1163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1166"><a href="#cb62-1166" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1167"><a href="#cb62-1167" aria-hidden="true" tabindex="-1"></a>rawData_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD[<span class="sc">-</span><span class="dv">1</span>,]  <span class="sc">%&gt;%</span></span>
<span id="cb62-1168"><a href="#cb62-1168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb62-1169"><a href="#cb62-1169" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGDP <span class="ot">&lt;-</span> rawData_ShareOfGDP[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb62-1170"><a href="#cb62-1170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Notes)</span>
<span id="cb62-1171"><a href="#cb62-1171" aria-hidden="true" tabindex="-1"></a>rawData_ShareOfGovSpend <span class="ot">&lt;-</span> rawData_ShareOfGovSpend[<span class="sc">-</span><span class="dv">1</span>,] <span class="sc">%&gt;%</span></span>
<span id="cb62-1172"><a href="#cb62-1172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">:-</span><span class="dv">3</span>)</span>
<span id="cb62-1173"><a href="#cb62-1173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1174"><a href="#cb62-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1175"><a href="#cb62-1175" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1176"><a href="#cb62-1176" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rawData_CurrentUSD)</span>
<span id="cb62-1177"><a href="#cb62-1177" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGDP)</span></span>
<span id="cb62-1178"><a href="#cb62-1178" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGovSpend)  </span></span>
<span id="cb62-1179"><a href="#cb62-1179" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1180"><a href="#cb62-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1181"><a href="#cb62-1181" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tidying Data</span></span>
<span id="cb62-1182"><a href="#cb62-1182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1183"><a href="#cb62-1183" aria-hidden="true" tabindex="-1"></a>Before pivoting my data I wanted to add a column for region. I chose to</span>
<span id="cb62-1184"><a href="#cb62-1184" aria-hidden="true" tabindex="-1"></a>do this with an algorithm as an exercise in iteration however it would</span>
<span id="cb62-1185"><a href="#cb62-1185" aria-hidden="true" tabindex="-1"></a>have been more practical to just hard code this column.</span>
<span id="cb62-1186"><a href="#cb62-1186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1187"><a href="#cb62-1187" aria-hidden="true" tabindex="-1"></a>The list of countries where there are NA's for every year:</span>
<span id="cb62-1188"><a href="#cb62-1188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1191"><a href="#cb62-1191" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1192"><a href="#cb62-1192" aria-hidden="true" tabindex="-1"></a>Regions <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-1193"><a href="#cb62-1193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">1949</span><span class="st">`</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-1194"><a href="#cb62-1194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country)</span>
<span id="cb62-1195"><a href="#cb62-1195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1196"><a href="#cb62-1196" aria-hidden="true" tabindex="-1"></a>Regions</span>
<span id="cb62-1197"><a href="#cb62-1197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1198"><a href="#cb62-1198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1199"><a href="#cb62-1199" aria-hidden="true" tabindex="-1"></a>You will notice that some of these are continents and sub-continents, I</span>
<span id="cb62-1200"><a href="#cb62-1200" aria-hidden="true" tabindex="-1"></a>wanted to break these into a <span class="in">`Region`</span> field. The pattern I saw and chose</span>
<span id="cb62-1201"><a href="#cb62-1201" aria-hidden="true" tabindex="-1"></a>to exploit was the fact that the overarching category would always be</span>
<span id="cb62-1202"><a href="#cb62-1202" aria-hidden="true" tabindex="-1"></a>followed with a more specific category such as the **Africa** followed</span>
<span id="cb62-1203"><a href="#cb62-1203" aria-hidden="true" tabindex="-1"></a>by **North Africa** values (see earlier print outs to see raw</span>
<span id="cb62-1204"><a href="#cb62-1204" aria-hidden="true" tabindex="-1"></a>information).</span>
<span id="cb62-1205"><a href="#cb62-1205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1206"><a href="#cb62-1206" aria-hidden="true" tabindex="-1"></a>I then added an empty vector into the tibble and populated it according</span>
<span id="cb62-1207"><a href="#cb62-1207" aria-hidden="true" tabindex="-1"></a>to the Country column using the pattern described above.</span>
<span id="cb62-1208"><a href="#cb62-1208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1209"><a href="#cb62-1209" aria-hidden="true" tabindex="-1"></a>Once I had left flags in the region column dictating where each region</span>
<span id="cb62-1210"><a href="#cb62-1210" aria-hidden="true" tabindex="-1"></a>was starting I could use <span class="in">`fill(Region)`</span> in order to populate the rest of</span>
<span id="cb62-1211"><a href="#cb62-1211" aria-hidden="true" tabindex="-1"></a>the column.</span>
<span id="cb62-1212"><a href="#cb62-1212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1215"><a href="#cb62-1215" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1216"><a href="#cb62-1216" aria-hidden="true" tabindex="-1"></a>emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">length</span>(rawData_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>)))<span class="do">## doing as numeric here as a hacky way to fill this with NA's, any better way?</span></span>
<span id="cb62-1217"><a href="#cb62-1217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1218"><a href="#cb62-1218" aria-hidden="true" tabindex="-1"></a><span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb62-1219"><a href="#cb62-1219" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> rawData_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-1220"><a href="#cb62-1220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Region =</span>emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb62-1221"><a href="#cb62-1221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1222"><a href="#cb62-1222" aria-hidden="true" tabindex="-1"></a><span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb62-1223"><a href="#cb62-1223" aria-hidden="true" tabindex="-1"></a>  <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb62-1224"><a href="#cb62-1224" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(mutated_CurrentUSD<span class="sc">$</span>Country) ){</span>
<span id="cb62-1225"><a href="#cb62-1225" aria-hidden="true" tabindex="-1"></a>   <span class="co">#if 2 nas in a row then do something</span></span>
<span id="cb62-1226"><a href="#cb62-1226" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i<span class="sc">+</span><span class="dv">1</span>]) ){</span>
<span id="cb62-1227"><a href="#cb62-1227" aria-hidden="true" tabindex="-1"></a>    mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>] <span class="co">#this works because when referencing an index outside of the vector R will return NA - Great to know.</span></span>
<span id="cb62-1228"><a href="#cb62-1228" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-1229"><a href="#cb62-1229" aria-hidden="true" tabindex="-1"></a>  <span class="co">#if the row is a region</span></span>
<span id="cb62-1230"><a href="#cb62-1230" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.na</span>(mutated_CurrentUSD<span class="sc">$</span><span class="st">`</span><span class="at">1949</span><span class="st">`</span>[i]) ){</span>
<span id="cb62-1231"><a href="#cb62-1231" aria-hidden="true" tabindex="-1"></a>     mutated_CurrentUSD<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> mutated_CurrentUSD<span class="sc">$</span>Country[i]</span>
<span id="cb62-1232"><a href="#cb62-1232" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-1233"><a href="#cb62-1233" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-1234"><a href="#cb62-1234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1235"><a href="#cb62-1235" aria-hidden="true" tabindex="-1"></a>mutated_CurrentUSD <span class="ot">&lt;-</span> mutated_CurrentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-1236"><a href="#cb62-1236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(Region)</span>
<span id="cb62-1237"><a href="#cb62-1237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1238"><a href="#cb62-1238" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mutated_CurrentUSD)</span>
<span id="cb62-1239"><a href="#cb62-1239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1240"><a href="#cb62-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1241"><a href="#cb62-1241" aria-hidden="true" tabindex="-1"></a>Now that I had my proof of concept for cleaning one of the sheets, in a</span>
<span id="cb62-1242"><a href="#cb62-1242" aria-hidden="true" tabindex="-1"></a>format I wanted, it was time to clean the other sheets as well. I could</span>
<span id="cb62-1243"><a href="#cb62-1243" aria-hidden="true" tabindex="-1"></a>have taken the above code and modified it to work for each of the</span>
<span id="cb62-1244"><a href="#cb62-1244" aria-hidden="true" tabindex="-1"></a>other tabs individually however I took the opportunity to practice with</span>
<span id="cb62-1245"><a href="#cb62-1245" aria-hidden="true" tabindex="-1"></a>functions and created the below function to clean any of the tabs once</span>
<span id="cb62-1246"><a href="#cb62-1246" aria-hidden="true" tabindex="-1"></a>they were loaded in and lightly pre-processed.</span>
<span id="cb62-1247"><a href="#cb62-1247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1248"><a href="#cb62-1248" aria-hidden="true" tabindex="-1"></a><span class="fu">## Clean and format function</span></span>
<span id="cb62-1249"><a href="#cb62-1249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1252"><a href="#cb62-1252" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1253"><a href="#cb62-1253" aria-hidden="true" tabindex="-1"></a><span class="do">## creating a function to clean the other sheets</span></span>
<span id="cb62-1254"><a href="#cb62-1254" aria-hidden="true" tabindex="-1"></a><span class="do">##Input: a partially cleaned tibble, must have been read in and had excess rows trimmed</span></span>
<span id="cb62-1255"><a href="#cb62-1255" aria-hidden="true" tabindex="-1"></a><span class="do">##output: tibble with regions correctly labeled and umbrella region categories i.e Africa above south Africa removed</span></span>
<span id="cb62-1256"><a href="#cb62-1256" aria-hidden="true" tabindex="-1"></a><span class="do">##Note: All sub categories contained the main category name in them, will use regex to create groupings in the future.</span></span>
<span id="cb62-1257"><a href="#cb62-1257" aria-hidden="true" tabindex="-1"></a>CleanData <span class="ot">&lt;-</span> <span class="cf">function</span>(inSheet){</span>
<span id="cb62-1258"><a href="#cb62-1258" aria-hidden="true" tabindex="-1"></a>  emptyRegionCol <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"character"</span>,<span class="at">length =</span> <span class="fu">nrow</span>(<span class="fu">select</span>(inSheet,<span class="dv">2</span>))))</span>
<span id="cb62-1259"><a href="#cb62-1259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1260"><a href="#cb62-1260" aria-hidden="true" tabindex="-1"></a>  <span class="co">#adding col to tibble to be populated later</span></span>
<span id="cb62-1261"><a href="#cb62-1261" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> inSheet <span class="sc">%&gt;%</span></span>
<span id="cb62-1262"><a href="#cb62-1262" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Region =</span> emptyRegionCol,<span class="at">.before=</span><span class="dv">2</span>)</span>
<span id="cb62-1263"><a href="#cb62-1263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1264"><a href="#cb62-1264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1265"><a href="#cb62-1265" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replacing the empty char in region with actual region if 2 NAs appear in a row</span></span>
<span id="cb62-1266"><a href="#cb62-1266" aria-hidden="true" tabindex="-1"></a>    <span class="co">#iterates along the indices of the Country vector</span></span>
<span id="cb62-1267"><a href="#cb62-1267" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(output<span class="sc">$</span>Country)){</span>
<span id="cb62-1268"><a href="#cb62-1268" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-1269"><a href="#cb62-1269" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]) <span class="sc">&amp;&amp;</span> <span class="fu">is.na</span>(output[[(i<span class="sc">+</span><span class="dv">1</span>),<span class="dv">3</span>]]))</span>
<span id="cb62-1270"><a href="#cb62-1270" aria-hidden="true" tabindex="-1"></a>      output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i<span class="sc">+</span><span class="dv">1</span>]</span>
<span id="cb62-1271"><a href="#cb62-1271" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-1272"><a href="#cb62-1272" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(output[[i,<span class="dv">3</span>]]))</span>
<span id="cb62-1273"><a href="#cb62-1273" aria-hidden="true" tabindex="-1"></a>       output<span class="sc">$</span>Region[i<span class="sc">+</span><span class="dv">1</span>] <span class="ot">&lt;-</span> output<span class="sc">$</span>Country[i]</span>
<span id="cb62-1274"><a href="#cb62-1274" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb62-1275"><a href="#cb62-1275" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-1276"><a href="#cb62-1276" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb62-1277"><a href="#cb62-1277" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fill</span>(Region)</span>
<span id="cb62-1278"><a href="#cb62-1278" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-1279"><a href="#cb62-1279" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-1280"><a href="#cb62-1280" aria-hidden="true" tabindex="-1"></a>  <span class="co"># removing header rows</span></span>
<span id="cb62-1281"><a href="#cb62-1281" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb62-1282"><a href="#cb62-1282" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(output[[<span class="dv">3</span>]]))</span>
<span id="cb62-1283"><a href="#cb62-1283" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-1284"><a href="#cb62-1284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1285"><a href="#cb62-1285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1286"><a href="#cb62-1286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1287"><a href="#cb62-1287" aria-hidden="true" tabindex="-1"></a>Below I call the function on each of the tibbles loaded in earlier. For</span>
<span id="cb62-1288"><a href="#cb62-1288" aria-hidden="true" tabindex="-1"></a>the sake of space I will only show one tab being cleaned.</span>
<span id="cb62-1289"><a href="#cb62-1289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1290"><a href="#cb62-1290" aria-hidden="true" tabindex="-1"></a>Before:</span>
<span id="cb62-1291"><a href="#cb62-1291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1292"><a href="#cb62-1292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1293"><a href="#cb62-1293" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_CurrentUSD)</span></span>
<span id="cb62-1294"><a href="#cb62-1294" aria-hidden="true" tabindex="-1"></a><span class="co">#head(rawData_ShareOfGDP)</span></span>
<span id="cb62-1295"><a href="#cb62-1295" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rawData_ShareOfGovSpend)</span>
<span id="cb62-1296"><a href="#cb62-1296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1297"><a href="#cb62-1297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1300"><a href="#cb62-1300" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1301"><a href="#cb62-1301" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_CurrentUSD)</span>
<span id="cb62-1302"><a href="#cb62-1302" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGovSpend)</span>
<span id="cb62-1303"><a href="#cb62-1303" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> <span class="fu">CleanData</span>(rawData_ShareOfGDP)</span>
<span id="cb62-1304"><a href="#cb62-1304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1305"><a href="#cb62-1305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1306"><a href="#cb62-1306" aria-hidden="true" tabindex="-1"></a>After:</span>
<span id="cb62-1307"><a href="#cb62-1307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1308"><a href="#cb62-1308" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_currentUSD)</span></span>
<span id="cb62-1309"><a href="#cb62-1309" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_ShareOfGovSpend)</span></span>
<span id="cb62-1310"><a href="#cb62-1310" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb62-1311"><a href="#cb62-1311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1312"><a href="#cb62-1312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1313"><a href="#cb62-1313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1314"><a href="#cb62-1314" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pivoting and Restructuring</span></span>
<span id="cb62-1315"><a href="#cb62-1315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1316"><a href="#cb62-1316" aria-hidden="true" tabindex="-1"></a><span class="fu">### Pivot and Notation Changes</span></span>
<span id="cb62-1317"><a href="#cb62-1317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1318"><a href="#cb62-1318" aria-hidden="true" tabindex="-1"></a>Next I pivot the years, it should be noted that both the pivoting and</span>
<span id="cb62-1319"><a href="#cb62-1319" aria-hidden="true" tabindex="-1"></a>Converting of notation could be handled by the clean function above, i</span>
<span id="cb62-1320"><a href="#cb62-1320" aria-hidden="true" tabindex="-1"></a>kept the steps separate so that I could show the progression of the</span>
<span id="cb62-1321"><a href="#cb62-1321" aria-hidden="true" tabindex="-1"></a>dataframe.</span>
<span id="cb62-1322"><a href="#cb62-1322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1323"><a href="#cb62-1323" aria-hidden="true" tabindex="-1"></a>I must also handle the xxx and ... notations. From the information page</span>
<span id="cb62-1324"><a href="#cb62-1324" aria-hidden="true" tabindex="-1"></a>of my data set I can see that the notation is described as follows:</span>
<span id="cb62-1325"><a href="#cb62-1325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1326"><a href="#cb62-1326" aria-hidden="true" tabindex="-1"></a>| Raw Notation | Meaning                                                                                 |</span>
<span id="cb62-1327"><a href="#cb62-1327" aria-hidden="true" tabindex="-1"></a>|------------------------------------|------------------------------------|</span>
<span id="cb62-1328"><a href="#cb62-1328" aria-hidden="true" tabindex="-1"></a>| ...          | Data unavailable                                                                        |</span>
<span id="cb62-1329"><a href="#cb62-1329" aria-hidden="true" tabindex="-1"></a>| xxx          | Country did not exist or was not independent during all or part of the year in question |</span>
<span id="cb62-1330"><a href="#cb62-1330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1331"><a href="#cb62-1331" aria-hidden="true" tabindex="-1"></a>For now I think I will just keep both as NA but will save this form of</span>
<span id="cb62-1332"><a href="#cb62-1332" aria-hidden="true" tabindex="-1"></a>the information for future use.</span>
<span id="cb62-1333"><a href="#cb62-1333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1334"><a href="#cb62-1334" aria-hidden="true" tabindex="-1"></a>After pivot and notation changes:</span>
<span id="cb62-1335"><a href="#cb62-1335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1338"><a href="#cb62-1338" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1339"><a href="#cb62-1339" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> Cleaned_currentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-1340"><a href="#cb62-1340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_currentUSD),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-1341"><a href="#cb62-1341" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-1342"><a href="#cb62-1342" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb62-1343"><a href="#cb62-1343" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb62-1344"><a href="#cb62-1344" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> Cleaned_ShareOfGovSpend <span class="sc">%&gt;%</span></span>
<span id="cb62-1345"><a href="#cb62-1345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGovSpend),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-1346"><a href="#cb62-1346" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-1347"><a href="#cb62-1347" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb62-1348"><a href="#cb62-1348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1349"><a href="#cb62-1349" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> Cleaned_ShareOfGDP <span class="sc">%&gt;%</span></span>
<span id="cb62-1350"><a href="#cb62-1350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(Cleaned_ShareOfGDP),<span class="at">names_to =</span> <span class="st">"Year"</span>,<span class="at">values_drop_na =</span> <span class="cn">FALSE</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-1351"><a href="#cb62-1351" aria-hidden="true" tabindex="-1"></a>    <span class="fu">na_if</span>(<span class="st">"..."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-1352"><a href="#cb62-1352" aria-hidden="true" tabindex="-1"></a>      <span class="fu">na_if</span>(<span class="st">"xxx"</span>)</span>
<span id="cb62-1353"><a href="#cb62-1353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1354"><a href="#cb62-1354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1355"><a href="#cb62-1355" aria-hidden="true" tabindex="-1"></a>df1<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_currentUSD)</span>
<span id="cb62-1356"><a href="#cb62-1356" aria-hidden="true" tabindex="-1"></a>df2<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGovSpend)</span>
<span id="cb62-1357"><a href="#cb62-1357" aria-hidden="true" tabindex="-1"></a>df3<span class="ot">&lt;-</span><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb62-1358"><a href="#cb62-1358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1359"><a href="#cb62-1359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1360"><a href="#cb62-1360" aria-hidden="true" tabindex="-1"></a><span class="co">#df1</span></span>
<span id="cb62-1361"><a href="#cb62-1361" aria-hidden="true" tabindex="-1"></a><span class="co">#df2</span></span>
<span id="cb62-1362"><a href="#cb62-1362" aria-hidden="true" tabindex="-1"></a><span class="co"># share of GDP</span></span>
<span id="cb62-1363"><a href="#cb62-1363" aria-hidden="true" tabindex="-1"></a>df3</span>
<span id="cb62-1364"><a href="#cb62-1364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1365"><a href="#cb62-1365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1366"><a href="#cb62-1366" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1367"><a href="#cb62-1367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1368"><a href="#cb62-1368" aria-hidden="true" tabindex="-1"></a><span class="fu">### Converting Column Types</span></span>
<span id="cb62-1369"><a href="#cb62-1369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1370"><a href="#cb62-1370" aria-hidden="true" tabindex="-1"></a>Finally I will convert the column types to their correct representation.</span>
<span id="cb62-1371"><a href="#cb62-1371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1372"><a href="#cb62-1372" aria-hidden="true" tabindex="-1"></a>Before:</span>
<span id="cb62-1373"><a href="#cb62-1373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1374"><a href="#cb62-1374" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1375"><a href="#cb62-1375" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_currentUSD)</span></span>
<span id="cb62-1376"><a href="#cb62-1376" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_ShareOfGovSpend)</span></span>
<span id="cb62-1377"><a href="#cb62-1377" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb62-1378"><a href="#cb62-1378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1379"><a href="#cb62-1379" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1380"><a href="#cb62-1380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1383"><a href="#cb62-1383" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1384"><a href="#cb62-1384" aria-hidden="true" tabindex="-1"></a><span class="co">#Year to Number</span></span>
<span id="cb62-1385"><a href="#cb62-1385" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_currentUSD<span class="sc">$</span>Year)</span>
<span id="cb62-1386"><a href="#cb62-1386" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>Year)</span>
<span id="cb62-1387"><a href="#cb62-1387" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>Year<span class="ot">&lt;-</span><span class="fu">as.integer</span>(Cleaned_ShareOfGDP<span class="sc">$</span>Year)</span>
<span id="cb62-1388"><a href="#cb62-1388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1389"><a href="#cb62-1389" aria-hidden="true" tabindex="-1"></a><span class="co"># value to double</span></span>
<span id="cb62-1390"><a href="#cb62-1390" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_currentUSD<span class="sc">$</span>value)</span>
<span id="cb62-1391"><a href="#cb62-1391" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGovSpend<span class="sc">$</span>value)</span>
<span id="cb62-1392"><a href="#cb62-1392" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP<span class="sc">$</span>value<span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Cleaned_ShareOfGDP<span class="sc">$</span>value)</span>
<span id="cb62-1393"><a href="#cb62-1393" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1394"><a href="#cb62-1394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1395"><a href="#cb62-1395" aria-hidden="true" tabindex="-1"></a>After:</span>
<span id="cb62-1396"><a href="#cb62-1396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1397"><a href="#cb62-1397" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1398"><a href="#cb62-1398" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_currentUSD)</span></span>
<span id="cb62-1399"><a href="#cb62-1399" aria-hidden="true" tabindex="-1"></a><span class="co">#head(Cleaned_ShareOfGovSpend)</span></span>
<span id="cb62-1400"><a href="#cb62-1400" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Cleaned_ShareOfGDP)</span>
<span id="cb62-1401"><a href="#cb62-1401" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1402"><a href="#cb62-1402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1403"><a href="#cb62-1403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1404"><a href="#cb62-1404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1405"><a href="#cb62-1405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1406"><a href="#cb62-1406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1407"><a href="#cb62-1407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1408"><a href="#cb62-1408" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb62-1409"><a href="#cb62-1409" aria-hidden="true" tabindex="-1"></a>Cleaned_currentUSD <span class="ot">&lt;-</span> Cleaned_currentUSD <span class="sc">%&gt;%</span></span>
<span id="cb62-1410"><a href="#cb62-1410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">MilitarySpend_currentUSD=</span>value)</span>
<span id="cb62-1411"><a href="#cb62-1411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1412"><a href="#cb62-1412" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGovSpend <span class="ot">&lt;-</span> Cleaned_ShareOfGovSpend<span class="sc">%&gt;%</span></span>
<span id="cb62-1413"><a href="#cb62-1413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">MilitarySpend_ShareofGovSpend=</span>value)</span>
<span id="cb62-1414"><a href="#cb62-1414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1415"><a href="#cb62-1415" aria-hidden="true" tabindex="-1"></a>Cleaned_ShareOfGDP <span class="ot">&lt;-</span> Cleaned_ShareOfGDP<span class="sc">%&gt;%</span></span>
<span id="cb62-1416"><a href="#cb62-1416" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">MilitarySpend_ShareofGDP=</span>value)</span>
<span id="cb62-1417"><a href="#cb62-1417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1418"><a href="#cb62-1418" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1419"><a href="#cb62-1419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1420"><a href="#cb62-1420" aria-hidden="true" tabindex="-1"></a><span class="fu">### Joining of the Different Tabs</span></span>
<span id="cb62-1421"><a href="#cb62-1421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1422"><a href="#cb62-1422" aria-hidden="true" tabindex="-1"></a>Here we do a full join to maintain data from all the different tabs. The years when share of Gov spend are unavaiable will then show NA as intended.</span>
<span id="cb62-1423"><a href="#cb62-1423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1426"><a href="#cb62-1426" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1427"><a href="#cb62-1427" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(Cleaned_currentUSD)</span></span>
<span id="cb62-1428"><a href="#cb62-1428" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(Cleaned_ShareOfGovSpend)</span></span>
<span id="cb62-1429"><a href="#cb62-1429" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(Cleaned_ShareOfGDP)</span></span>
<span id="cb62-1430"><a href="#cb62-1430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1431"><a href="#cb62-1431" aria-hidden="true" tabindex="-1"></a>MilitarySpend<span class="ot">&lt;-</span> <span class="fu">full_join</span>(Cleaned_currentUSD,Cleaned_ShareOfGovSpend,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb62-1432"><a href="#cb62-1432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1433"><a href="#cb62-1433" aria-hidden="true" tabindex="-1"></a>MilitarySpend <span class="ot">&lt;-</span> <span class="fu">full_join</span>(MilitarySpend,Cleaned_ShareOfGDP,<span class="at">by=</span><span class="fu">c</span>(<span class="st">"Country"</span>,<span class="st">"Year"</span>,<span class="st">"Region"</span>))</span>
<span id="cb62-1434"><a href="#cb62-1434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1435"><a href="#cb62-1435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1436"><a href="#cb62-1436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1437"><a href="#cb62-1437" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(MilitarySpend)</span>
<span id="cb62-1438"><a href="#cb62-1438" aria-hidden="true" tabindex="-1"></a><span class="co">#nrow(MilitarySpend)</span></span>
<span id="cb62-1439"><a href="#cb62-1439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1440"><a href="#cb62-1440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1441"><a href="#cb62-1441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1442"><a href="#cb62-1442" aria-hidden="true" tabindex="-1"></a><span class="fu">## extra Vizualizations</span></span>
<span id="cb62-1443"><a href="#cb62-1443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1444"><a href="#cb62-1444" aria-hidden="true" tabindex="-1"></a><span class="in">```{r warning=FALSE}</span></span>
<span id="cb62-1445"><a href="#cb62-1445" aria-hidden="true" tabindex="-1"></a>byRegionStats_year_top6<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-1446"><a href="#cb62-1446" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region,viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-1447"><a href="#cb62-1447" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Spend, <span class="at">na.rm=</span><span class="cn">TRUE</span>))<span class="sc">%&gt;%</span></span>
<span id="cb62-1448"><a href="#cb62-1448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend <span class="sc">==</span> <span class="st">'MilitarySpend_currentUSD'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-1449"><a href="#cb62-1449" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Region <span class="sc">==</span> top6_mean)<span class="sc">%&gt;%</span></span>
<span id="cb62-1450"><a href="#cb62-1450" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean))</span>
<span id="cb62-1451"><a href="#cb62-1451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1452"><a href="#cb62-1452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1453"><a href="#cb62-1453" aria-hidden="true" tabindex="-1"></a><span class="co"># add global average overlay</span></span>
<span id="cb62-1454"><a href="#cb62-1454" aria-hidden="true" tabindex="-1"></a>GlobalAverage<span class="ot">&lt;-</span>combinedData<span class="sc">%&gt;%</span></span>
<span id="cb62-1455"><a href="#cb62-1455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(viewOfSpend,Year)<span class="sc">%&gt;%</span></span>
<span id="cb62-1456"><a href="#cb62-1456" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(viewOfSpend<span class="sc">==</span><span class="st">"MilitarySpend_currentUSD"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb62-1457"><a href="#cb62-1457" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">GlobalAverage =</span> <span class="fu">mean</span>(Spend),<span class="at">GlobalStandardDev =</span> <span class="fu">sd</span>(Spend))</span>
<span id="cb62-1458"><a href="#cb62-1458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1459"><a href="#cb62-1459" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6<span class="ot">&lt;-</span> byRegionStats_year_top6<span class="sc">%&gt;%</span></span>
<span id="cb62-1460"><a href="#cb62-1460" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> mean))<span class="sc">+</span></span>
<span id="cb62-1461"><a href="#cb62-1461" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Region, <span class="at">alpha=</span><span class="fl">0.9</span>,)) <span class="sc">+</span></span>
<span id="cb62-1462"><a href="#cb62-1462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data=</span> GlobalAverage,<span class="fu">aes</span>(<span class="at">x=</span>Year,<span class="at">y=</span>GlobalAverage))<span class="sc">+</span></span>
<span id="cb62-1463"><a href="#cb62-1463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="st">`</span><span class="at">Region</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb62-1464"><a href="#cb62-1464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Raw Mean Spend in USD for top 6 Spenders with Global Average Overlay"</span> ,<span class="at">caption =</span> <span class="st">"Data from SPIRI Military Expediture Database"</span>)</span>
<span id="cb62-1465"><a href="#cb62-1465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1466"><a href="#cb62-1466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1467"><a href="#cb62-1467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1468"><a href="#cb62-1468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1469"><a href="#cb62-1469" aria-hidden="true" tabindex="-1"></a>byRegionplot_top6</span>
<span id="cb62-1470"><a href="#cb62-1470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1471"><a href="#cb62-1471" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1472"><a href="#cb62-1472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1473"><a href="#cb62-1473" aria-hidden="true" tabindex="-1"></a><span class="fu">## Animations</span></span>
<span id="cb62-1476"><a href="#cb62-1476" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1477"><a href="#cb62-1477" aria-hidden="true" tabindex="-1"></a><span class="co"># animationWIP&lt;-combinedData%&gt;%</span></span>
<span id="cb62-1478"><a href="#cb62-1478" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(Country,viewOfSpend,Year)%&gt;%</span></span>
<span id="cb62-1479"><a href="#cb62-1479" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_wider(names_from = viewOfSpend,values_from = Spend)</span></span>
<span id="cb62-1480"><a href="#cb62-1480" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1481"><a href="#cb62-1481" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1482"><a href="#cb62-1482" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(animationWIP, aes(x=`Year`,y=`MilitarySpend_currentUSD`, color = Country,size= MilitarySpend_ShareofGDP))+</span></span>
<span id="cb62-1483"><a href="#cb62-1483" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point(alpha = 0.6,)+</span></span>
<span id="cb62-1484"><a href="#cb62-1484" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_radius(limits = c(0, NA), range = c(2, 12)) +</span></span>
<span id="cb62-1485"><a href="#cb62-1485" aria-hidden="true" tabindex="-1"></a><span class="co">#   facet_wrap(vars(Region),scales = "free_y")+</span></span>
<span id="cb62-1486"><a href="#cb62-1486" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = 'Year: {frame_time}', x = 'Share of Gov Spend', y= 'raw USD')+</span></span>
<span id="cb62-1487"><a href="#cb62-1487" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position = "none")</span></span>
<span id="cb62-1488"><a href="#cb62-1488" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1489"><a href="#cb62-1489" aria-hidden="true" tabindex="-1"></a><span class="co"># myAnimation&lt;- ggplot(animationWIP, aes(x=`Year`,y=`MilitarySpend_currentUSD`, color = Country,size= MilitarySpend_ShareofGDP))+</span></span>
<span id="cb62-1490"><a href="#cb62-1490" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point(alpha = 0.6,)+</span></span>
<span id="cb62-1491"><a href="#cb62-1491" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_radius(limits = c(0, NA), range = c(2, 12)) +</span></span>
<span id="cb62-1492"><a href="#cb62-1492" aria-hidden="true" tabindex="-1"></a><span class="co">#   facet_wrap(vars(Region),scales = "free_y")+</span></span>
<span id="cb62-1493"><a href="#cb62-1493" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = 'Year: {frame_time}', x = 'Year', y= 'raw USD')+</span></span>
<span id="cb62-1494"><a href="#cb62-1494" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(legend.position = "none")+</span></span>
<span id="cb62-1495"><a href="#cb62-1495" aria-hidden="true" tabindex="-1"></a><span class="co">#   transition_time(`Year`)+</span></span>
<span id="cb62-1496"><a href="#cb62-1496" aria-hidden="true" tabindex="-1"></a><span class="co">#   ease_aes('linear')</span></span>
<span id="cb62-1497"><a href="#cb62-1497" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1498"><a href="#cb62-1498" aria-hidden="true" tabindex="-1"></a><span class="co"># animate(myAnimation,duration = 15,fps = 20,width=600,height = 600, renderer = gifski_renderer())</span></span>
<span id="cb62-1499"><a href="#cb62-1499" aria-hidden="true" tabindex="-1"></a><span class="co"># anim_save("GovSpend_VS_RawUSD.gif")</span></span>
<span id="cb62-1500"><a href="#cb62-1500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1501"><a href="#cb62-1501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1502"><a href="#cb62-1502" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb62-1503"><a href="#cb62-1503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1504"><a href="#cb62-1504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1507"><a href="#cb62-1507" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb62-1508"><a href="#cb62-1508" aria-hidden="true" tabindex="-1"></a><span class="co"># world_map&lt;-map_data("world")%&gt;%</span></span>
<span id="cb62-1509"><a href="#cb62-1509" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(! long&gt;180)</span></span>
<span id="cb62-1510"><a href="#cb62-1510" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb62-1511"><a href="#cb62-1511" aria-hidden="true" tabindex="-1"></a><span class="co"># gsub("USA","United states of America",world_map)</span></span>
<span id="cb62-1512"><a href="#cb62-1512" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1513"><a href="#cb62-1513" aria-hidden="true" tabindex="-1"></a><span class="co"># view(world_map)</span></span>
<span id="cb62-1514"><a href="#cb62-1514" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1515"><a href="#cb62-1515" aria-hidden="true" tabindex="-1"></a><span class="co"># dataForMap&lt;- combinedData %&gt;%</span></span>
<span id="cb62-1516"><a href="#cb62-1516" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(viewOfSpend == "MilitarySpend_currentUSD")%&gt;%</span></span>
<span id="cb62-1517"><a href="#cb62-1517" aria-hidden="true" tabindex="-1"></a><span class="co">#   rename(region=Country)</span></span>
<span id="cb62-1518"><a href="#cb62-1518" aria-hidden="true" tabindex="-1"></a><span class="co"># view(dataForMap)</span></span>
<span id="cb62-1519"><a href="#cb62-1519" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1520"><a href="#cb62-1520" aria-hidden="true" tabindex="-1"></a><span class="co"># worldMapCountries&lt;-world_map%&gt;%</span></span>
<span id="cb62-1521"><a href="#cb62-1521" aria-hidden="true" tabindex="-1"></a><span class="co">#   distinct(region)</span></span>
<span id="cb62-1522"><a href="#cb62-1522" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1523"><a href="#cb62-1523" aria-hidden="true" tabindex="-1"></a><span class="co"># mapAnimationData&lt;-left_join(world_map,dataForMap)%&gt;%</span></span>
<span id="cb62-1524"><a href="#cb62-1524" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(viewOfSpend=="MilitarySpend_currentUSD")</span></span>
<span id="cb62-1525"><a href="#cb62-1525" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1526"><a href="#cb62-1526" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1527"><a href="#cb62-1527" aria-hidden="true" tabindex="-1"></a><span class="co"># test&lt;-mapAnimationData%&gt;%</span></span>
<span id="cb62-1528"><a href="#cb62-1528" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(long,lat,region)%&gt;%</span></span>
<span id="cb62-1529"><a href="#cb62-1529" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarize(mean = mean(Spend, na.rm=TRUE))</span></span>
<span id="cb62-1530"><a href="#cb62-1530" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1531"><a href="#cb62-1531" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1532"><a href="#cb62-1532" aria-hidden="true" tabindex="-1"></a><span class="co"># test%&gt;%</span></span>
<span id="cb62-1533"><a href="#cb62-1533" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(fill=mean, map_id=region))+</span></span>
<span id="cb62-1534"><a href="#cb62-1534" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_map(map=world_map)</span></span>
<span id="cb62-1535"><a href="#cb62-1535" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1536"><a href="#cb62-1536" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb62-1537"><a href="#cb62-1537" aria-hidden="true" tabindex="-1"></a><span class="co"># test %&gt;% </span></span>
<span id="cb62-1538"><a href="#cb62-1538" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(map_id = region,fill=mean)) +</span></span>
<span id="cb62-1539"><a href="#cb62-1539" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_map(map = world_map) +</span></span>
<span id="cb62-1540"><a href="#cb62-1540" aria-hidden="true" tabindex="-1"></a><span class="co">#   expand_limits(x = world_map$long, y = world_map$lat)</span></span>
<span id="cb62-1541"><a href="#cb62-1541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-1542"><a href="#cb62-1542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>