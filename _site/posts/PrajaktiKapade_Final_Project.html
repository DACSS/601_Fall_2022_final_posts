<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prajakti Kapade">
<meta name="dcterms.date" content="2022-12-17">
<meta name="description" content="Final Project">

<title>DACSS 601: Data Science Fundamentals - FALL 2022 - SF Library Usage Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<meta name="twitter:title" content="DACSS 601: Data Science Fundamentals - FALL 2022 - SF Library Usage Analysis">
<meta name="twitter:description" content="Final Project">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../images/UMass White Wordmark Horiz.png" alt="">
    <span class="navbar-title">DACSS 601: Data Science Fundamentals - FALL 2022</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page">Fall 2022 Posts</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">Contributors</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss">DACSS</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS/601_Fall_2022"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">SF Library Usage Analysis</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Final materials</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://dacss.github.io/601_Fall_2022/" class="sidebar-item-text sidebar-link">Fall 2022 posts</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">final Posts</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">INTRODUCTION</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">DATA</a>
  <ul class="collapse">
  <li><a href="#loading-the-dataset" id="toc-loading-the-dataset" class="nav-link" data-scroll-target="#loading-the-dataset">Loading the dataset</a></li>
  <li><a href="#summary-of-the-dataset" id="toc-summary-of-the-dataset" class="nav-link" data-scroll-target="#summary-of-the-dataset">Summary of the dataset</a></li>
  <li><a href="#renaming-the-columns" id="toc-renaming-the-columns" class="nav-link" data-scroll-target="#renaming-the-columns">Renaming the columns</a></li>
  <li><a href="#cleaning-the-dataset" id="toc-cleaning-the-dataset" class="nav-link" data-scroll-target="#cleaning-the-dataset">Cleaning the dataset</a></li>
  <li><a href="#loading-the-branch-information" id="toc-loading-the-branch-information" class="nav-link" data-scroll-target="#loading-the-branch-information">Loading the branch information</a></li>
  <li><a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration">Data Exploration</a></li>
  <li><a href="#data-statistics" id="toc-data-statistics" class="nav-link" data-scroll-target="#data-statistics">Data Statistics</a></li>
  </ul></li>
  <li><a href="#visualizations" id="toc-visualizations" class="nav-link" data-scroll-target="#visualizations">VISUALIZATIONS</a>
  <ul class="collapse">
  <li><a href="#patron-registeration-by-age-range" id="toc-patron-registeration-by-age-range" class="nav-link" data-scroll-target="#patron-registeration-by-age-range">Patron Registeration by Age Range</a></li>
  <li><a href="#total-checkouts-and-renewals-by-age-range" id="toc-total-checkouts-and-renewals-by-age-range" class="nav-link" data-scroll-target="#total-checkouts-and-renewals-by-age-range">Total Checkouts and Renewals by Age Range</a></li>
  <li><a href="#patron-registration-by-patron-types" id="toc-patron-registration-by-patron-types" class="nav-link" data-scroll-target="#patron-registration-by-patron-types">Patron registration by Patron Types</a></li>
  <li><a href="#total-checkouts-and-renewals-by-patron-types" id="toc-total-checkouts-and-renewals-by-patron-types" class="nav-link" data-scroll-target="#total-checkouts-and-renewals-by-patron-types">Total Checkouts and Renewals by Patron Types</a></li>
  <li><a href="#patron-registration-by-residency" id="toc-patron-registration-by-residency" class="nav-link" data-scroll-target="#patron-registration-by-residency">Patron Registration by Residency</a></li>
  <li><a href="#total-checkouts-and-total-renewals-by-residency" id="toc-total-checkouts-and-total-renewals-by-residency" class="nav-link" data-scroll-target="#total-checkouts-and-total-renewals-by-residency">Total Checkouts and Total Renewals by Residency</a></li>
  <li><a href="#patrons-registeration-by-branches" id="toc-patrons-registeration-by-branches" class="nav-link" data-scroll-target="#patrons-registeration-by-branches">Patrons Registeration by Branches</a></li>
  <li><a href="#total-checkouts-and-total-renewals-by-branches" id="toc-total-checkouts-and-total-renewals-by-branches" class="nav-link" data-scroll-target="#total-checkouts-and-total-renewals-by-branches">Total Checkouts and Total Renewals by Branches</a></li>
  <li><a href="#checkouts-and-renewals---a-trend" id="toc-checkouts-and-renewals---a-trend" class="nav-link" data-scroll-target="#checkouts-and-renewals---a-trend">Checkouts and Renewals - A trend</a></li>
  <li><a href="#diving-deeper-into-monthly-data" id="toc-diving-deeper-into-monthly-data" class="nav-link" data-scroll-target="#diving-deeper-into-monthly-data">Diving Deeper into Monthly data</a></li>
  <li><a href="#total-checkouts-by-months-for-year-2016" id="toc-total-checkouts-by-months-for-year-2016" class="nav-link" data-scroll-target="#total-checkouts-by-months-for-year-2016">Total Checkouts by months for year 2016</a></li>
  <li><a href="#trends-of-age-range-and-patron-type-for-july-2016" id="toc-trends-of-age-range-and-patron-type-for-july-2016" class="nav-link" data-scroll-target="#trends-of-age-range-and-patron-type-for-july-2016">Trends of Age Range and Patron Type for July 2016</a></li>
  <li><a href="#total-checkouts-by-patron-types-and-age-ranges" id="toc-total-checkouts-by-patron-types-and-age-ranges" class="nav-link" data-scroll-target="#total-checkouts-by-patron-types-and-age-ranges">Total Checkouts by Patron Types and Age Ranges</a></li>
  <li><a href="#different-patron-types-by-year-of-registery-and-their-residence." id="toc-different-patron-types-by-year-of-registery-and-their-residence." class="nav-link" data-scroll-target="#different-patron-types-by-year-of-registery-and-their-residence.">Different Patron types by year of registery and their residence.</a></li>
  <li><a href="#different-age-range-by-year-of-registery-and-their-residence." id="toc-different-age-range-by-year-of-registery-and-their-residence." class="nav-link" data-scroll-target="#different-age-range-by-year-of-registery-and-their-residence.">Different Age Range by year of registery and their residence.</a></li>
  </ul></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection">REFLECTION</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">CONCLUSION</a></li>
  <li><a href="#bibliography" id="toc-bibliography" class="nav-link" data-scroll-target="#bibliography">BIBLIOGRAPHY</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">SF Library Usage Analysis</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>

<div>
  <div class="description">
    Final Project
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Prajakti Kapade </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 17, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">INTRODUCTION</h2>
<p>Prior to computerization, library tasks were performed manually and independently from one another. Selectors ordered materials with ordering slips, cataloguers manually catalogued sources and indexed them with the card catalog system (in which all bibliographic data was kept on a single index card), fines were collected by local bailiffs, and users signed books out manually, indicating their name on clue cards which were then kept at the circulation desk.</p>
<p>Early mechanization came in 1936, when the University of Texas began using a punch card system to manage library circulation. While the punch card system allowed for more efficient tracking of loans, library services were far from being integrated, and no other library task was affected by this change. This led to customer dissatisfaction and they wanted to move towards a very systematic way of keeping track, then came in Integrated Library systems, one example of which is my dataset for the final project.</p>
<p>This system is perfect for all educational institutions that wish to maintain minimum operational costs. The system helps with better management, lesser wastage of time and improves engagement and productivity. With this data, we can analyze the trends about different patrons based on their age, based on the registered year, their renewals and checkouts, and see the circulation trend.</p>
<p>Research Question : How does Age, Patron type, Branch and Residency affect the patrons, their checkouts and their renewals?</p>
<p>Installing and importing necessary packages</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("hrbrthemes")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("viridis")</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('patchwork')</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('zoo')</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('directlabels')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.4.0      ✔ purrr   0.3.5 
✔ tibble  3.1.8      ✔ dplyr   1.0.10
✔ tidyr   1.2.1      ✔ stringr 1.5.0 
✔ readr   2.1.3      ✔ forcats 0.5.2 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tibble' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>NOTE: Either Arial Narrow or Roboto Condensed fonts are required to use these themes.
      Please use hrbrthemes::import_roboto_condensed() to install Roboto Condensed and
      if Arial Narrow is not on your system, please see https://bit.ly/arialnarrow</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'viridis' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: viridisLite</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'viridisLite' was built under R version 4.2.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggbeeswarm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggbeeswarm' was built under R version 4.2.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'zoo'

The following objects are masked from 'package:base':

    as.Date, as.Date.numeric</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(directlabels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'directlabels' was built under R version 4.2.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">DATA</h2>
<section id="loading-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="loading-the-dataset">Loading the dataset</h3>
<p>The dataset - SF Integrated Learning System is sourced from Kaggle.com and is composed of bibliographic records including inventoried items, patron records, and circulation data. The data is used in the daily operation of the library, including circulation, online public catalog, cataloging, acquisitions, collection development, processing, and serials control. This dataset represents the usage of inventoried items by patrons (~420K records). It contains data starting from 2003 uptill 2016.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>library_dataset <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/Library_Usage.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: '_data/Library_Usage.csv' does not exist in current working directory ('C:/Users/srika/OneDrive/Desktop/601_Fall_2022_final_posts/posts').</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>library_dataset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'library_dataset' not found</code></pre>
</div>
</div>
</section>
<section id="summary-of-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="summary-of-the-dataset">Summary of the dataset</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(library_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'library_dataset' not found</code></pre>
</div>
</div>
<p>The dataset contains 423448 records and 15 columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(library_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in glimpse(library_dataset): object 'library_dataset' not found</code></pre>
</div>
</div>
<p>The above shows the columns of the dataset along with their datatype and the initial recordings of that particular columns. The distinct data types are : dbl - double/real number values, chr - characters and lgl - for boolean values.</p>
<p>The columns and their description are as follows:</p>
<ol type="1">
<li><p><code>Patron Type Code</code>- Type of patron record (adult, teen, child, senior, etc.)</p></li>
<li><p><code>Patron Type Definition</code> - Description of patron (adult, teen, child, senior, etc.).</p></li>
<li><p><code>Total Checkouts</code>- Total number of items the patron has checked out from the library since the record was created.</p></li>
<li><p><code>Total Renewals</code> - Total number of times the patron has renewed checked-out items.</p></li>
<li><p><code>Age Range</code>- Contains age ranges</p></li>
<li><p><code>Home Library Code</code>- Default value indicates the branch library where the patron was originally registered.</p></li>
<li><p><code>Home Library Definition</code> - Description of the branch library where the patron was originally registered.</p></li>
<li><p><code>Circulation Active Month</code> - Year the patron last checked out library materials, or last logged into the library’s subscription databases.</p></li>
<li><p><code>Circulation Active Year</code> - Month the patron last checked out library materials, or last logged into the library’s subscription databases.</p></li>
<li><p><code>Notice Preference Code</code>- This field is used to indicate the patron’s preferred method of receiving library notices.</p></li>
<li><p><code>Notice Preference Definition</code>- Description of the patron’s preferred method of receiving library notices.</p></li>
<li><p><code>Provided Email Address</code> - Indicates if the patron has provided email address or not.</p></li>
<li><p><code>Year Patron Registered</code>- Year patron registered with library system. No dates prior to 2003 due to system migration.</p></li>
<li><p><code>Outside of County</code> - If a patron’s home address is not in San Francisco, then flagged as true, otherwise false.</p></li>
<li><p><code>Supervisor District</code> - Based on patron address: San Francisco Supervisor District. Based on the website it suggested that “This is an automated field, please note that if”Outside of County” is true, then there will be no supervisor district. Also, if the input address was not well-formed, the supervisor district will be blank.”</p></li>
</ol>
</section>
<section id="renaming-the-columns" class="level3">
<h3 class="anchored" data-anchor-id="renaming-the-columns">Renaming the columns</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>library_dataset <span class="ot">&lt;-</span> library_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>( <span class="st">'out_of_county'</span> <span class="ot">=</span> <span class="st">'Outside of County'</span>, <span class="st">"patron_type"</span> <span class="ot">=</span> <span class="st">'Patron Type Definition'</span>, <span class="st">"total_checkouts"</span> <span class="ot">=</span> <span class="st">'Total Checkouts'</span>, <span class="st">"total_renewals"</span><span class="ot">=</span> <span class="st">'Total Renewals'</span>, <span class="st">'age'</span> <span class="ot">=</span> <span class="st">'Age Range'</span>, <span class="st">'branch'</span> <span class="ot">=</span> <span class="st">'Home Library Definition'</span>,<span class="st">'active_year'</span> <span class="ot">=</span> <span class="st">'Circulation Active Year'</span>, <span class="st">'active_month'</span> <span class="ot">=</span> <span class="st">'Circulation Active Month'</span>, <span class="st">'notice_preference'</span> <span class="ot">=</span> <span class="st">'Notice Preference Definition'</span>, <span class="st">'provided_email'</span> <span class="ot">=</span> <span class="st">'Provided Email Address'</span>, <span class="st">'year_registered'</span> <span class="ot">=</span> <span class="st">'Year Patron Registered'</span>, <span class="st">"outside_of_county"</span> <span class="ot">=</span> <span class="st">'Outside of County'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in rename(., out_of_county = "Outside of County", patron_type = "Patron Type Definition", : object 'library_dataset' not found</code></pre>
</div>
</div>
</section>
<section id="cleaning-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-the-dataset">Cleaning the dataset</h3>
<p>Selected the columns with unique characteristic for our visualizations and analysis. Some columns contain the code for the definition example : Home Library Code is the subsequent code for the Home Library Definition.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="ot">&lt;-</span> library_dataset<span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(patron_type,total_checkouts,total_renewals,age,branch,active_month,active_year,notice_preference,provided_email,year_registered,outside_of_county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in select(., patron_type, total_checkouts, total_renewals, age, : object 'library_dataset' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>library_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'library_data' not found</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">$</span>y_m <span class="ot">&lt;-</span> <span class="fu">paste</span>(library_data<span class="sc">$</span>active_year,library_data<span class="sc">$</span>active_month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in paste(library_data$active_year, library_data$active_month): object 'library_data' not found</code></pre>
</div>
</div>
</section>
<section id="loading-the-branch-information" class="level3">
<h3 class="anchored" data-anchor-id="loading-the-branch-information">Loading the branch information</h3>
<p>The dataset mentions the names of different branches of SF Public Library along with their code, but it does not give us any more information about these branches. I extracted some data about the branches from the public library website : https://sfpl.org/locations/#!/filters?sort_by=weight&amp;sort_order=ASC&amp;page=2 and created my own dataset “branch_info” (with 30 branches and their information). I have merged it with the original dataset for better information about each branch and their corresponding patrons.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(library_data<span class="sc">$</span>branch)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in unique(library_data$branch): object 'library_data' not found</code></pre>
</div>
</div>
<p>The above shows the different branches of San Franciso Public Library.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>branch_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'_data/branch_info.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: '_data/branch_info.csv' does not exist in current working directory ('C:/Users/srika/OneDrive/Desktop/601_Fall_2022_final_posts/posts').</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>branch_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'branch_data' not found</code></pre>
</div>
</div>
<p>Joining the branch_data dataset wih the main dataset based on branch name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(library_data, branch_data, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"branch"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in left_join(library_data, branch_data, by = c("branch")): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>library_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'library_data' not found</code></pre>
</div>
</div>
</section>
<section id="data-exploration" class="level3">
<h3 class="anchored" data-anchor-id="data-exploration">Data Exploration</h3>
<p>As mentioned in my research question, we will look at the number of records based on the categories/columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'lightblue'</span>) <span class="sc">+</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by Age Range"</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., age != "NA"): object 'library_data' not found</code></pre>
</div>
</div>
<p>The above plot shows the distribution of records based on age range. We can observe that maximum records in the library system lies for the range of 25 to 34 years followed by 35 to 44 years.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> patron_type)) <span class="sc">+</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'lightpink'</span>) <span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by Patron type"</span>,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Patron Type"</span>,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = library_data, aes(x = patron_type)): object 'library_data' not found</code></pre>
</div>
</div>
<p>The most prominent types of patrons registered in SF Library system are : Adults, Juvenile, Senior, Welcome (guest) and Young Adults.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> branch)) <span class="sc">+</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'lightyellow'</span>) <span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by branches"</span>,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Branches"</span>,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = library_data, aes(x = branch)): object 'library_data' not found</code></pre>
</div>
</div>
<p>The maximum patrons where registered at the MAIN Library, which makes sense, as the main branch generally has most books and is most accessible to the people.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> outside_of_county)) <span class="sc">+</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'orange'</span>) <span class="sc">+</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by Residency"</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Outside of County"</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = library_data, aes(x = outside_of_county)): object 'library_data' not found</code></pre>
</div>
</div>
<p>Most patrons are residing in the San Franciso County itself, while very less patrons are present outside.</p>
</section>
<section id="data-statistics" class="level3">
<h3 class="anchored" data-anchor-id="data-statistics">Data Statistics</h3>
<p>The two main continuous columns of this dataset are : Total Renewals and Total Checkouts made by the patrons. The statistics for which are present below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(library_data<span class="sc">$</span>total_checkouts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in summary(library_data$total_checkouts): object 'library_data' not found</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(library_data<span class="sc">$</span>total_renewals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in summary(library_data$total_renewals): object 'library_data' not found</code></pre>
</div>
</div>
</section>
</section>
<section id="visualizations" class="level2">
<h2 class="anchored" data-anchor-id="visualizations">VISUALIZATIONS</h2>
<section id="patron-registeration-by-age-range" class="level3">
<h3 class="anchored" data-anchor-id="patron-registeration-by-age-range">Patron Registeration by Age Range</h3>
<p>Firstly, we will analyze the trend of “year when patrons registered” with the “Age Range”. This will give us an idea of when patrons registered according to the age groups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>age, <span class="at">fill=</span>age)) <span class="sc">+</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Year of Registration by Age Range"</span>,</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year of Registry"</span>,</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of patrons registered"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., age != "NA"): object 'library_data' not found</code></pre>
</div>
</div>
<p>As expected patrons with ages 60 and higher have been registered since 2003. We can see that the young children from the age of 0-9 years have started registering since 2012, which shows they are curious readers or their parents would’ve enrolled them to read books and gain information.</p>
</section>
<section id="total-checkouts-and-renewals-by-age-range" class="level3">
<h3 class="anchored" data-anchor-id="total-checkouts-and-renewals-by-age-range">Total Checkouts and Renewals by Age Range</h3>
<p>Now, we will look into the two important columns total checkouts and total renewals for each category of patrons and different age groups to get an idea of the circulation of the books.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age,<span class="at">y=</span>total_checkouts)) <span class="sc">+</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightpink'</span>) <span class="sc">+</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Checkouts by Age Range"</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of checkouts"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., age != "NA"): object 'library_data' not found</code></pre>
</div>
</div>
<p>The majority of checkouts in the SF libraries were made by ages: 65 to 74 years followed by 45-54 years and the young readers 10-19 years.This shows us that the every generation is interested in reading books.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> age,<span class="at">y=</span>total_renewals)) <span class="sc">+</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightblue'</span>) <span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Renewals by Age Range"</span>,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Renewals"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = library_data, aes(x = age, y = total_renewals)): object 'library_data' not found</code></pre>
</div>
</div>
<p>The majority of renewals on the other hand were made by 45-54 years followed by 65-74 years. We can observe using the above two trends that 45-54 and 65-74 years age gaps show maximum engagement and have issued and renewed majority of books as compared to others.</p>
<p>Now, we will move towards next category of interest - Patron Type. Looking into the registration year, total checkouts and total renewals made my patrons according to Patron Type.</p>
</section>
<section id="patron-registration-by-patron-types" class="level3">
<h3 class="anchored" data-anchor-id="patron-registration-by-patron-types">Patron registration by Patron Types</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bottom Left</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(library_data, <span class="fu">aes</span>(<span class="at">x=</span>patron_type, <span class="at">y=</span>year_registered, <span class="at">fill=</span>patron_type)) <span class="sc">+</span> </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.3</span>)<span class="sc">+</span> <span class="fu">coord_flip</span>()  <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),<span class="at">legend.position=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Year of Patron Registration by Patron Type'</span>,<span class="at">x=</span><span class="st">'Year Registered'</span>,<span class="at">y=</span><span class="st">'Patron type'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(library_data, aes(x = patron_type, y = year_registered, : object 'library_data' not found</code></pre>
</div>
</div>
<p>As seen from the plot, STAFF, SPECIAL, SENIOR, BOOKS BY MAIL started registration early in 2003, DIGITAL ACCESS CARD type of patrons registered in around 2014.</p>
</section>
<section id="total-checkouts-and-renewals-by-patron-types" class="level3">
<h3 class="anchored" data-anchor-id="total-checkouts-and-renewals-by-patron-types">Total Checkouts and Renewals by Patron Types</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>patron_type, <span class="at">y=</span>total_checkouts)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"tomato"</span>)<span class="sc">+</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Checkouts by Patron type"</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Patron type"</span>,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Checkouts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(., aes(x = patron_type, y = total_checkouts)): object 'library_data' not found</code></pre>
</div>
</div>
<p>The majority of checkouts were made by ADULTS and SENIORS as compared to other types of patrons, which validates our theory above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>patron_type, <span class="at">y=</span>total_renewals)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"tomato"</span>)<span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Renewals by Patron type"</span>,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Patron type"</span>,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Renewals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(., aes(x = patron_type, y = total_renewals)): object 'library_data' not found</code></pre>
</div>
</div>
<p>The renewals here show that even though ADULTS and SENIORS had maximum renewals, there were significant renewals by YOUNG ADULTS, JUVENILE and STAFF members as well.</p>
<p>There is also an important column “outside_of_county” which shows the patrons outside of San Franciso. Let us analyze some trends related to the column.</p>
</section>
<section id="patron-registration-by-residency" class="level3">
<h3 class="anchored" data-anchor-id="patron-registration-by-residency">Patron Registration by Residency</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>outside_of_county, <span class="at">fill=</span>outside_of_county)) <span class="sc">+</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Year of Registration by Residency"</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year of Registry"</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of patrons registered"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., age != "NA"): object 'library_data' not found</code></pre>
</div>
</div>
<p>We can observe, that residents had higher registrations starting 2003, which took a dip in between, and in the recent years from 2012 to 2016, non-residents had higher registrations. It is interesting to see that the awareness has increased amongst people outside SF county as well.</p>
</section>
<section id="total-checkouts-and-total-renewals-by-residency" class="level3">
<h3 class="anchored" data-anchor-id="total-checkouts-and-total-renewals-by-residency">Total Checkouts and Total Renewals by Residency</h3>
<p>Looking into total checkouts and total renewals based on residency of patrons.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(total_checkouts , outside_of_county)) <span class="sc">+</span><span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color=</span>outside_of_county))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Patrons Outside and In County"</span>, <span class="at">x=</span><span class="st">'Outside of County'</span>,<span class="at">y=</span><span class="st">'Total Checkouts'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(., aes(total_checkouts, outside_of_county)): object 'library_data' not found</code></pre>
</div>
</div>
<p>The plot suggests, most of the patrons are present in SF itself. Also, total checkouts for a few patrons in SF cross over 20k as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(total_renewals , outside_of_county)) <span class="sc">+</span><span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color=</span>outside_of_county))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Renewals by Patrons Outside and In County"</span>, <span class="at">x=</span><span class="st">'Outside of County'</span>,<span class="at">y=</span><span class="st">'Total Renewals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(., aes(total_renewals, outside_of_county)): object 'library_data' not found</code></pre>
</div>
</div>
<p>The plot suggests, most of the patrons are present in SF itself. Also, total renewals for a few patrons in SF are more than 10k.</p>
<p>Now, moving to branches information, and checking the patron registration, total checkouts and total renewals for the same.</p>
</section>
<section id="patrons-registeration-by-branches" class="level3">
<h3 class="anchored" data-anchor-id="patrons-registeration-by-branches">Patrons Registeration by Branches</h3>
<p>The plots show how many patrons registered in each year for each branch location.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bottom Left</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(library_data, <span class="fu">aes</span>(<span class="at">x=</span>branch, <span class="at">y=</span>year_registered, <span class="at">fill=</span>branch)) <span class="sc">+</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.3</span>)<span class="sc">+</span> <span class="fu">coord_flip</span>()  <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),<span class="at">legend.position=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Year of Patron Registration by Branches'</span>,<span class="at">x=</span><span class="st">'Year Registered'</span>,<span class="at">y=</span><span class="st">'Branch'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(library_data, aes(x = branch, y = year_registered, fill = branch)): object 'library_data' not found</code></pre>
</div>
</div>
<p>There is an interesting observation in Children’s Bookmobile Branch, while most registries of patrons were towards 2012, there was one registry in 2003 (which can be seen as an outlier). We can also observe, West Portal branch and all the Branch bookmobiles had registrations starting in 2003 itself.</p>
</section>
<section id="total-checkouts-and-total-renewals-by-branches" class="level3">
<h3 class="anchored" data-anchor-id="total-checkouts-and-total-renewals-by-branches">Total Checkouts and Total Renewals by Branches</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> branch,<span class="at">y=</span>total_checkouts)) <span class="sc">+</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightblue'</span>) <span class="sc">+</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Checkouts by Branch"</span>,</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Checkouts"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = library_data, aes(x = branch, y = total_checkouts)): object 'library_data' not found</code></pre>
</div>
</div>
<p>We can observe most checkouts were made by patrons in Main Library, which makes sense as Main branch generally has maximum accessibility.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> branch,<span class="at">y=</span>total_renewals)) <span class="sc">+</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightpink'</span>) <span class="sc">+</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Renewals by Branch"</span>,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Renewals"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = library_data, aes(x = branch, y = total_renewals)): object 'library_data' not found</code></pre>
</div>
</div>
<p>Similarly, Main Library has maximum renewals as compared to other branches, which makes sense as Main branch generally has maximum accessibility.</p>
</section>
<section id="checkouts-and-renewals---a-trend" class="level3">
<h3 class="anchored" data-anchor-id="checkouts-and-renewals---a-trend">Checkouts and Renewals - A trend</h3>
<p>As, seen the “Total Checkouts” and “Total Renewals” follow a similar trend for all categories, let us analyze them in with the year of registry.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>filtered <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_registered) <span class="sc">%&gt;%</span>                    <span class="co"># group by</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">check =</span> <span class="fu">mean</span>(total_checkouts), <span class="at">rene =</span> <span class="fu">mean</span>(total_renewals)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in group_by(., year_registered): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> filtered, <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">y=</span>check),<span class="at">arrow =</span> <span class="fu">arrow</span>(), <span class="at">color=</span><span class="st">"#69b3a2"</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span><span class="st">"#69b3a2"</span>)<span class="sc">+</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Checkouts by Year of Registry"</span>,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Year Registered"</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Checkouts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fortify(data): object 'filtered' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>filtered <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_registered) <span class="sc">%&gt;%</span>                    <span class="co"># group by</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">check =</span> <span class="fu">mean</span>(total_checkouts), <span class="at">rene =</span> <span class="fu">mean</span>(total_renewals)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in group_by(., year_registered): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> filtered, <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">y=</span>rene),<span class="at">arrow =</span> <span class="fu">arrow</span>(), <span class="at">color=</span><span class="st">"lightblue"</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span><span class="st">"lightblue"</span>)<span class="sc">+</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Renewals by Year of Registry"</span>,</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Year Registered"</span>,</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Renewals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fortify(data): object 'filtered' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The values of checkouts and renewals have been declining over the years, having been at its highest in 2003 and being the lowest in value by 2016. There was a slight increase in 2007 but was not much significant. This totally makes sense, as the people who registered way before had more time, thus, more checkouts and subscriptions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(active_year<span class="sc">!=</span><span class="st">'None'</span>)<span class="sc">%&gt;%</span><span class="co"># data                 </span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(active_year) <span class="sc">%&gt;%</span>                   </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">y =</span> <span class="fu">mean</span>(total_checkouts)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>active_year, <span class="at">y=</span>y, <span class="at">group=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">arrow =</span> <span class="fu">arrow</span>(),<span class="at">color=</span><span class="st">"#D55E00"</span>, <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"#D55E00"</span>, <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Checkouts by Active Year"</span>,</span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Active Year (Last year of activity)"</span>,</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Checkouts"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., active_year != "None"): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(active_year<span class="sc">!=</span><span class="st">'None'</span>)<span class="sc">%&gt;%</span><span class="co"># data                 </span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(active_year) <span class="sc">%&gt;%</span>                    <span class="co"># group by</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">y =</span> <span class="fu">mean</span>(total_renewals)) <span class="sc">%&gt;%</span> </span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>active_year, <span class="at">y=</span>y, <span class="at">group=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">arrow =</span> <span class="fu">arrow</span>(),<span class="at">color=</span><span class="st">'#E69F00'</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">'#E69F00'</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Renewals by Active Year"</span>,</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Active Year (Last year of activity)"</span>,</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Renewals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., active_year != "None"): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The Checkouts and renewals value is increasing significantly from year to year and the highest value was in 2016. This basically shows us the trend about how people are issuing more and more books moving forward.</p>
<p>As, seen Total renewals and Total Checkouts clearly follow similar trends, let us confirm their correlation using a plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(library_data<span class="sc">$</span>total_checkouts, library_data<span class="sc">$</span>total_renewals, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">"lightblue"</span>,<span class="at">xlab=</span><span class="st">"Total Checkouts"</span>, <span class="at">ylab=</span><span class="st">"Total Renewals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in plot(library_data$total_checkouts, library_data$total_renewals, : object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression line</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">lm</span>( library_data<span class="sc">$</span>total_renewals <span class="sc">~</span> library_data<span class="sc">$</span>total_checkouts), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(predvars, data, env): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pearson correlation</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="fu">paste</span>(<span class="st">"Correlation:"</span>, <span class="fu">round</span>(<span class="fu">cor</span>(library_data<span class="sc">$</span>total_checkouts,  library_data<span class="sc">$</span>total_renewals), <span class="dv">2</span>)),<span class="at">x=</span><span class="dv">30000</span>,<span class="at">y=</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in is.data.frame(y): object 'library_data' not found</code></pre>
</div>
</div>
<p>The plot suggests a strong correlation between total checkouts and total renewals with a pearson coefficient of 0.59 ~ 0.6.</p>
</section>
<section id="diving-deeper-into-monthly-data" class="level3">
<h3 class="anchored" data-anchor-id="diving-deeper-into-monthly-data">Diving Deeper into Monthly data</h3>
<p>Now, we will take a deeper look into the total checkouts/renewals trend by analyzing the monthly data for all patrons.</p>
</section>
<section id="total-checkouts-by-months-for-year-2016" class="level3">
<h3 class="anchored" data-anchor-id="total-checkouts-by-months-for-year-2016">Total Checkouts by months for year 2016</h3>
<p>As, this dataset provides information about monthly checkouts and renewals, we will look at monthly charts for latest year in the records i.e.&nbsp;2016, to understand what trends have been lately.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(active_year<span class="sc">==</span><span class="st">'2016'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> y_m, <span class="at">fill =</span> total_checkouts)) <span class="sc">+</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>( <span class="at">fill=</span><span class="st">"#404080"</span>, <span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">stat =</span> <span class="st">"count"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>), <span class="at">legend.position =</span> <span class="st">"none"</span>)<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Month for year 2016"</span>, <span class="at">y=</span><span class="st">"Total Checkouts"</span>,<span class="at">x=</span><span class="st">"month"</span>)<span class="sc">+</span><span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., active_year == "2016"): object 'library_data' not found</code></pre>
</div>
</div>
<p>The histogram suggests the majority of checkouts occurred in month of July followed by June. To understand the trends better we will dive deep into July 2016 patron records.</p>
</section>
<section id="trends-of-age-range-and-patron-type-for-july-2016" class="level3">
<h3 class="anchored" data-anchor-id="trends-of-age-range-and-patron-type-for-july-2016">Trends of Age Range and Patron Type for July 2016</h3>
<p>Looking closely into July data, to understand the distribution of Total Checkouts by Age and Patron type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(y_m <span class="sc">==</span><span class="st">'2016 July'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., y_m == "2016 July"): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(filter_data<span class="sc">$</span>total_checkouts, <span class="at">by=</span><span class="fu">list</span>(<span class="at">Age_Range=</span>filter_data<span class="sc">$</span>age), <span class="at">FUN=</span>mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in aggregate(filter_data$total_checkouts, by = list(Age_Range = filter_data$age), : object 'filter_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>filter_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'filter_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filter_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> x, <span class="at">fill =</span> Age_Range)) <span class="sc">+</span> </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>)<span class="sc">+</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Age Range"</span>)<span class="sc">+</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Paired"</span>)<span class="sc">+</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid  =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = filter_data, aes(x = "", y = x, fill = Age_Range)): object 'filter_data' not found</code></pre>
</div>
</div>
<p>The pie chart shows the major contributions of checkouts in July 2016 were made by ages 45 years and above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>co <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#FFDB6D"</span>, <span class="st">"#C4961A"</span>, <span class="st">"#F4EDCA"</span>, </span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">"#D16103"</span>, <span class="st">"#C3D7A4"</span>, <span class="st">"#52854C"</span>, <span class="st">"#4E84C4"</span>, <span class="st">"#293352"</span>,<span class="st">"#000000"</span>, <span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span>,</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">"#F0E442"</span>, <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>,<span class="st">"#999999"</span>)</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(y_m <span class="sc">==</span><span class="st">'2016 July'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., y_m == "2016 July"): object 'library_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(filter_data<span class="sc">$</span>total_checkouts, <span class="at">by=</span><span class="fu">list</span>(<span class="at">Patron_Types=</span>filter_data<span class="sc">$</span>patron_type), <span class="at">FUN=</span>mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in aggregate(filter_data$total_checkouts, by = list(Patron_Types = filter_data$patron_type), : object 'filter_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>filter_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'filter_data' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filter_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> x, <span class="at">fill =</span> Patron_Types)) <span class="sc">+</span> </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>)<span class="sc">+</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Patrons type"</span>)<span class="sc">+</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>co)<span class="sc">+</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid  =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = filter_data, aes(x = "", y = x, fill = Patron_Types)): object 'filter_data' not found</code></pre>
</div>
</div>
<p>The pie chart suggests major contributions in July 2016 for checkout were made by Retired Staff and Staff members.</p>
<p>Lastly, let us analyze total checkouts/renewals (As they follow similar trend) and patron registration using two categories at the same time for better view.</p>
</section>
<section id="total-checkouts-by-patron-types-and-age-ranges" class="level3">
<h3 class="anchored" data-anchor-id="total-checkouts-by-patron-types-and-age-ranges">Total Checkouts by Patron Types and Age Ranges</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>age, <span class="at">y=</span>patron_type, <span class="at">size =</span> total_checkouts)) <span class="sc">+</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total checkouts by Patron Types and Age Ranges"</span>,<span class="at">x=</span><span class="st">'Age Range'</span>,<span class="at">y=</span><span class="st">'Patron Type'</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., age != "NA"): object 'library_data' not found</code></pre>
</div>
</div>
<p>We can observe major activity were made by ADULTS of age 35-44 years and 45-54 years,SENIORS of 65-74 years. There are also a few checkouts by STAFF members with ages 0-9 years, which looks suspicious.</p>
</section>
<section id="different-patron-types-by-year-of-registery-and-their-residence." class="level3">
<h3 class="anchored" data-anchor-id="different-patron-types-by-year-of-registery-and-their-residence.">Different Patron types by year of registery and their residence.</h3>
<p>This shows density of patrons based on the year of registration of different types of patrons residing in and out of San Franciso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using Small multiple</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>library_data, <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>outside_of_county, <span class="at">fill=</span>outside_of_county)) <span class="sc">+</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>,<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>patron_type) <span class="sc">+</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"lines"</span>),</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Patron density based on year of registration, patron type and residency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(data = library_data, aes(x = year_registered, group = outside_of_county, : object 'library_data' not found</code></pre>
</div>
</div>
<p>We can observe, patrons of Digital Access Card type have most registrations for both residents and non-residents. We can also see that Retired Staff had most registrations in 2003, with residents having double registrations than non-residents.</p>
</section>
<section id="different-age-range-by-year-of-registery-and-their-residence." class="level3">
<h3 class="anchored" data-anchor-id="different-age-range-by-year-of-registery-and-their-residence.">Different Age Range by year of registery and their residence.</h3>
<p>This shows density of patrons based on the year of registration for different age groups residing in and out of San Franciso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using Small multiple</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>outside_of_county, <span class="at">fill=</span>outside_of_county)) <span class="sc">+</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>age) <span class="sc">+</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.9</span>, <span class="st">"lines"</span>),</span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>()</span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Patron density based on year of registration, age range and residency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in filter(., age != "NA"): object 'library_data' not found</code></pre>
</div>
</div>
<p>We can observe, most patrons of ages 65-74 years registered in 2003, which makes sense as they are old and would have registered earlier, also residents have almost 1.5 times more registrations than non-residents in this age range in year 2003. Also, for age range 10-19 years and 20-24 years, there are mostly non-residents who have registered after 2012, while residents are very less.</p>
</section>
</section>
<section id="reflection" class="level2">
<h2 class="anchored" data-anchor-id="reflection">REFLECTION</h2>
<p>This project and working with R has been a learning experience for me as I am a Computer Science student. While starting this project, I thought maybe the San Franciso Library Usage dataset would be very concise, but as I kept diving into the dataset, I realized it has so much information about patrons, the library branches, the age groups and their contributions to checkouts and renewals of books. The Integrated library management dataset gave me some interesting findings.</p>
<p>My strategy was to understand how each category(column) is affecting the checkouts and renewals, and then if any interesting observation was seen, I would move forward with digging in more in that direction. For eg: I looked into 2016’s data per month and found that July had the most checkouts. I dived in to the July 2016’s data to understand who made those checkouts? Which age range and patron type contributed the most to it? This approach made the visualization making process very intriguing for me.</p>
<p>The dataset had a lot of records, but to incorporate more information on branches I searched through the SF public library website and manually loaded the data to a csv, which I then incorporated in the main dataset. Challenging part was to understand what different fields mean, specially what different year values signify? Also, understanding from whose point of view is this data made and whats the timeline?</p>
<p>I tried to learn, have fun with it, and incorporate all types of plots, specially histograms, density plots and facet_wrap which made it easier to see observations. If we had more information about the data from other parts of California or USA, I could have found trends for a much higher population using these visualizations. Also, we need more information about the branches, as only geographical information was available on the website. Apart from that, some information about the different categories of books, which age groups like which categories more, that would be an interesting research to do.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">CONCLUSION</h2>
<p>Starting from the basics, there were 10 Age ranges varying over 17 Patron Types, 34 branches and over 4 lakh records. The visualizations gave us insights about which Age Range is making the most checkouts and renewals - and it was inspiring to figure out that 10-19, 45-54 and 65-74 age ranges had the maximum checkouts, this implies all generations are interested in issuing books and reading them, which is a great habit. It was also seen that ADULTS and SENIORS had the highest checkouts and renewals, which means they take some time reading it or re-read it, by renewing the books. Comparatively, there are also high renewals for YOUNG ADULTS, students generally tend to issue some books for studying and end up renewing them. Looking at residency, I observed that residents have higher checkouts and renewals than non-residents, but it was interesting to observe that the non-residents patron registration has increased over the coming years, which suggests that the awareness among the people outside the SF county has increased and they are also issuing books now. Lastly, looking at the branches, it was observed that the most checkouts and renewals were made at the Main Library branch, which made sense as Main branch is generally most accessible to patrons.</p>
<p>It was very clear, that checkouts and renewals were strong correlated, which does make sense intuitively. I showed it using the pearson coefficient in our code above. The plots also reflected that the checkouts and renewals have increased over time, that means people are getting more and more interested in issuing and reading books. Another trend, I noted was related to “Year of Registry” and “Average Checkouts/Average Renewals”, which should intuitively follow a decreasing trend (as people who registered earlier will definitely have more checkouts due to more time), but there was a slight increase in 2007, so that was definitely an anomaly.</p>
<p>For having a better look into the data, I looked into the latest year’s data per month and found that July had the most checkouts. I dived into the July 2016 data and figured they were majorly made by patrons of age 45 and above, and most of them were Staff members or Retired staff. One reason for this could be the holiday season for students, as they do not contribute much towards the checkouts.</p>
<p>Using the three dimensional plots, we observed that patrons of Digital Access Card type have most registrations for both residents and non-residents, while Retired Staff had most registrations in 2003, with residents having double registrations than non-residents. Also, most patrons of ages 65-74 years registered in 2003, which makes sense as they are old and would have registered earlier. For age range 10-19 years and 20-24 years, there are mostly non-residents who have registered after 2012, while residents are very less. This seems very interesting, and shows people outside SF are also coming to issue books.</p>
<p>After so many observations, we still do not know how Age Ranges and Patron Types are related, and will need some more information about them. Also, how are different branches related to each other? Do they share some books? Some more information can lead to better observations and analysis, but all these visualizations on our dataset, were definitely insightful and enlightened me about the SF Integrated Library System.</p>
</section>
<section id="bibliography" class="level2">
<h2 class="anchored" data-anchor-id="bibliography">BIBLIOGRAPHY</h2>
<p>RStudio Team (2022). RStudio: Integrated Development Environment for R. RStudio, PBC, Boston, MA, http://www.rstudio.com/.</p>
<p>Wickham, H., François, R., Henry, L., &amp; Müller, K. (n.d.). Programming with dplyr. dplyr. https://dplyr.tidyverse.org/articles/programming.html</p>
<p>Wickham, H. &amp; Grolemund, G. (n.d.). R for data science [eBook edition]. O’Reilly. https://r4ds.had.co.nz/index.html</p>
<p>Wickham et al.&nbsp;(2019). Welcome to the tidyverse. Journal of Open Source Software, 4(43), 1686. https://doi.org/10.21105/joss.01686</p>
<p>Source of Dataset : https://www.kaggle.com/datasets/datasf/sf-library-usage-data</p>
<p>https://data.sfgov.org/Culture-and-Recreation/Library-Usage/qzz6-2jup</p>
<p>SF Public Library Website : https://sfpl.org/</p>
<p>Branch Information : https://sfpl.org/locations/#!/filters?sort_by=weight&amp;sort_order=ASC&amp;page=2</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/601_Fall_2022" data-repo-id="R_kgDOH564Gw" data-category="Announcements" data-category-id="DIC_kwDOH564G84CRdBB" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb129" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "SF Library Usage Analysis"</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Prajakti Kapade"</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Final Project"</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "12/17/2022"</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="fu">## INTRODUCTION</span></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a>Prior to computerization, library tasks were performed manually and independently from one another. Selectors ordered materials with ordering slips, cataloguers manually catalogued sources and indexed them with the card catalog system (in which all bibliographic data was kept on a single index card), fines were collected by local bailiffs, and users signed books out manually, indicating their name on clue cards which were then kept at the circulation desk. </span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a>Early mechanization came in 1936, when the University of Texas began using a punch card system to manage library circulation. While the punch card system allowed for more efficient tracking of loans, library services were far from being integrated, and no other library task was affected by this change. This led to customer dissatisfaction and they wanted to move towards a very systematic way of keeping track, then came in Integrated Library systems, one example of which is my dataset for the final project.</span>
<span id="cb129-18"><a href="#cb129-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-19"><a href="#cb129-19" aria-hidden="true" tabindex="-1"></a>This system is perfect for all educational institutions that wish to maintain minimum operational costs. The system helps with better management, lesser wastage of time and improves engagement and productivity. With this data, we can analyze the trends about different patrons based on their age, based on the registered year, their renewals and checkouts, and see the circulation trend.</span>
<span id="cb129-20"><a href="#cb129-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-21"><a href="#cb129-21" aria-hidden="true" tabindex="-1"></a>Research Question : How does Age, Patron type, Branch and Residency affect the patrons, their checkouts and their renewals?</span>
<span id="cb129-22"><a href="#cb129-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-23"><a href="#cb129-23" aria-hidden="true" tabindex="-1"></a>Installing and importing necessary packages</span>
<span id="cb129-26"><a href="#cb129-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-27"><a href="#cb129-27" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("hrbrthemes")</span></span>
<span id="cb129-28"><a href="#cb129-28" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("viridis")</span></span>
<span id="cb129-29"><a href="#cb129-29" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('patchwork')</span></span>
<span id="cb129-30"><a href="#cb129-30" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('zoo')</span></span>
<span id="cb129-31"><a href="#cb129-31" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('directlabels')</span></span>
<span id="cb129-32"><a href="#cb129-32" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-33"><a href="#cb129-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-36"><a href="#cb129-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-37"><a href="#cb129-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb129-38"><a href="#cb129-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb129-39"><a href="#cb129-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hrbrthemes)</span>
<span id="cb129-40"><a href="#cb129-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb129-41"><a href="#cb129-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb129-42"><a href="#cb129-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb129-43"><a href="#cb129-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb129-44"><a href="#cb129-44" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggbeeswarm)</span>
<span id="cb129-45"><a href="#cb129-45" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb129-46"><a href="#cb129-46" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(directlabels)</span>
<span id="cb129-47"><a href="#cb129-47" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>)</span>
<span id="cb129-48"><a href="#cb129-48" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-49"><a href="#cb129-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-50"><a href="#cb129-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## DATA</span></span>
<span id="cb129-51"><a href="#cb129-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-52"><a href="#cb129-52" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading the dataset</span></span>
<span id="cb129-53"><a href="#cb129-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-54"><a href="#cb129-54" aria-hidden="true" tabindex="-1"></a>The dataset - SF Integrated Learning System is sourced from Kaggle.com and is composed of bibliographic records including inventoried items, patron records, and circulation data. The data is used in the daily operation of the library, including circulation, online public catalog, cataloging, acquisitions, collection development, processing, and serials control. This dataset represents the usage of inventoried items by patrons (~420K records). It contains data starting from 2003 uptill 2016.</span>
<span id="cb129-55"><a href="#cb129-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-58"><a href="#cb129-58" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-59"><a href="#cb129-59" aria-hidden="true" tabindex="-1"></a>library_dataset <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"_data/Library_Usage.csv"</span>)</span>
<span id="cb129-60"><a href="#cb129-60" aria-hidden="true" tabindex="-1"></a>library_dataset</span>
<span id="cb129-61"><a href="#cb129-61" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-62"><a href="#cb129-62" aria-hidden="true" tabindex="-1"></a><span class="fu">### Summary of the dataset</span></span>
<span id="cb129-65"><a href="#cb129-65" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-66"><a href="#cb129-66" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(library_dataset)</span>
<span id="cb129-67"><a href="#cb129-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-68"><a href="#cb129-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-69"><a href="#cb129-69" aria-hidden="true" tabindex="-1"></a>The dataset contains 423448 records and 15 columns.</span>
<span id="cb129-70"><a href="#cb129-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-73"><a href="#cb129-73" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-74"><a href="#cb129-74" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(library_dataset)</span>
<span id="cb129-75"><a href="#cb129-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-76"><a href="#cb129-76" aria-hidden="true" tabindex="-1"></a>The above shows the columns of the dataset along with their datatype and the initial recordings of that particular columns. The distinct data types are : dbl - double/real number values, chr - characters and lgl - for boolean values.</span>
<span id="cb129-77"><a href="#cb129-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-78"><a href="#cb129-78" aria-hidden="true" tabindex="-1"></a>The columns and their description are as follows:</span>
<span id="cb129-79"><a href="#cb129-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-80"><a href="#cb129-80" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span><span class="in">`Patron Type Code`</span>- Type of patron record (adult, teen, child, senior, etc.)</span>
<span id="cb129-81"><a href="#cb129-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-82"><a href="#cb129-82" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span><span class="in">`Patron Type Definition`</span> - Description of patron (adult, teen, child, senior, etc.).</span>
<span id="cb129-83"><a href="#cb129-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-84"><a href="#cb129-84" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span><span class="in">`Total Checkouts`</span>- Total number of items the patron has checked out from the library since the record was created.</span>
<span id="cb129-85"><a href="#cb129-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-86"><a href="#cb129-86" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span><span class="in">`Total Renewals`</span> - Total number of times the patron has renewed checked-out items.</span>
<span id="cb129-87"><a href="#cb129-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-88"><a href="#cb129-88" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span><span class="in">`Age Range`</span>- Contains age ranges</span>
<span id="cb129-89"><a href="#cb129-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-90"><a href="#cb129-90" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span><span class="in">`Home Library Code`</span>- Default value indicates the branch library where the patron was originally registered.</span>
<span id="cb129-91"><a href="#cb129-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-92"><a href="#cb129-92" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span><span class="in">`Home Library Definition`</span> - Description of the branch library where the patron was originally registered.</span>
<span id="cb129-93"><a href="#cb129-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-94"><a href="#cb129-94" aria-hidden="true" tabindex="-1"></a><span class="ss">8. </span><span class="in">`Circulation Active Month`</span> - Year the patron last checked out library materials, or last logged into the library’s subscription databases.</span>
<span id="cb129-95"><a href="#cb129-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-96"><a href="#cb129-96" aria-hidden="true" tabindex="-1"></a><span class="ss">9. </span><span class="in">`Circulation Active Year`</span> - Month the patron last checked out library materials, or last logged into the library’s subscription databases.</span>
<span id="cb129-97"><a href="#cb129-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-98"><a href="#cb129-98" aria-hidden="true" tabindex="-1"></a><span class="ss">10. </span><span class="in">`Notice Preference Code`</span>- This field is used to indicate the patron’s preferred method of receiving library notices.</span>
<span id="cb129-99"><a href="#cb129-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-100"><a href="#cb129-100" aria-hidden="true" tabindex="-1"></a><span class="ss">11. </span><span class="in">`Notice Preference Definition`</span>- Description of the patron’s preferred method of receiving library notices.</span>
<span id="cb129-101"><a href="#cb129-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-102"><a href="#cb129-102" aria-hidden="true" tabindex="-1"></a><span class="ss">12. </span><span class="in">`Provided Email Address`</span> - Indicates if the patron has provided email address or not.</span>
<span id="cb129-103"><a href="#cb129-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-104"><a href="#cb129-104" aria-hidden="true" tabindex="-1"></a><span class="ss">13. </span><span class="in">`Year Patron Registered`</span>- Year patron registered with library system. No dates prior to 2003  due to system migration.</span>
<span id="cb129-105"><a href="#cb129-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-106"><a href="#cb129-106" aria-hidden="true" tabindex="-1"></a><span class="ss">14. </span><span class="in">`Outside of County`</span> - If a patron's home address is not in San Francisco, then flagged as true, otherwise false.</span>
<span id="cb129-107"><a href="#cb129-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-108"><a href="#cb129-108" aria-hidden="true" tabindex="-1"></a><span class="ss">15. </span><span class="in">`Supervisor District`</span> - Based on patron address: San Francisco Supervisor District. Based on the website it suggested that "This is an automated field, please note that if "Outside of County" is true, then there will be no supervisor district. Also, if the input address was not well-formed, the supervisor district will be blank."</span>
<span id="cb129-109"><a href="#cb129-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-110"><a href="#cb129-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-111"><a href="#cb129-111" aria-hidden="true" tabindex="-1"></a><span class="fu">### Renaming the columns</span></span>
<span id="cb129-114"><a href="#cb129-114" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-115"><a href="#cb129-115" aria-hidden="true" tabindex="-1"></a>library_dataset <span class="ot">&lt;-</span> library_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb129-116"><a href="#cb129-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>( <span class="st">'out_of_county'</span> <span class="ot">=</span> <span class="st">'Outside of County'</span>, <span class="st">"patron_type"</span> <span class="ot">=</span> <span class="st">'Patron Type Definition'</span>, <span class="st">"total_checkouts"</span> <span class="ot">=</span> <span class="st">'Total Checkouts'</span>, <span class="st">"total_renewals"</span><span class="ot">=</span> <span class="st">'Total Renewals'</span>, <span class="st">'age'</span> <span class="ot">=</span> <span class="st">'Age Range'</span>, <span class="st">'branch'</span> <span class="ot">=</span> <span class="st">'Home Library Definition'</span>,<span class="st">'active_year'</span> <span class="ot">=</span> <span class="st">'Circulation Active Year'</span>, <span class="st">'active_month'</span> <span class="ot">=</span> <span class="st">'Circulation Active Month'</span>, <span class="st">'notice_preference'</span> <span class="ot">=</span> <span class="st">'Notice Preference Definition'</span>, <span class="st">'provided_email'</span> <span class="ot">=</span> <span class="st">'Provided Email Address'</span>, <span class="st">'year_registered'</span> <span class="ot">=</span> <span class="st">'Year Patron Registered'</span>, <span class="st">"outside_of_county"</span> <span class="ot">=</span> <span class="st">'Outside of County'</span>)</span>
<span id="cb129-117"><a href="#cb129-117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-118"><a href="#cb129-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-119"><a href="#cb129-119" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cleaning the dataset </span></span>
<span id="cb129-120"><a href="#cb129-120" aria-hidden="true" tabindex="-1"></a>Selected the columns with unique characteristic for our visualizations and analysis. Some columns contain the code for the definition example : Home Library Code is the subsequent code for the Home Library Definition.</span>
<span id="cb129-123"><a href="#cb129-123" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-124"><a href="#cb129-124" aria-hidden="true" tabindex="-1"></a>library_data <span class="ot">&lt;-</span> library_dataset<span class="sc">%&gt;%</span></span>
<span id="cb129-125"><a href="#cb129-125" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(patron_type,total_checkouts,total_renewals,age,branch,active_month,active_year,notice_preference,provided_email,year_registered,outside_of_county)</span>
<span id="cb129-126"><a href="#cb129-126" aria-hidden="true" tabindex="-1"></a>library_data</span>
<span id="cb129-127"><a href="#cb129-127" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-130"><a href="#cb129-130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-131"><a href="#cb129-131" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">$</span>y_m <span class="ot">&lt;-</span> <span class="fu">paste</span>(library_data<span class="sc">$</span>active_year,library_data<span class="sc">$</span>active_month)</span>
<span id="cb129-132"><a href="#cb129-132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-133"><a href="#cb129-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-134"><a href="#cb129-134" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading the branch information</span></span>
<span id="cb129-135"><a href="#cb129-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-136"><a href="#cb129-136" aria-hidden="true" tabindex="-1"></a>The dataset mentions the names of different branches of SF Public Library along with their code, but it does not give us any more information about these branches. I extracted some data about the branches from the public library website : https://sfpl.org/locations/#!/filters?sort_by=weight&amp;sort_order=ASC&amp;page=2 and created my own dataset "branch_info" (with 30 branches and their information). I have merged it with the original dataset for better information about each branch and their corresponding patrons.</span>
<span id="cb129-137"><a href="#cb129-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-140"><a href="#cb129-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-141"><a href="#cb129-141" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(library_data<span class="sc">$</span>branch)</span>
<span id="cb129-142"><a href="#cb129-142" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-143"><a href="#cb129-143" aria-hidden="true" tabindex="-1"></a>The above shows the different branches of San Franciso Public Library.</span>
<span id="cb129-144"><a href="#cb129-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-147"><a href="#cb129-147" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-148"><a href="#cb129-148" aria-hidden="true" tabindex="-1"></a>branch_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'_data/branch_info.csv'</span>)</span>
<span id="cb129-149"><a href="#cb129-149" aria-hidden="true" tabindex="-1"></a>branch_data</span>
<span id="cb129-150"><a href="#cb129-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-151"><a href="#cb129-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-152"><a href="#cb129-152" aria-hidden="true" tabindex="-1"></a>Joining the branch_data dataset wih the main dataset based on branch name.</span>
<span id="cb129-155"><a href="#cb129-155" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-156"><a href="#cb129-156" aria-hidden="true" tabindex="-1"></a>library_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(library_data, branch_data, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"branch"</span>))</span>
<span id="cb129-157"><a href="#cb129-157" aria-hidden="true" tabindex="-1"></a>library_data</span>
<span id="cb129-158"><a href="#cb129-158" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-159"><a href="#cb129-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-160"><a href="#cb129-160" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Exploration</span></span>
<span id="cb129-161"><a href="#cb129-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-162"><a href="#cb129-162" aria-hidden="true" tabindex="-1"></a>As mentioned in my research question, we will look at the number of records based on the categories/columns.</span>
<span id="cb129-165"><a href="#cb129-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-166"><a href="#cb129-166" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb129-167"><a href="#cb129-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb129-168"><a href="#cb129-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb129-169"><a href="#cb129-169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb129-170"><a href="#cb129-170" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'lightblue'</span>) <span class="sc">+</span></span>
<span id="cb129-171"><a href="#cb129-171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by Age Range"</span>,</span>
<span id="cb129-172"><a href="#cb129-172" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb129-173"><a href="#cb129-173" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span>
<span id="cb129-174"><a href="#cb129-174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-175"><a href="#cb129-175" aria-hidden="true" tabindex="-1"></a>The above plot shows the distribution of records based on age range. We can observe that maximum records in the library system lies for the range of 25 to 34 years followed by 35 to 44 years.</span>
<span id="cb129-176"><a href="#cb129-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-179"><a href="#cb129-179" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-180"><a href="#cb129-180" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> patron_type)) <span class="sc">+</span></span>
<span id="cb129-181"><a href="#cb129-181" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb129-182"><a href="#cb129-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'lightpink'</span>) <span class="sc">+</span></span>
<span id="cb129-183"><a href="#cb129-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by Patron type"</span>,</span>
<span id="cb129-184"><a href="#cb129-184" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Patron Type"</span>,</span>
<span id="cb129-185"><a href="#cb129-185" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span>
<span id="cb129-186"><a href="#cb129-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-187"><a href="#cb129-187" aria-hidden="true" tabindex="-1"></a>The most prominent types of patrons registered in SF Library system are : Adults, Juvenile, Senior, Welcome (guest) and Young Adults.</span>
<span id="cb129-188"><a href="#cb129-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-191"><a href="#cb129-191" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-192"><a href="#cb129-192" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> branch)) <span class="sc">+</span></span>
<span id="cb129-193"><a href="#cb129-193" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb129-194"><a href="#cb129-194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'lightyellow'</span>) <span class="sc">+</span></span>
<span id="cb129-195"><a href="#cb129-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by branches"</span>,</span>
<span id="cb129-196"><a href="#cb129-196" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Branches"</span>,</span>
<span id="cb129-197"><a href="#cb129-197" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span>
<span id="cb129-198"><a href="#cb129-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-199"><a href="#cb129-199" aria-hidden="true" tabindex="-1"></a>The maximum patrons where registered at the MAIN Library, which makes sense, as the main branch generally has most books and is most accessible to the people.</span>
<span id="cb129-200"><a href="#cb129-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-203"><a href="#cb129-203" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-204"><a href="#cb129-204" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> outside_of_county)) <span class="sc">+</span></span>
<span id="cb129-205"><a href="#cb129-205" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb129-206"><a href="#cb129-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">fill=</span><span class="st">'orange'</span>) <span class="sc">+</span></span>
<span id="cb129-207"><a href="#cb129-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of records by Residency"</span>,</span>
<span id="cb129-208"><a href="#cb129-208" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Outside of County"</span>,</span>
<span id="cb129-209"><a href="#cb129-209" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number for Records"</span>)</span>
<span id="cb129-210"><a href="#cb129-210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-211"><a href="#cb129-211" aria-hidden="true" tabindex="-1"></a>Most patrons are residing in the San Franciso County itself, while very less patrons are present outside.</span>
<span id="cb129-212"><a href="#cb129-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-213"><a href="#cb129-213" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Statistics</span></span>
<span id="cb129-214"><a href="#cb129-214" aria-hidden="true" tabindex="-1"></a>The two main continuous columns of this dataset are : Total Renewals and Total Checkouts made by the patrons. The statistics for which are present below:</span>
<span id="cb129-215"><a href="#cb129-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-218"><a href="#cb129-218" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-219"><a href="#cb129-219" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(library_data<span class="sc">$</span>total_checkouts)</span>
<span id="cb129-220"><a href="#cb129-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-221"><a href="#cb129-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-224"><a href="#cb129-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-225"><a href="#cb129-225" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(library_data<span class="sc">$</span>total_renewals)</span>
<span id="cb129-226"><a href="#cb129-226" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-227"><a href="#cb129-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-228"><a href="#cb129-228" aria-hidden="true" tabindex="-1"></a><span class="fu">## VISUALIZATIONS </span></span>
<span id="cb129-229"><a href="#cb129-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-230"><a href="#cb129-230" aria-hidden="true" tabindex="-1"></a><span class="fu">### Patron Registeration by Age Range</span></span>
<span id="cb129-231"><a href="#cb129-231" aria-hidden="true" tabindex="-1"></a>Firstly, we will analyze the trend of "year when patrons registered" with the "Age Range". This will give us an idea of when patrons registered according to the age groups.</span>
<span id="cb129-234"><a href="#cb129-234" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-235"><a href="#cb129-235" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb129-236"><a href="#cb129-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb129-237"><a href="#cb129-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>age, <span class="at">fill=</span>age)) <span class="sc">+</span></span>
<span id="cb129-238"><a href="#cb129-238" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb129-239"><a href="#cb129-239" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Year of Registration by Age Range"</span>,</span>
<span id="cb129-240"><a href="#cb129-240" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year of Registry"</span>,</span>
<span id="cb129-241"><a href="#cb129-241" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of patrons registered"</span>)</span>
<span id="cb129-242"><a href="#cb129-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-243"><a href="#cb129-243" aria-hidden="true" tabindex="-1"></a>As expected patrons with ages 60 and higher have been registered since 2003. We can see that the young children from the age of 0-9 years have started registering since 2012, which shows they are curious readers or their parents would've enrolled them to read books and gain information.  </span>
<span id="cb129-244"><a href="#cb129-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-245"><a href="#cb129-245" aria-hidden="true" tabindex="-1"></a><span class="fu">### Total Checkouts and Renewals by Age Range</span></span>
<span id="cb129-246"><a href="#cb129-246" aria-hidden="true" tabindex="-1"></a>Now, we will look into the two important columns total checkouts and total renewals for each category of patrons and different age groups to get an idea of the circulation of the books.</span>
<span id="cb129-247"><a href="#cb129-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-250"><a href="#cb129-250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-251"><a href="#cb129-251" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb129-252"><a href="#cb129-252" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb129-253"><a href="#cb129-253" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age,<span class="at">y=</span>total_checkouts)) <span class="sc">+</span></span>
<span id="cb129-254"><a href="#cb129-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightpink'</span>) <span class="sc">+</span></span>
<span id="cb129-255"><a href="#cb129-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Checkouts by Age Range"</span>,</span>
<span id="cb129-256"><a href="#cb129-256" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb129-257"><a href="#cb129-257" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of checkouts"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span>
<span id="cb129-258"><a href="#cb129-258" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-259"><a href="#cb129-259" aria-hidden="true" tabindex="-1"></a>The majority of checkouts in the SF libraries were made by ages: 65 to 74 years followed by 45-54 years and the young readers 10-19 years.This shows us that the every generation is interested in reading books.</span>
<span id="cb129-260"><a href="#cb129-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-263"><a href="#cb129-263" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-264"><a href="#cb129-264" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-265"><a href="#cb129-265" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> age,<span class="at">y=</span>total_renewals)) <span class="sc">+</span></span>
<span id="cb129-266"><a href="#cb129-266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightblue'</span>) <span class="sc">+</span></span>
<span id="cb129-267"><a href="#cb129-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Renewals by Age Range"</span>,</span>
<span id="cb129-268"><a href="#cb129-268" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb129-269"><a href="#cb129-269" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Renewals"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span>
<span id="cb129-270"><a href="#cb129-270" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-271"><a href="#cb129-271" aria-hidden="true" tabindex="-1"></a>The majority of renewals on the other hand were made by 45-54 years followed by 65-74 years. We can observe using the above two trends that 45-54 and 65-74 years age gaps show maximum engagement and have issued and renewed majority of books as compared to others.</span>
<span id="cb129-272"><a href="#cb129-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-273"><a href="#cb129-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-274"><a href="#cb129-274" aria-hidden="true" tabindex="-1"></a>Now, we will move towards next category of interest - Patron Type. Looking into the registration year, total checkouts and total renewals made my patrons according to Patron Type.</span>
<span id="cb129-275"><a href="#cb129-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-276"><a href="#cb129-276" aria-hidden="true" tabindex="-1"></a><span class="fu">### Patron registration by Patron Types</span></span>
<span id="cb129-279"><a href="#cb129-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-280"><a href="#cb129-280" aria-hidden="true" tabindex="-1"></a><span class="co"># Bottom Left</span></span>
<span id="cb129-281"><a href="#cb129-281" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(library_data, <span class="fu">aes</span>(<span class="at">x=</span>patron_type, <span class="at">y=</span>year_registered, <span class="at">fill=</span>patron_type)) <span class="sc">+</span> </span>
<span id="cb129-282"><a href="#cb129-282" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.3</span>)<span class="sc">+</span> <span class="fu">coord_flip</span>()  <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),<span class="at">legend.position=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb129-283"><a href="#cb129-283" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Year of Patron Registration by Patron Type'</span>,<span class="at">x=</span><span class="st">'Year Registered'</span>,<span class="at">y=</span><span class="st">'Patron type'</span>)</span>
<span id="cb129-284"><a href="#cb129-284" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-285"><a href="#cb129-285" aria-hidden="true" tabindex="-1"></a>As seen from the plot, STAFF, SPECIAL, SENIOR, BOOKS BY MAIL started registration early in 2003, DIGITAL ACCESS CARD type of patrons registered in around 2014.</span>
<span id="cb129-286"><a href="#cb129-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-287"><a href="#cb129-287" aria-hidden="true" tabindex="-1"></a><span class="fu">### Total Checkouts and Renewals by Patron Types</span></span>
<span id="cb129-290"><a href="#cb129-290" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-291"><a href="#cb129-291" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span> </span>
<span id="cb129-292"><a href="#cb129-292" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>patron_type, <span class="at">y=</span>total_checkouts)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb129-293"><a href="#cb129-293" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"tomato"</span>)<span class="sc">+</span></span>
<span id="cb129-294"><a href="#cb129-294" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb129-295"><a href="#cb129-295" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Checkouts by Patron type"</span>,</span>
<span id="cb129-296"><a href="#cb129-296" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Patron type"</span>,</span>
<span id="cb129-297"><a href="#cb129-297" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Checkouts"</span>)</span>
<span id="cb129-298"><a href="#cb129-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-299"><a href="#cb129-299" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-300"><a href="#cb129-300" aria-hidden="true" tabindex="-1"></a>The majority of checkouts were made by ADULTS and SENIORS as compared to other types of patrons, which validates our theory above.</span>
<span id="cb129-301"><a href="#cb129-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-304"><a href="#cb129-304" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-305"><a href="#cb129-305" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span> </span>
<span id="cb129-306"><a href="#cb129-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>patron_type, <span class="at">y=</span>total_renewals)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb129-307"><a href="#cb129-307" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">color =</span> <span class="st">"tomato"</span>)<span class="sc">+</span></span>
<span id="cb129-308"><a href="#cb129-308" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb129-309"><a href="#cb129-309" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Renewals by Patron type"</span>,</span>
<span id="cb129-310"><a href="#cb129-310" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Patron type"</span>,</span>
<span id="cb129-311"><a href="#cb129-311" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Renewals"</span>)</span>
<span id="cb129-312"><a href="#cb129-312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-313"><a href="#cb129-313" aria-hidden="true" tabindex="-1"></a>The renewals here show that even though ADULTS and SENIORS had maximum renewals, there were significant renewals by YOUNG ADULTS, JUVENILE and STAFF members as well.</span>
<span id="cb129-314"><a href="#cb129-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-315"><a href="#cb129-315" aria-hidden="true" tabindex="-1"></a>There is also an important column "outside_of_county" which shows the patrons outside of San Franciso. Let us analyze some trends related to the column.</span>
<span id="cb129-316"><a href="#cb129-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-317"><a href="#cb129-317" aria-hidden="true" tabindex="-1"></a><span class="fu">### Patron Registration by Residency</span></span>
<span id="cb129-320"><a href="#cb129-320" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-321"><a href="#cb129-321" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb129-322"><a href="#cb129-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb129-323"><a href="#cb129-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>outside_of_county, <span class="at">fill=</span>outside_of_county)) <span class="sc">+</span></span>
<span id="cb129-324"><a href="#cb129-324" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb129-325"><a href="#cb129-325" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Year of Registration by Residency"</span>,</span>
<span id="cb129-326"><a href="#cb129-326" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year of Registry"</span>,</span>
<span id="cb129-327"><a href="#cb129-327" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of patrons registered"</span>)</span>
<span id="cb129-328"><a href="#cb129-328" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-329"><a href="#cb129-329" aria-hidden="true" tabindex="-1"></a>We can observe, that residents had higher registrations starting 2003, which took a dip in between, and in the recent years from 2012 to 2016, non-residents had higher registrations. It is interesting to see that the awareness has increased amongst people outside SF county as well.</span>
<span id="cb129-330"><a href="#cb129-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-331"><a href="#cb129-331" aria-hidden="true" tabindex="-1"></a><span class="fu">### Total Checkouts and Total Renewals by Residency</span></span>
<span id="cb129-332"><a href="#cb129-332" aria-hidden="true" tabindex="-1"></a>Looking into total checkouts and total renewals based on residency of patrons.</span>
<span id="cb129-335"><a href="#cb129-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-336"><a href="#cb129-336" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(total_checkouts , outside_of_county)) <span class="sc">+</span><span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color=</span>outside_of_county))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Patrons Outside and In County"</span>, <span class="at">x=</span><span class="st">'Outside of County'</span>,<span class="at">y=</span><span class="st">'Total Checkouts'</span>)</span>
<span id="cb129-337"><a href="#cb129-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-338"><a href="#cb129-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-339"><a href="#cb129-339" aria-hidden="true" tabindex="-1"></a>The plot suggests, most of the patrons are present in SF itself. Also, total checkouts for a few patrons in SF cross over 20k as well.</span>
<span id="cb129-340"><a href="#cb129-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-343"><a href="#cb129-343" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-344"><a href="#cb129-344" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(total_renewals , outside_of_county)) <span class="sc">+</span><span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color=</span>outside_of_county))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Renewals by Patrons Outside and In County"</span>, <span class="at">x=</span><span class="st">'Outside of County'</span>,<span class="at">y=</span><span class="st">'Total Renewals'</span>)</span>
<span id="cb129-345"><a href="#cb129-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-346"><a href="#cb129-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-347"><a href="#cb129-347" aria-hidden="true" tabindex="-1"></a>The plot suggests, most of the patrons are present in SF itself. Also, total renewals for a few patrons in SF are more than 10k.</span>
<span id="cb129-348"><a href="#cb129-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-349"><a href="#cb129-349" aria-hidden="true" tabindex="-1"></a>Now, moving to branches information, and checking the patron registration, total checkouts and total renewals for the same.</span>
<span id="cb129-350"><a href="#cb129-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-351"><a href="#cb129-351" aria-hidden="true" tabindex="-1"></a><span class="fu">### Patrons Registeration by Branches</span></span>
<span id="cb129-352"><a href="#cb129-352" aria-hidden="true" tabindex="-1"></a>The plots show how many patrons registered in each year for each branch location.</span>
<span id="cb129-355"><a href="#cb129-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-356"><a href="#cb129-356" aria-hidden="true" tabindex="-1"></a><span class="co"># Bottom Left</span></span>
<span id="cb129-357"><a href="#cb129-357" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(library_data, <span class="fu">aes</span>(<span class="at">x=</span>branch, <span class="at">y=</span>year_registered, <span class="at">fill=</span>branch)) <span class="sc">+</span> </span>
<span id="cb129-358"><a href="#cb129-358" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.3</span>)<span class="sc">+</span> <span class="fu">coord_flip</span>()  <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),<span class="at">legend.position=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb129-359"><a href="#cb129-359" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Year of Patron Registration by Branches'</span>,<span class="at">x=</span><span class="st">'Year Registered'</span>,<span class="at">y=</span><span class="st">'Branch'</span>)</span>
<span id="cb129-360"><a href="#cb129-360" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-361"><a href="#cb129-361" aria-hidden="true" tabindex="-1"></a>There is an interesting observation in Children's Bookmobile Branch, while most registries of patrons were towards 2012, there was one registry in 2003 (which can be seen as an outlier). We can also observe, West Portal branch and all the Branch bookmobiles had registrations starting in 2003 itself.</span>
<span id="cb129-362"><a href="#cb129-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-363"><a href="#cb129-363" aria-hidden="true" tabindex="-1"></a><span class="fu">### Total Checkouts and Total Renewals by Branches</span></span>
<span id="cb129-366"><a href="#cb129-366" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-367"><a href="#cb129-367" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-368"><a href="#cb129-368" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> branch,<span class="at">y=</span>total_checkouts)) <span class="sc">+</span></span>
<span id="cb129-369"><a href="#cb129-369" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightblue'</span>) <span class="sc">+</span></span>
<span id="cb129-370"><a href="#cb129-370" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Checkouts by Branch"</span>,</span>
<span id="cb129-371"><a href="#cb129-371" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb129-372"><a href="#cb129-372" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Checkouts"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span>
<span id="cb129-373"><a href="#cb129-373" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-374"><a href="#cb129-374" aria-hidden="true" tabindex="-1"></a>We can observe most checkouts were made by patrons in Main Library, which makes sense as Main branch generally has maximum accessibility.</span>
<span id="cb129-377"><a href="#cb129-377" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-378"><a href="#cb129-378" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-379"><a href="#cb129-379" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> library_data, <span class="fu">aes</span>(<span class="at">x =</span> branch,<span class="at">y=</span>total_renewals)) <span class="sc">+</span></span>
<span id="cb129-380"><a href="#cb129-380" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"sum"</span>,<span class="at">fill=</span><span class="st">'lightpink'</span>) <span class="sc">+</span></span>
<span id="cb129-381"><a href="#cb129-381" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Renewals by Branch"</span>,</span>
<span id="cb129-382"><a href="#cb129-382" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb129-383"><a href="#cb129-383" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total number of Renewals"</span>) <span class="sc">+</span><span class="fu">coord_flip</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span>
<span id="cb129-384"><a href="#cb129-384" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-385"><a href="#cb129-385" aria-hidden="true" tabindex="-1"></a>Similarly, Main Library has maximum renewals as compared to other branches, which makes sense as Main branch generally has maximum accessibility.</span>
<span id="cb129-386"><a href="#cb129-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-387"><a href="#cb129-387" aria-hidden="true" tabindex="-1"></a><span class="fu">### Checkouts and Renewals - A trend</span></span>
<span id="cb129-388"><a href="#cb129-388" aria-hidden="true" tabindex="-1"></a>As, seen the "Total Checkouts" and "Total Renewals" follow a similar trend for all categories, let us analyze them in with the year of registry.</span>
<span id="cb129-391"><a href="#cb129-391" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-392"><a href="#cb129-392" aria-hidden="true" tabindex="-1"></a>filtered <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-393"><a href="#cb129-393" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_registered) <span class="sc">%&gt;%</span>                    <span class="co"># group by</span></span>
<span id="cb129-394"><a href="#cb129-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">check =</span> <span class="fu">mean</span>(total_checkouts), <span class="at">rene =</span> <span class="fu">mean</span>(total_renewals)) </span>
<span id="cb129-395"><a href="#cb129-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-396"><a href="#cb129-396" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb129-397"><a href="#cb129-397" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> filtered, <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">y=</span>check),<span class="at">arrow =</span> <span class="fu">arrow</span>(), <span class="at">color=</span><span class="st">"#69b3a2"</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb129-398"><a href="#cb129-398" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span><span class="st">"#69b3a2"</span>)<span class="sc">+</span></span>
<span id="cb129-399"><a href="#cb129-399" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Checkouts by Year of Registry"</span>,</span>
<span id="cb129-400"><a href="#cb129-400" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Year Registered"</span>,</span>
<span id="cb129-401"><a href="#cb129-401" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Checkouts"</span>)</span>
<span id="cb129-402"><a href="#cb129-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-403"><a href="#cb129-403" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span>
<span id="cb129-404"><a href="#cb129-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-405"><a href="#cb129-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-408"><a href="#cb129-408" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-409"><a href="#cb129-409" aria-hidden="true" tabindex="-1"></a>filtered <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-410"><a href="#cb129-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_registered) <span class="sc">%&gt;%</span>                    <span class="co"># group by</span></span>
<span id="cb129-411"><a href="#cb129-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">check =</span> <span class="fu">mean</span>(total_checkouts), <span class="at">rene =</span> <span class="fu">mean</span>(total_renewals)) </span>
<span id="cb129-412"><a href="#cb129-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-413"><a href="#cb129-413" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb129-414"><a href="#cb129-414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> filtered, <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">y=</span>rene),<span class="at">arrow =</span> <span class="fu">arrow</span>(), <span class="at">color=</span><span class="st">"lightblue"</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb129-415"><a href="#cb129-415" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>, <span class="at">color=</span><span class="st">"lightblue"</span>)<span class="sc">+</span></span>
<span id="cb129-416"><a href="#cb129-416" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Renewals by Year of Registry"</span>,</span>
<span id="cb129-417"><a href="#cb129-417" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Year Registered"</span>,</span>
<span id="cb129-418"><a href="#cb129-418" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Renewals"</span>)</span>
<span id="cb129-419"><a href="#cb129-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-420"><a href="#cb129-420" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span>
<span id="cb129-421"><a href="#cb129-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-422"><a href="#cb129-422" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-423"><a href="#cb129-423" aria-hidden="true" tabindex="-1"></a>The values of checkouts and renewals have been declining over the years, having been at its highest in 2003 and being the lowest in value by 2016. There was a slight increase in 2007 but was not much significant. This totally makes sense, as the people who registered way before had more time, thus, more checkouts and subscriptions.</span>
<span id="cb129-424"><a href="#cb129-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-425"><a href="#cb129-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-428"><a href="#cb129-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-429"><a href="#cb129-429" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-430"><a href="#cb129-430" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(active_year<span class="sc">!=</span><span class="st">'None'</span>)<span class="sc">%&gt;%</span><span class="co"># data                 </span></span>
<span id="cb129-431"><a href="#cb129-431" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(active_year) <span class="sc">%&gt;%</span>                   </span>
<span id="cb129-432"><a href="#cb129-432" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">y =</span> <span class="fu">mean</span>(total_checkouts)) <span class="sc">%&gt;%</span> </span>
<span id="cb129-433"><a href="#cb129-433" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>active_year, <span class="at">y=</span>y, <span class="at">group=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb129-434"><a href="#cb129-434" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">arrow =</span> <span class="fu">arrow</span>(),<span class="at">color=</span><span class="st">"#D55E00"</span>, <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb129-435"><a href="#cb129-435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"#D55E00"</span>, <span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb129-436"><a href="#cb129-436" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Checkouts by Active Year"</span>,</span>
<span id="cb129-437"><a href="#cb129-437" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Active Year (Last year of activity)"</span>,</span>
<span id="cb129-438"><a href="#cb129-438" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Checkouts"</span>)</span>
<span id="cb129-439"><a href="#cb129-439" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span>
<span id="cb129-440"><a href="#cb129-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-441"><a href="#cb129-441" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-442"><a href="#cb129-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-445"><a href="#cb129-445" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-446"><a href="#cb129-446" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-447"><a href="#cb129-447" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(active_year<span class="sc">!=</span><span class="st">'None'</span>)<span class="sc">%&gt;%</span><span class="co"># data                 </span></span>
<span id="cb129-448"><a href="#cb129-448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(active_year) <span class="sc">%&gt;%</span>                    <span class="co"># group by</span></span>
<span id="cb129-449"><a href="#cb129-449" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">y =</span> <span class="fu">mean</span>(total_renewals)) <span class="sc">%&gt;%</span> </span>
<span id="cb129-450"><a href="#cb129-450" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>active_year, <span class="at">y=</span>y, <span class="at">group=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb129-451"><a href="#cb129-451" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">arrow =</span> <span class="fu">arrow</span>(),<span class="at">color=</span><span class="st">'#E69F00'</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb129-452"><a href="#cb129-452" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">'#E69F00'</span>,<span class="at">size=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb129-453"><a href="#cb129-453" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Renewals by Active Year"</span>,</span>
<span id="cb129-454"><a href="#cb129-454" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Active Year (Last year of activity)"</span>,</span>
<span id="cb129-455"><a href="#cb129-455" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Average number of Renewals"</span>)</span>
<span id="cb129-456"><a href="#cb129-456" aria-hidden="true" tabindex="-1"></a>myarrow<span class="ot">=</span><span class="fu">arrow</span>(<span class="at">angle =</span> <span class="dv">15</span>, <span class="at">ends =</span> <span class="st">"both"</span>, <span class="at">type =</span> <span class="st">"closed"</span>)</span>
<span id="cb129-457"><a href="#cb129-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-458"><a href="#cb129-458" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-459"><a href="#cb129-459" aria-hidden="true" tabindex="-1"></a>The Checkouts and renewals value is increasing significantly from year to year and the highest value was in 2016. This basically shows us the trend about how people are issuing more and more books moving forward.</span>
<span id="cb129-460"><a href="#cb129-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-461"><a href="#cb129-461" aria-hidden="true" tabindex="-1"></a>As, seen Total renewals and Total Checkouts clearly follow similar trends, let us confirm their correlation using a plot.</span>
<span id="cb129-464"><a href="#cb129-464" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-465"><a href="#cb129-465" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(library_data<span class="sc">$</span>total_checkouts, library_data<span class="sc">$</span>total_renewals, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">"lightblue"</span>,<span class="at">xlab=</span><span class="st">"Total Checkouts"</span>, <span class="at">ylab=</span><span class="st">"Total Renewals"</span>)</span>
<span id="cb129-466"><a href="#cb129-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-467"><a href="#cb129-467" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression line</span></span>
<span id="cb129-468"><a href="#cb129-468" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">lm</span>( library_data<span class="sc">$</span>total_renewals <span class="sc">~</span> library_data<span class="sc">$</span>total_checkouts), <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb129-469"><a href="#cb129-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-470"><a href="#cb129-470" aria-hidden="true" tabindex="-1"></a><span class="co"># Pearson correlation</span></span>
<span id="cb129-471"><a href="#cb129-471" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="fu">paste</span>(<span class="st">"Correlation:"</span>, <span class="fu">round</span>(<span class="fu">cor</span>(library_data<span class="sc">$</span>total_checkouts,  library_data<span class="sc">$</span>total_renewals), <span class="dv">2</span>)),<span class="at">x=</span><span class="dv">30000</span>,<span class="at">y=</span><span class="dv">1000</span>)</span>
<span id="cb129-472"><a href="#cb129-472" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-473"><a href="#cb129-473" aria-hidden="true" tabindex="-1"></a>The plot suggests a strong correlation between total checkouts and total renewals with a pearson coefficient of 0.59 ~ 0.6.</span>
<span id="cb129-474"><a href="#cb129-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-475"><a href="#cb129-475" aria-hidden="true" tabindex="-1"></a><span class="fu">### Diving Deeper into Monthly data</span></span>
<span id="cb129-476"><a href="#cb129-476" aria-hidden="true" tabindex="-1"></a>Now, we will take a deeper look into the total checkouts/renewals trend by analyzing the monthly data for all patrons.</span>
<span id="cb129-477"><a href="#cb129-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-478"><a href="#cb129-478" aria-hidden="true" tabindex="-1"></a><span class="fu">### Total Checkouts by months for year 2016</span></span>
<span id="cb129-479"><a href="#cb129-479" aria-hidden="true" tabindex="-1"></a>As, this dataset provides information about monthly checkouts and renewals, we will look at monthly charts for latest year in the records i.e. 2016, to understand what trends have been lately.</span>
<span id="cb129-482"><a href="#cb129-482" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-483"><a href="#cb129-483" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-484"><a href="#cb129-484" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(active_year<span class="sc">==</span><span class="st">'2016'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb129-485"><a href="#cb129-485" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> y_m, <span class="at">fill =</span> total_checkouts)) <span class="sc">+</span></span>
<span id="cb129-486"><a href="#cb129-486" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>( <span class="at">fill=</span><span class="st">"#404080"</span>, <span class="at">alpha=</span><span class="fl">0.6</span>, <span class="at">stat =</span> <span class="st">"count"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>), <span class="at">legend.position =</span> <span class="st">"none"</span>)<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Month for year 2016"</span>, <span class="at">y=</span><span class="st">"Total Checkouts"</span>,<span class="at">x=</span><span class="st">"month"</span>)<span class="sc">+</span><span class="fu">coord_flip</span>()</span>
<span id="cb129-487"><a href="#cb129-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-488"><a href="#cb129-488" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-489"><a href="#cb129-489" aria-hidden="true" tabindex="-1"></a>The histogram suggests the majority of checkouts occurred in month of July followed by June. To understand the trends better we will dive deep into July 2016 patron records.</span>
<span id="cb129-490"><a href="#cb129-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-491"><a href="#cb129-491" aria-hidden="true" tabindex="-1"></a><span class="fu">### Trends of Age Range and Patron Type for July 2016</span></span>
<span id="cb129-492"><a href="#cb129-492" aria-hidden="true" tabindex="-1"></a>Looking closely into July data, to understand the distribution of Total Checkouts by Age and Patron type:</span>
<span id="cb129-495"><a href="#cb129-495" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-496"><a href="#cb129-496" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-497"><a href="#cb129-497" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(y_m <span class="sc">==</span><span class="st">'2016 July'</span>)</span>
<span id="cb129-498"><a href="#cb129-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-499"><a href="#cb129-499" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(filter_data<span class="sc">$</span>total_checkouts, <span class="at">by=</span><span class="fu">list</span>(<span class="at">Age_Range=</span>filter_data<span class="sc">$</span>age), <span class="at">FUN=</span>mean)</span>
<span id="cb129-500"><a href="#cb129-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-501"><a href="#cb129-501" aria-hidden="true" tabindex="-1"></a>filter_data</span>
<span id="cb129-502"><a href="#cb129-502" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filter_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> x, <span class="at">fill =</span> Age_Range)) <span class="sc">+</span> </span>
<span id="cb129-503"><a href="#cb129-503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb129-504"><a href="#cb129-504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>)<span class="sc">+</span></span>
<span id="cb129-505"><a href="#cb129-505" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Age Range"</span>)<span class="sc">+</span></span>
<span id="cb129-506"><a href="#cb129-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Paired"</span>)<span class="sc">+</span></span>
<span id="cb129-507"><a href="#cb129-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb129-508"><a href="#cb129-508" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb129-509"><a href="#cb129-509" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid  =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb129-510"><a href="#cb129-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>)</span>
<span id="cb129-511"><a href="#cb129-511" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-512"><a href="#cb129-512" aria-hidden="true" tabindex="-1"></a>The pie chart shows the major contributions of checkouts in July 2016 were made by ages 45 years and above.</span>
<span id="cb129-513"><a href="#cb129-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-516"><a href="#cb129-516" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-517"><a href="#cb129-517" aria-hidden="true" tabindex="-1"></a>co <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#FFDB6D"</span>, <span class="st">"#C4961A"</span>, <span class="st">"#F4EDCA"</span>, </span>
<span id="cb129-518"><a href="#cb129-518" aria-hidden="true" tabindex="-1"></a>                <span class="st">"#D16103"</span>, <span class="st">"#C3D7A4"</span>, <span class="st">"#52854C"</span>, <span class="st">"#4E84C4"</span>, <span class="st">"#293352"</span>,<span class="st">"#000000"</span>, <span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span>,</span>
<span id="cb129-519"><a href="#cb129-519" aria-hidden="true" tabindex="-1"></a>          <span class="st">"#F0E442"</span>, <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>,<span class="st">"#999999"</span>)</span>
<span id="cb129-520"><a href="#cb129-520" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-521"><a href="#cb129-521" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(y_m <span class="sc">==</span><span class="st">'2016 July'</span>)</span>
<span id="cb129-522"><a href="#cb129-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-523"><a href="#cb129-523" aria-hidden="true" tabindex="-1"></a>filter_data <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(filter_data<span class="sc">$</span>total_checkouts, <span class="at">by=</span><span class="fu">list</span>(<span class="at">Patron_Types=</span>filter_data<span class="sc">$</span>patron_type), <span class="at">FUN=</span>mean)</span>
<span id="cb129-524"><a href="#cb129-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-525"><a href="#cb129-525" aria-hidden="true" tabindex="-1"></a>filter_data</span>
<span id="cb129-526"><a href="#cb129-526" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filter_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> x, <span class="at">fill =</span> Patron_Types)) <span class="sc">+</span> </span>
<span id="cb129-527"><a href="#cb129-527" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb129-528"><a href="#cb129-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>)<span class="sc">+</span></span>
<span id="cb129-529"><a href="#cb129-529" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total Checkouts by Patrons type"</span>)<span class="sc">+</span></span>
<span id="cb129-530"><a href="#cb129-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>co)<span class="sc">+</span></span>
<span id="cb129-531"><a href="#cb129-531" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb129-532"><a href="#cb129-532" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb129-533"><a href="#cb129-533" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid  =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb129-534"><a href="#cb129-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">""</span>)</span>
<span id="cb129-535"><a href="#cb129-535" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-536"><a href="#cb129-536" aria-hidden="true" tabindex="-1"></a>The pie chart suggests major contributions in July 2016 for checkout were made by Retired Staff and Staff members.</span>
<span id="cb129-537"><a href="#cb129-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-538"><a href="#cb129-538" aria-hidden="true" tabindex="-1"></a>Lastly, let us analyze total checkouts/renewals (As they follow similar trend) and patron registration using two categories at the same time for better view.</span>
<span id="cb129-539"><a href="#cb129-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-540"><a href="#cb129-540" aria-hidden="true" tabindex="-1"></a><span class="fu">### Total Checkouts by Patron Types and Age Ranges</span></span>
<span id="cb129-543"><a href="#cb129-543" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-544"><a href="#cb129-544" aria-hidden="true" tabindex="-1"></a>library_data <span class="sc">%&gt;%</span></span>
<span id="cb129-545"><a href="#cb129-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb129-546"><a href="#cb129-546" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>age, <span class="at">y=</span>patron_type, <span class="at">size =</span> total_checkouts)) <span class="sc">+</span></span>
<span id="cb129-547"><a href="#cb129-547" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb129-548"><a href="#cb129-548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))<span class="sc">+</span></span>
<span id="cb129-549"><a href="#cb129-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Total checkouts by Patron Types and Age Ranges"</span>,<span class="at">x=</span><span class="st">'Age Range'</span>,<span class="at">y=</span><span class="st">'Patron Type'</span>) </span>
<span id="cb129-550"><a href="#cb129-550" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-551"><a href="#cb129-551" aria-hidden="true" tabindex="-1"></a>We can observe major activity were made by ADULTS of age 35-44 years and 45-54 years,SENIORS of 65-74 years. There are also a few checkouts by STAFF members with ages 0-9 years, which looks suspicious.</span>
<span id="cb129-552"><a href="#cb129-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-553"><a href="#cb129-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-554"><a href="#cb129-554" aria-hidden="true" tabindex="-1"></a><span class="fu">### Different Patron types by year of registery and their residence.</span></span>
<span id="cb129-555"><a href="#cb129-555" aria-hidden="true" tabindex="-1"></a>This shows density of patrons based on the year of registration of different types of patrons residing in and out of San Franciso.</span>
<span id="cb129-558"><a href="#cb129-558" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-559"><a href="#cb129-559" aria-hidden="true" tabindex="-1"></a><span class="co"># Using Small multiple</span></span>
<span id="cb129-560"><a href="#cb129-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-561"><a href="#cb129-561" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>library_data, <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>outside_of_county, <span class="at">fill=</span>outside_of_county)) <span class="sc">+</span></span>
<span id="cb129-562"><a href="#cb129-562" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>,<span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb129-563"><a href="#cb129-563" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>patron_type) <span class="sc">+</span></span>
<span id="cb129-564"><a href="#cb129-564" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb129-565"><a href="#cb129-565" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb129-566"><a href="#cb129-566" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"lines"</span>),</span>
<span id="cb129-567"><a href="#cb129-567" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb129-568"><a href="#cb129-568" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb129-569"><a href="#cb129-569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Patron density based on year of registration, patron type and residency"</span>)</span>
<span id="cb129-570"><a href="#cb129-570" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-571"><a href="#cb129-571" aria-hidden="true" tabindex="-1"></a>We can observe, patrons of Digital Access Card type have most registrations for both residents and non-residents. We can also see that Retired Staff had most registrations in 2003, with residents having double registrations than non-residents.</span>
<span id="cb129-572"><a href="#cb129-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-573"><a href="#cb129-573" aria-hidden="true" tabindex="-1"></a><span class="fu">### Different Age Range by year of registery and their residence.</span></span>
<span id="cb129-574"><a href="#cb129-574" aria-hidden="true" tabindex="-1"></a>This shows density of patrons based on the year of registration for different age groups residing in and out of San Franciso.</span>
<span id="cb129-577"><a href="#cb129-577" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-578"><a href="#cb129-578" aria-hidden="true" tabindex="-1"></a><span class="co"># Using Small multiple</span></span>
<span id="cb129-579"><a href="#cb129-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-580"><a href="#cb129-580" aria-hidden="true" tabindex="-1"></a>library_data<span class="sc">%&gt;%</span></span>
<span id="cb129-581"><a href="#cb129-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age<span class="sc">!=</span><span class="st">'NA'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb129-582"><a href="#cb129-582" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(<span class="at">x=</span>year_registered, <span class="at">group=</span>outside_of_county, <span class="at">fill=</span>outside_of_county)) <span class="sc">+</span></span>
<span id="cb129-583"><a href="#cb129-583" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">adjust=</span><span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb129-584"><a href="#cb129-584" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>age) <span class="sc">+</span></span>
<span id="cb129-585"><a href="#cb129-585" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb129-586"><a href="#cb129-586" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb129-587"><a href="#cb129-587" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.9</span>, <span class="st">"lines"</span>),</span>
<span id="cb129-588"><a href="#cb129-588" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>()</span>
<span id="cb129-589"><a href="#cb129-589" aria-hidden="true" tabindex="-1"></a>    )<span class="sc">+</span></span>
<span id="cb129-590"><a href="#cb129-590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Patron density based on year of registration, age range and residency"</span>)</span>
<span id="cb129-591"><a href="#cb129-591" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-592"><a href="#cb129-592" aria-hidden="true" tabindex="-1"></a>We can observe, most patrons of ages 65-74 years registered in 2003, which makes sense as they are old and would have registered earlier, also residents have almost 1.5 times more registrations than non-residents in this age range in year 2003. Also, for age range 10-19 years and 20-24 years, there are mostly non-residents who have registered after 2012, while residents are very less.</span>
<span id="cb129-593"><a href="#cb129-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-594"><a href="#cb129-594" aria-hidden="true" tabindex="-1"></a><span class="fu">## REFLECTION</span></span>
<span id="cb129-595"><a href="#cb129-595" aria-hidden="true" tabindex="-1"></a>This project and working with R has been a learning experience for me as I am a Computer Science student. While starting this project, I thought maybe the San Franciso Library Usage dataset would be very concise, but as I kept diving into the dataset, I realized it has so much information about patrons, the library branches, the age groups and their contributions to checkouts and renewals of books. The Integrated library management dataset gave me some interesting findings.</span>
<span id="cb129-596"><a href="#cb129-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-597"><a href="#cb129-597" aria-hidden="true" tabindex="-1"></a>My strategy was to understand how each category(column) is affecting the checkouts and renewals, and then if any interesting observation was seen, I would  move forward with digging in more in that direction. For eg: I looked into 2016's data per month and found that July had the most checkouts. I dived in to the July 2016's data to understand who made those checkouts? Which age range and patron type contributed the most to it? This approach made the visualization making process very intriguing for me.</span>
<span id="cb129-598"><a href="#cb129-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-599"><a href="#cb129-599" aria-hidden="true" tabindex="-1"></a>The dataset had a lot of records, but to incorporate more information on branches I searched through the SF public library website and manually loaded the data to a csv, which I then incorporated in the main dataset. Challenging part was to understand what different fields mean, specially what different year values signify? Also, understanding from whose point of view is this data made and whats the timeline?</span>
<span id="cb129-600"><a href="#cb129-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-601"><a href="#cb129-601" aria-hidden="true" tabindex="-1"></a>I tried to learn, have fun with it, and incorporate all types of plots, specially histograms, density plots and facet_wrap which made it easier to see observations. If we had more information about the data from other parts of California or USA, I could have found trends for a much higher population using these visualizations. Also, we need more information about the branches, as only geographical information was available on the website. Apart from that, some information about the different categories of books, which age groups like which categories more, that would be an interesting research to do.</span>
<span id="cb129-602"><a href="#cb129-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-603"><a href="#cb129-603" aria-hidden="true" tabindex="-1"></a><span class="fu">## CONCLUSION</span></span>
<span id="cb129-604"><a href="#cb129-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-605"><a href="#cb129-605" aria-hidden="true" tabindex="-1"></a>Starting from the basics, there were 10 Age ranges varying over 17 Patron Types, 34 branches and over 4 lakh records. The visualizations gave us insights about which Age Range is making the most checkouts and renewals - and it was inspiring to figure out that 10-19, 45-54 and 65-74 age ranges had the maximum checkouts, this implies all generations are interested in issuing books and reading them, which is a great habit. It was also seen that ADULTS and SENIORS had the highest checkouts and renewals, which means they take some time reading it or re-read it, by renewing the books. Comparatively, there are also high renewals for YOUNG ADULTS, students generally tend to issue some books for studying and end up renewing them. Looking at residency, I observed that residents have higher checkouts and renewals than non-residents, but it was interesting to observe that the non-residents patron registration has increased over the coming years, which suggests that the awareness among the people outside the SF county has increased and they are also issuing books now. Lastly, looking at the branches, it was observed that the most checkouts and renewals were made at the Main Library branch, which made sense as Main branch is generally most accessible to patrons.</span>
<span id="cb129-606"><a href="#cb129-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-607"><a href="#cb129-607" aria-hidden="true" tabindex="-1"></a>It was very clear, that checkouts and renewals were strong correlated, which does make sense intuitively. I showed it using the pearson coefficient in our code above. The plots also reflected that the checkouts and renewals have increased over time, that means people are getting more and more interested in issuing and reading books. Another trend, I noted was related to "Year of Registry" and "Average Checkouts/Average Renewals", which should intuitively follow a decreasing trend (as people who registered earlier will definitely have more checkouts due to more time), but there was a slight increase in 2007, so that was definitely an anomaly.</span>
<span id="cb129-608"><a href="#cb129-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-609"><a href="#cb129-609" aria-hidden="true" tabindex="-1"></a>For having a better look into the data, I looked into the latest year's data per month and found that July had the most checkouts. I dived into the July 2016 data and figured they were majorly made by patrons of age 45 and above, and most of them were Staff members or Retired staff. One reason for this could be the holiday season for students, as they do not contribute much towards the checkouts. </span>
<span id="cb129-610"><a href="#cb129-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-611"><a href="#cb129-611" aria-hidden="true" tabindex="-1"></a>Using the three dimensional plots, we observed that patrons of Digital Access Card type have most registrations for both residents and non-residents, while Retired Staff had most registrations in 2003, with residents having double registrations than non-residents. Also, most patrons of ages 65-74 years registered in 2003, which makes sense as they are old and would have registered earlier. For age range 10-19 years and 20-24 years, there are mostly non-residents who have registered after 2012, while residents are very less. This seems very interesting, and shows people outside SF are also coming to issue books.</span>
<span id="cb129-612"><a href="#cb129-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-613"><a href="#cb129-613" aria-hidden="true" tabindex="-1"></a>After so many observations, we still do not know how Age Ranges and Patron Types are related, and will need some more information about them. Also, how are different branches related to each other? Do they share some books? Some more information can lead to better observations and analysis, but all these visualizations on our dataset, were definitely insightful and enlightened me about the SF Integrated Library System.</span>
<span id="cb129-614"><a href="#cb129-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-615"><a href="#cb129-615" aria-hidden="true" tabindex="-1"></a><span class="fu">## BIBLIOGRAPHY</span></span>
<span id="cb129-616"><a href="#cb129-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-617"><a href="#cb129-617" aria-hidden="true" tabindex="-1"></a>RStudio Team (2022). RStudio: Integrated Development Environment for R. RStudio, PBC, Boston, MA, http://www.rstudio.com/.</span>
<span id="cb129-618"><a href="#cb129-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-619"><a href="#cb129-619" aria-hidden="true" tabindex="-1"></a>Wickham, H., François, R., Henry, L., &amp; Müller, K. (n.d.). Programming with dplyr. dplyr. https://dplyr.tidyverse.org/articles/programming.html</span>
<span id="cb129-620"><a href="#cb129-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-621"><a href="#cb129-621" aria-hidden="true" tabindex="-1"></a>Wickham, H. &amp; Grolemund, G. (n.d.). R for data science <span class="co">[</span><span class="ot">eBook edition</span><span class="co">]</span>. O’Reilly. https://r4ds.had.co.nz/index.html</span>
<span id="cb129-622"><a href="#cb129-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-623"><a href="#cb129-623" aria-hidden="true" tabindex="-1"></a>Wickham et al. (2019). Welcome to the tidyverse. Journal of Open Source Software, 4(43), 1686. https://doi.org/10.21105/joss.01686</span>
<span id="cb129-624"><a href="#cb129-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-625"><a href="#cb129-625" aria-hidden="true" tabindex="-1"></a>Source of Dataset : https://www.kaggle.com/datasets/datasf/sf-library-usage-data</span>
<span id="cb129-626"><a href="#cb129-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-627"><a href="#cb129-627" aria-hidden="true" tabindex="-1"></a>https://data.sfgov.org/Culture-and-Recreation/Library-Usage/qzz6-2jup</span>
<span id="cb129-628"><a href="#cb129-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-629"><a href="#cb129-629" aria-hidden="true" tabindex="-1"></a>SF Public Library Website : https://sfpl.org/ </span>
<span id="cb129-630"><a href="#cb129-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-631"><a href="#cb129-631" aria-hidden="true" tabindex="-1"></a>Branch Information : https://sfpl.org/locations/#!/filters?sort_by=weight&amp;sort_order=ASC&amp;page=2</span>
<span id="cb129-632"><a href="#cb129-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-633"><a href="#cb129-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-634"><a href="#cb129-634" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>